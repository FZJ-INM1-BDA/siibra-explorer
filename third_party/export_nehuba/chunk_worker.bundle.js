/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2018 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2017 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(p,e,m){p!=Array.prototype&&p!=Object.prototype&&(p[e]=m.value)};$jscomp.getGlobal=function(p){return"undefined"!=typeof window&&window===p?p:"undefined"!=typeof global&&null!=global?global:p};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(p){return $jscomp.SYMBOL_PREFIX+(p||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var p=$jscomp.global.Symbol.iterator;p||(p=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[p]&&$jscomp.defineProperty(Array.prototype,p,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(p){var e=0;return $jscomp.iteratorPrototype(function(){return e<p.length?{done:!1,value:p[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(p){$jscomp.initSymbolIterator();p={next:p};p[$jscomp.global.Symbol.iterator]=function(){return this};return p};$jscomp.makeIterator=function(p){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=p[Symbol.iterator];return e?e.call(p):$jscomp.arrayIterator(p)};$jscomp.arrayFromIterator=function(p){for(var e,m=[];!(e=p.next()).done;)m.push(e.value);return m};$jscomp.arrayFromIterable=function(p){return p instanceof Array?p:$jscomp.arrayFromIterator($jscomp.makeIterator(p))};
$jscomp.owns=function(p,e){return Object.prototype.hasOwnProperty.call(p,e)};$jscomp.polyfill=function(p,e,m,k){if(e){m=$jscomp.global;p=p.split(".");for(k=0;k<p.length-1;k++){var f=p[k];f in m||(m[f]={});m=m[f]}p=p[p.length-1];k=m[p];e=e(k);e!=k&&null!=e&&$jscomp.defineProperty(m,p,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("WeakMap",function(p){function e(a){$jscomp.owns(a,k)||$jscomp.defineProperty(a,k,{value:{}})}function m(a){var b=Object[a];b&&(Object[a]=function(a){e(a);return b(a)})}if(function(){if(!p||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new p([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(n){return!1}}())return p;var k="$jscomp_hidden_"+Math.random().toString().substring(2);m("freeze");m("preventExtensions");
m("seal");var f=0,c=function(a){this.id_=(f+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){e(a);if(!$jscomp.owns(a,k))throw Error("WeakMap key fail: "+a);a[k][this.id_]=b;return this};c.prototype.get=function(a){return $jscomp.owns(a,k)?a[k][this.id_]:void 0};c.prototype.has=function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)};c.prototype.delete=
function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)?delete a[k][this.id_]:!1};return c},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(p){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!p||!p.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new p($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var n=c.entries(),l=n.next();if(l.done||l.value[0]!=a||"s"!=l.value[1])return!1;l=n.next();return l.done||4!=l.value[0].x||"t"!=l.value[1]||!n.next().done?!1:!0}catch(g){return!1}}())return p;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var e=new WeakMap,m=function(a){this.data_={};this.head_=c();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};m.prototype.set=function(a,c){var b=k(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=c:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:c},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};m.prototype.delete=
function(a){a=k(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};m.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=c();this.size=0};m.prototype.has=function(a){return!!k(this,a).entry};m.prototype.get=function(a){return(a=k(this,a).entry)&&a.value};m.prototype.entries=function(){return f(this,function(a){return[a.key,
a.value]})};m.prototype.keys=function(){return f(this,function(a){return a.key})};m.prototype.values=function(){return f(this,function(a){return a.value})};m.prototype.forEach=function(a,c){for(var b=this.entries(),d;!(d=b.next()).done;)d=d.value,a.call(c,d[1],d[0],this)};m.prototype[Symbol.iterator]=m.prototype.entries;var k=function(b,c){var d=c&&typeof c;"object"==d||"function"==d?e.has(c)?d=e.get(c):(d=""+ ++a,e.set(c,d)):d="p_"+c;var l=b.data_[d];if(l&&$jscomp.owns(b.data_,d))for(b=0;b<l.length;b++){var g=
l[b];if(c!==c&&g.key!==g.key||c===g.key)return{id:d,list:l,index:b,entry:g}}return{id:d,list:l,index:-1,entry:void 0}},f=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},c=function(){var a={};return a.previous=a.next=a.head=a},a=0;return m},"es6","es3");
$jscomp.iteratorFromArray=function(p,e){$jscomp.initSymbolIterator();p instanceof String&&(p+="");var m=0,k={next:function(){if(m<p.length){var f=m++;return{value:e(f,p[f]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.values",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(e,m){return m})}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(p){return p?p:function(e){return"number"===typeof e&&isNaN(e)}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(p){return p?p:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(p){return p?p:function(e){return Number.isFinite(e)?e===Math.floor(e):!1}},"es6","es3");$jscomp.polyfill("Array.from",function(p){return p?p:function(e,m,k){$jscomp.initSymbolIterator();m=null!=m?m:function(a){return a};var f=[],c=e[Symbol.iterator];if("function"==typeof c)for(e=c.call(e);!(c=e.next()).done;)f.push(m.call(k,c.value));else{c=e.length;for(var a=0;a<c;a++)f.push(m.call(k,e[a]))}return f}},"es6","es3");
$jscomp.checkStringArgs=function(p,e,m){if(null==p)throw new TypeError("The 'this' value for String.prototype."+m+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+m+" must not be a regular expression");return p+""};
$jscomp.polyfill("String.prototype.startsWith",function(p){return p?p:function(e,m){var k=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var f=k.length,c=e.length;m=Math.max(0,Math.min(m|0,k.length));for(var a=0;a<c&&m<f;)if(k[m++]!=e[a++])return!1;return a>=c}},"es6","es3");$jscomp.polyfill("Math.log2",function(p){return p?p:function(e){return Math.log(e)/Math.LN2}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(p){return p?p:function(e){var m=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var k="";e;)if(e&1&&(k+=m),e>>>=1)m+=m;return k}},"es6","es3");
$jscomp.polyfill("Set",function(p){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!p||!p.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),k=new p($jscomp.makeIterator([e]));if(!k.has(e)||1!=k.size||k.add(e)!=k||1!=k.size||k.add({x:4})!=k||2!=k.size)return!1;var f=k.entries(),c=f.next();if(c.done||c.value[0]!=e||c.value[1]!=e)return!1;c=f.next();return c.done||c.value[0]==e||4!=c.value[0].x||c.value[1]!=c.value[0]?!1:f.next().done}catch(a){return!1}}())return p;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=function(e){this.map_=new Map;if(e){e=$jscomp.makeIterator(e);for(var k;!(k=e.next()).done;)this.add(k.value)}this.size=this.map_.size};e.prototype.add=function(e){this.map_.set(e,e);this.size=this.map_.size;return this};e.prototype.delete=function(e){e=this.map_.delete(e);this.size=this.map_.size;return e};e.prototype.clear=function(){this.map_.clear();this.size=0};e.prototype.has=function(e){return this.map_.has(e)};e.prototype.entries=function(){return this.map_.entries()};
e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(e,k){var f=this;this.map_.forEach(function(c){return e.call(k,c,c,f)})};return e},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(p){function e(){this.batch_=null}function m(a){return a instanceof f?a:new f(function(b,c){b(a)})}if(p&&!$jscomp.FORCE_POLYFILL_PROMISE)return p;e.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};e.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var k=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(a){k(a,
0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};e.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(d){b.reject(d)}};f.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(d){this.reject_(d);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var c=new e;f.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};f.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(n){c.reject(n)}};f.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{n(a(b))}catch(h){l(h)}}:b}var n,l,g=new f(function(a,
b){n=a;l=b});this.callWhenSettled_(c(a,n),c(b,l));return g};f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(a,b){function d(){switch(n.state_){case 1:a(n.result_);break;case 2:b(n.result_);break;default:throw Error("Unexpected state: "+n.state_);}}var n=this;null==this.onSettledCallbacks_?c.asyncExecute(d):this.onSettledCallbacks_.push(function(){c.asyncExecute(d)})};f.resolve=m;f.reject=function(a){return new f(function(b,c){c(a)})};f.race=function(a){return new f(function(b,
c){for(var d=$jscomp.makeIterator(a),l=d.next();!l.done;l=d.next())m(l.value).callWhenSettled_(b,c)})};f.all=function(a){var b=$jscomp.makeIterator(a),c=b.next();return c.done?m([]):new f(function(a,d){function g(b){return function(c){r[b]=c;l--;0==l&&a(r)}}var r=[],l=0;do r.push(void 0),l++,m(c.value).callWhenSettled_(g(r.length-1),d),c=b.next();while(!c.done)})};return f},"es6","es3");
$jscomp.polyfill("Object.assign",function(p){return p?p:function(e,m){for(var k=1;k<arguments.length;k++){var f=arguments[k];if(f)for(var c in f)$jscomp.owns(f,c)&&(e[c]=f[c])}return e}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(e,m){return[e,m]})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(p){return p?p:function(e,m,k){var f=this.length||0;0>m&&(m=Math.max(0,f+m));if(null==k||k>f)k=f;k=Number(k);0>k&&(k=Math.max(0,f+k));for(m=Number(m||0);m<k;m++)this[m]=e;return this}},"es6","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(p){return p?p:function(e,m,k){var f=this.length;e=Number(e);m=Number(m);k=Number(null!=k?k:f);if(e<m)for(k=Math.min(k,f);m<k;)m in this?this[e++]=this[m++]:(delete this[e++],m++);else for(k=Math.min(k,f+m-e),e+=k-m;k>m;)--k in this?this[--e]=this[k]:delete this[e];return this}},"es6","es3");
(function(p,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports.exportNehuba=e():p.exportNehuba=e()})("undefined"!==typeof self?self:this,function(){return function(p){function e(k){if(m[k])return m[k].exports;var f=m[k]={i:k,l:!1,exports:{}};p[k].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var m={};e.m=p;e.c=m;e.d=function(k,f,c){e.o(k,f)||Object.defineProperty(k,f,{configurable:!1,
enumerable:!0,get:c})};e.n=function(k){var f=k&&k.__esModule?function(){return k["default"]}:function(){return k};e.d(f,"a",f);return f};e.o=function(k,f){return Object.prototype.hasOwnProperty.call(k,f)};e.p="";return e(e.s=54)}([function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?
a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){r.set(a,b)}function b(a,b,c){c=void 0===c?{}:c;null!=b&&a.initializeSharedObject(b,c.id)}e.f=a;e.e=function(b,c){a(b,function(a){var b=this,t=a.id,h=new d.b;a=c.call(this,
a,h);this.set(t,{promise:a,cancellationToken:h});a.then(function(a){var q=a.value;a=a.transfers;b.delete(t);b.invoke("rpc.promise.response",{id:t,value:q},a)},function(a){b.delete(t);b.invoke("rpc.promise.response",{id:t,error:a.message,errorName:a.name})})})};m.d(e,"a",function(){return h});m.d(e,"b",function(){return B});e.d=b;m.d(e,"c",function(){return I});e.h=function(a){return function(b){b.prototype.RPC_TYPE_ID=a}};e.g=function(a){return function(b){if(void 0!==a)b.prototype.RPC_TYPE_ID=a;
else if(a=b.prototype.RPC_TYPE_ID,void 0===a)throw Error("RPC_TYPE_ID should have already been defined");u.set(a,b)}};var d=m(12);p=m(13);var n=function J(a,b,c){null===a&&(a=Function.prototype);var t=Object.getOwnPropertyDescriptor(a,b);if(void 0===t){if(a=Object.getPrototypeOf(a),null!==a)return J(a,b,c)}else{if("value"in t)return t.value;b=t.get;return void 0===b?void 0:b.call(c)}},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=
!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,h){c&&a(b.prototype,c);h&&a(b,h);return b}}(),g=!("undefined"!==typeof Window&&self instanceof Window),r=new Map,C=function(a){function b(a,c){k(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));h.name=a;h.message=c;return h}c(b,a);return b}(Error);a("rpc.promise.cancel",function(a){this.get(a.id).cancellationToken.cancel()});a("rpc.promise.response",function(a){var b=a.id,c=this.get(b),
h=c.resolve;c=c.reject;this.delete(b);a.hasOwnProperty("value")?h(a.value):a.errorName===d.a.name?c(d.a):c(new C(a.errorName,a.error))});var w=g?-1:0,h=function(){function a(b){var c=this;k(this,a);this.target=b;this.objects=new Map;this.nextId=w;b.onmessage=function(a){a=a.data;r.get(a.functionName).call(c,a)}}l(a,[{key:"set",value:function(a,b){this.objects.set(a,b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",
value:function(a){var b=this.get(a.id);b.referencedGeneration=a.gen;b.addRef();return b}},{key:"invoke",value:function(a,b,c){b.functionName=a;this.target.postMessage(b,c)}},{key:"promiseInvoke",value:function(a,b,c,h){var t=this;c=void 0===c?d.e:c;return Object(d.d)(c,function(c,g,d){var q=b.id=t.newId();t.set(q,{resolve:c,reject:g});t.invoke(a,b,h);d.add(function(){t.invoke("rpc.promise.cancel",{id:q})})})}},{key:"newId",value:function(){return g?this.nextId--:this.nextId++}},{key:"numObjects",
get:function(){return this.objects.size}}]);return a}(),B=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.rpc=null;a.rpcId=null;return a}c(b,a);l(b,[{key:"initializeSharedObject",value:function(a,b){b=void 0===b?a.newId():b;this.rpc=a;this.rpcId=b;this.isOwner=!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a,b){b=void 0===b?{}:b;this.initializeSharedObject(a);this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=
!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;a.invoke("SharedObject.new",b)}},{key:"dispose",value:function(){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},{key:"refCountReachedZero",value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",
{id:this.rpcId,gen:this.referencedGeneration}):n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,c=this.rpcId;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this);a.delete(c);a.invoke("SharedObject.dispose",{id:c})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=a;0===this.refCount&&a===this.referencedGeneration&&
this.ownerDispose()}}]);return b}(p.a),I=function(a){function h(a,c){c=void 0===c?{}:c;k(this,h);var g=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));b(g,a,c);return g}c(h,a);return h}(B);a("SharedObject.dispose",function(a){a=this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});a("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});
var u=new Map;a("SharedObject.new",function(a){--(new (u.get(a.type))(this,a)).refCount})},function(p,e,m){function k(a,c){var b=Math.abs(a[c]),d=Math.abs(a[c+1]),g=Math.abs(a[c+2]),r=Math.max(b,d,g);1E-4>b/r&&(a[c]=0);1E-4>d/r&&(a[c+1]=0);1E-4>g/r&&(a[c+2]=0)}function f(b){b=b.and(a[0]);for(var c=1;c<a.length;++c)b=b.xor(b.rshift(Math.pow(2,c))).and(a[c]);return b}e.i=function(a){return a[0]*a[1]*a[2]};e.n=function(a){return a[0]+","+a[1]+","+a[2]};e.k=function(a){k(a,0);k(a,4);k(a,8)};e.l=function(a,
c,n){var b=c[0],g=c[1];c=c[2];a[0]=n[0]*b+n[4]*g+n[8]*c;a[1]=n[1]*b+n[5]*g+n[9]*c;a[2]=n[2]*b+n[6]*g+n[10]*c;return a};e.b=function(a,c){var b=c[0],l=c[1],g=c[2],r=c[4],d=c[5],w=c[6],h=c[8],B=c[9];c=c[10];a[0]=Math.sqrt(b*b+l*l+g*g);a[1]=Math.sqrt(r*r+d*d+w*w);a[2]=Math.sqrt(h*h+B*B+c*c);return a};e.a=function(a){if(a.high)throw Error("Fragment ids >= 2^32 not supported yet");var b=f(a.rshift(0)),n=f(a.rshift(1));a=f(a.rshift(2));return c.c.clone([b.low,n.low,a.low])};var c=m(32);p=m(5);m.d(e,"h",
function(){return c.a});m.d(e,"j",function(){return c.b});m.d(e,"m",function(){return c.c});m=c.a.create();e.c=m;m=[c.c.fromValues(1,0,0),c.c.fromValues(0,1,0),c.c.fromValues(0,0,1)];e.d=m;m=c.c.fromValues(0,0,0);e.g=m;m=c.c.fromValues(1,1,1);e.f=m;m=c.c.fromValues(Infinity,Infinity,Infinity);e.e=m;c.b.create();var a=[new p.a(1227133513,306783378),new p.a(3272356035,818089008),new p.a(251719695,4027515120),new p.a(4278190335,16711680),new p.a(65535,16711680),new p.a(2097151,0)]},function(p,e,m){function k(a,
b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function a(a){var b=a.downloadCancellationToken=new l.b;a.source.download(a,b).then(function(){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadSucceeded())},function(c){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadFailed(c),console.log("Error retrieving chunk "+a+": "+c))})}function b(a){return new t(new h.a(a),r.a)}function d(a,b,c,q,h,g){for(;1>b.availableItems||b.availableSize<
a;){var t=h.next().value;if(void 0===t)return!1;var r=t.priorityTier;if(r<c||r===c&&t.priority>=q)return!1;g(t)}return!0}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"Chunk",function(){return J});m.d(e,"ChunkSourceBase",function(){return v});m.d(e,"ChunkSource",function(){return A});m.d(e,"ChunkQueueManager",function(){return H});m.d(e,"ChunkManager",function(){return q});e.WithParameters=function(a,b){a=function(a){function b(a){for(var q=[],h=0;h<arguments.length;++h)q[h-0]=arguments[h];
c(this,b);var g;h=k(this,(g=b.__proto__||Object.getPrototypeOf(b)).call.apply(g,[].concat([this],$jscomp.arrayFromIterable(q))));h.parameters=q[1].parameters;return h}f(b,a);return b}(a);return a=x([Object(I.h)(b.RPC_ID)],a)};e.withChunkManager=function(a){return function(a){function b(a){for(var q=[],h=0;h<arguments.length;++h)q[h-0]=arguments[h];c(this,b);var g;h=k(this,(g=b.__proto__||Object.getPrototypeOf(b)).call.apply(g,[].concat([this],$jscomp.arrayFromIterable(q))));h.chunkManager=q[0].get(q[1].chunkManager);
return h}f(b,a);return b}(a)};var n=m(7),l=m(12);p=m(13);var g=m(56),r=m(57),C=m(31),w=m(63),h=m(64),B=m(8),I=m(0),u=function(){function a(a,b){for(var c=0;c<b.length;c++){var q=b[c];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(a,q.key,q)}}return function(b,c,q){c&&a(b.prototype,c);q&&a(b,q);return b}}(),x=this&&this.__decorate||function(a,b,c,q){var h=arguments.length,g=3>h?b:null===q?q=Object.getOwnPropertyDescriptor(b,c):q,t;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,q);else for(var r=a.length-1;0<=r;r--)if(t=a[r])g=(3>h?t(g):3<h?t(b,c,g):t(b,c))||g;return 3<h&&g&&Object.defineProperty(b,c,g),g},J=function(){function a(){c(this,a);this.key=this.source=this.prev1=this.next1=this.child1=this.prev0=this.next0=this.child0=null;this.state=n.e.NEW;this.error=null;this.newPriority=this.priority=0;this.newPriorityTier=this.priorityTier=n.d.RECENT;this.backendOnly=!1;this.downloadCancellationToken=void 0}u(a,
[{key:"initialize",value:function(a){this.key=a;this.state=n.e.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=n.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=n.d.RECENT;this.error=null}},{key:"updatePriorityProperties",value:function(){this.priorityTier=this.newPriorityTier;this.priority=this.newPriority;this.newPriorityTier=n.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},{key:"dispose",value:function(){this.error=this.source=null}},{key:"downloadFailed",
value:function(a){this.error=a;this.queueManager.updateChunkState(this,n.e.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,n.e.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;a.source=this.source.rpcId;a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},{key:"queueManager",get:function(){return this.source.chunkManager.queueManager}}],
[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return a}(),v=function(a){function b(a){c(this,b);var q=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));q.chunkManager=a;q.chunks=new Map;q.freeChunks=[];return q}f(b,a);u(b,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,c=b.length;if(0<c)return a=b[c-1],b.length=c-1,a.source=this,a;b=new a;b.source=this;return b}},{key:"addChunk",
value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,c=this.freeChunks;b.delete(a.key);a.dispose();c[c.length]=a;0===b.size&&this.dispose()}}]);return b}(I.b),A=function(a){function b(a,q){c(this,b);var h=a.get(q.chunkManager);h=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,h));Object(I.d)(h,a,q);return h}f(b,a);return b}(v),t=function(){function a(b,q){c(this,a);this.heapOperations=b;this.linkedListOperations=
q;this.heapRoots=[null,null];this.recentHead=new J;q.initializeHead(this.recentHead)}u(a,[{key:"add",value:function(a){var b=a.priorityTier;if(b===n.d.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var c=this.heapRoots;c[b]=this.heapOperations.meld(c[b],a)}}},{key:"candidates",value:function(){function a(a,G){for(;;)switch(b){case 0:if(I.heapOperations.compare!==J.priorityLess){b=1;break}e=I;k=e.linkedListOperations;f=e.recentHead;case 3:z=k.back(f);if(null!=z){b=5;break}b=4;
break;case 5:return b=7,{value:z,done:!1};case 7:if(void 0===G){b=8;break}b=-1;throw G;case 8:case 6:b=3;break;case 4:B=I,C=B.heapRoots,w=n.d.LAST_ORDERED_TIER;case 9:if(!(w>=n.d.FIRST_ORDERED_TIER)){b=11;break}case 12:d=C[w];if(null!=d){b=14;break}b=13;break;case 14:return b=16,{value:d,done:!1};case 16:if(void 0===G){b=17;break}b=-1;throw G;case 17:case 15:b=12;break;case 13:case 10:--w;b=9;break;case 11:b=2;break;case 1:l=I.heapRoots,r=n.d.FIRST_ORDERED_TIER;case 18:if(!(r<=n.d.LAST_ORDERED_TIER)){b=
20;break}case 21:t=l[r];if(null!=t){b=23;break}b=22;break;case 23:return b=25,{value:t,done:!1};case 25:if(void 0===G){b=26;break}b=-1;throw G;case 26:case 24:b=21;break;case 22:case 19:++r;b=18;break;case 20:g=I,h=g.linkedListOperations,q=g.recentHead;case 27:c=h.front(q);if(null!=c){b=29;break}b=28;break;case 29:return b=31,{value:c,done:!1};case 31:if(void 0===G){b=32;break}b=-1;throw G;case 32:case 30:b=27;break;case 28:case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,q,h,g,t,r,l,d,
w,C,B,z,f,k,e,I=this,G={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();G[Symbol.iterator]=function(){return this};return G}},{key:"delete",value:function(a){var b=a.priorityTier;if(b===n.d.RECENT)this.linkedListOperations.pop(a);else{var c=this.heapRoots;c[b]=this.heapOperations.remove(c[b],a)}}}]);return a}(),z=function(a){function b(a,q){c(this,b);var h=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
h.itemLimit=a;h.sizeLimit=q;h.currentSize=0;h.currentItems=0;h.capacityChanged=new B.a;h.registerDisposer(a.changed.add(h.capacityChanged.dispatch));h.registerDisposer(q.changed.add(h.capacityChanged.dispatch));return h}f(b,a);u(b,[{key:"adjust",value:function(a,b){this.currentItems-=a;this.currentSize-=b}},{key:"availableSize",get:function(){return this.sizeLimit.value-this.currentSize}},{key:"availableItems",get:function(){return this.itemLimit.value-this.currentItems}}]);return b}(p.a),H=function(q){function h(a,
q){c(this,h);var r=k(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a,q));r.queuedPromotionQueue=b(J.priorityGreater);r.downloadEvictionQueue=b(J.priorityLess);r.systemMemoryEvictionQueue=new t(new w.a(J.priorityLess),g.a);r.gpuMemoryPromotionQueue=b(J.priorityGreater);r.gpuMemoryEvictionQueue=b(J.priorityLess);r.updatePending=null;r.numQueued=0;r.numFailed=0;var l=function(b){b=r.registerDisposer(new z(a.get(b.itemLimit),a.get(b.sizeLimit)));b.capacityChanged.add(function(){return r.scheduleUpdate()});
return b};r.gpuMemoryCapacity=l(q.gpuMemoryCapacity);r.systemMemoryCapacity=l(q.systemMemoryCapacity);r.downloadCapacity=l(q.downloadCapacity);return r}f(h,q);u(h,[{key:"scheduleUpdate",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(b,r){for(;;)switch(c){case 0:h=!1;q=a.state;if(!h&&q!==n.e.QUEUED){c=2;break}h=!0;c=3;return{value:g.queuedPromotionQueue,done:!1};case 3:if(void 0===r){c=
4;break}c=-1;throw r;case 4:c=1;break;case 2:if(!h&&q!==n.e.DOWNLOADING){c=5;break}h=!0;c=6;return{value:g.downloadEvictionQueue,done:!1};case 6:if(void 0===r){c=7;break}c=-1;throw r;case 7:return c=8,{value:g.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===r){c=9;break}c=-1;throw r;case 9:c=1;break;case 5:if(h||q===n.e.SYSTEM_MEMORY_WORKER)h=!0;if(!h&&q!==n.e.SYSTEM_MEMORY){c=10;break}h=!0;c=11;return{value:g.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===r){c=12;break}c=-1;throw r;
case 12:if(a.priorityTier===n.d.RECENT||a.backendOnly){c=13;break}c=14;return{value:g.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===r){c=15;break}c=-1;throw r;case 15:case 13:c=1;break;case 10:if(!h&&q!==n.e.GPU_MEMORY){c=16;break}h=!0;c=17;return{value:g.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===r){c=18;break}c=-1;throw r;case 18:return c=19,{value:g.gpuMemoryEvictionQueue,done:!1};case 19:if(void 0===r){c=20;break}c=-1;throw r;case 20:c=1;break;case 16:case 1:c=-1;default:return{value:void 0,
done:!0}}}var c=0,q,h,g=this,r={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();r[Symbol.iterator]=function(){return this};return r}},{key:"adjustCapacitiesForChunk",value:function(a,b){b=b?-1:1;switch(a.state){case n.e.FAILED:this.numFailed-=b;break;case n.e.QUEUED:this.numQueued-=b;break;case n.e.DOWNLOADING:this.downloadCapacity.adjust(b,0);this.systemMemoryCapacity.adjust(b,0);break;
case n.e.SYSTEM_MEMORY:case n.e.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes);break;case n.e.GPU_MEMORY:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes),this.gpuMemoryCapacity.adjust(b,b*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),c=b.next();!c.done;c=b.next())c.value.delete(a)}},{key:"addChunkToQueues_",value:function(a){if(a.state===n.e.QUEUED&&a.priorityTier===n.d.RECENT)return a.source.removeChunk(a),
this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),c=b.next();!c.done;c=b.next())c.value.add(a);return!0}},{key:"performChunkPriorityUpdate",value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=n.d.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),a.updatePriorityProperties(),a.state===n.e.NEW&&(a.state=n.e.QUEUED,this.adjustCapacitiesForChunk(a,!0)),this.addChunkToQueues_(a))}},
{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,!0),this.addChunkToQueues_(a),this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(a){b.freeChunkGPUMemory(a);a.source.chunkManager.queueManager.updateChunkState(a,n.e.SYSTEM_MEMORY)}for(var b=this,c=this.gpuMemoryPromotionQueue.candidates(),q=this.gpuMemoryEvictionQueue.candidates(),h=this.gpuMemoryCapacity;;){var g=
c.next().value;if(void 0===g)break;else{if(!d(g.gpuMemoryBytes,h,g.priorityTier,g.priority,q,a))break;this.copyChunkToGPU(g);this.updateChunkState(g,n.e.GPU_MEMORY)}}}},{key:"freeChunkGPUMemory",value:function(a){this.rpc.invoke("Chunk.update",{id:a.key,state:n.e.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",value:function(a){a.state===n.e.SYSTEM_MEMORY_WORKER?a.freeSystemMemory():this.rpc.invoke("Chunk.update",{id:a.key,state:n.e.EXPIRED,source:a.source.rpcId})}},{key:"copyChunkToGPU",
value:function(a){var b=this.rpc;if(a.state===n.e.SYSTEM_MEMORY)b.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:n.e.GPU_MEMORY});else{var c={},q=[];a.serialize(c,q);c.state=n.e.GPU_MEMORY;b.invoke("Chunk.update",c,q)}}},{key:"processQueuePromotions_",value:function(){for(var b=this,c=this,q=function(a){switch(a.state){case n.e.DOWNLOADING:var q=a.downloadCancellationToken;a.downloadCancellationToken=void 0;q.cancel();break;case n.e.GPU_MEMORY:c.freeChunkGPUMemory(a);case n.e.SYSTEM_MEMORY_WORKER:case n.e.SYSTEM_MEMORY:c.freeChunkSystemMemory(a)}b.updateChunkState(a,
n.e.QUEUED)},h=this.queuedPromotionQueue.candidates(),g=this.downloadEvictionQueue.candidates(),r=this.systemMemoryEvictionQueue.candidates(),t=this.downloadCapacity,l=this.systemMemoryCapacity;;){var w=h.next();if(w.done)break;w=w.value;var C=w.priorityTier,B=w.priority;if(!d(0,t,C,B,g,q))break;if(!d(0,l,C,B,r,q))break;this.updateChunkState(w,n.e.DOWNLOADING);a(w)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),
this.logStatistics())}},{key:"logStatistics",value:function(){}},{key:"invalidateSourceCache",value:function(a){for(var b=$jscomp.makeIterator(a.chunks.values()),c=b.next();!c.done;c=b.next()){c=c.value;switch(c.state){case n.e.DOWNLOADING:var q=c.downloadCancellationToken;c.downloadCancellationToken=void 0;q.cancel();break;case n.e.SYSTEM_MEMORY_WORKER:c.freeSystemMemory()}this.updateChunkState(c,n.e.QUEUED)}this.rpc.invoke("Chunk.update",{source:a.rpcId});this.scheduleUpdate()}}]);return h}(I.c);
H=x([Object(I.g)(n.b)],H);var q=function(a){function b(a,q){c(this,b);var h=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,q));h.existingTierChunks=[];h.newTierChunks=[];h.updatePending=null;h.recomputeChunkPriorities=new B.a;h.recomputeChunkPrioritiesLate=new B.a;h.memoize=new C.a;h.queueManager=a.get(q.chunkQueueManager).addRef();for(a=n.d.FIRST_TIER;a<=n.d.LAST_TIER;++a)a!==n.d.RECENT&&(h.existingTierChunks[a]=[]);return h}f(b,a);u(b,[{key:"scheduleUpdateChunkPriorities",value:function(){null===
this.updatePending&&(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.recomputeChunkPrioritiesLate.dispatch();this.updateQueueState([n.d.VISIBLE])}},{key:"requestChunk",value:function(a,b,c){a.newPriorityTier===n.d.RECENT&&this.newTierChunks.push(a);var q=a.newPriorityTier;if(b<q||b===q&&c>a.newPriority)a.newPriorityTier=b,a.newPriority=c}},{key:"updateQueueState",
value:function(a){var b=this.existingTierChunks,c=this.queueManager;a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;q=a.next()){var h=b[q.value],g=$jscomp.makeIterator(h);for(q=g.next();!q.done;q=g.next())q=q.value,q.newPriorityTier===n.d.RECENT&&c.performChunkPriorityUpdate(q);h.length=0}a=this.newTierChunks;h=$jscomp.makeIterator(a);for(q=h.next();!q.done;q=h.next())q=q.value,c.performChunkPriorityUpdate(q),b[q.priorityTier].push(q);a.length=0;this.queueManager.scheduleUpdate()}}]);return b}(I.c);
q=x([Object(I.g)(n.a)],q);Object(I.f)(n.c,function(a){a=this.get(a.id);a.chunkManager.queueManager.invalidateSourceCache(a)})},function(p,e,m){function k(a){a:{var b=typeof a;if("number"===b||"string"===b)if(b=parseFloat(""+a),!Number.isNaN(b)){a=b;break a}throw Error("Expected floating-point number, but received: "+JSON.stringify(a)+".");}if(Number.isFinite(a))return a;throw Error("Expected finite floating-point number, but received: "+a+".");}function f(a){a=k(a);if(0<a)return a;throw Error("Expected positive finite floating-point number, but received: "+
a+".");}function c(a){if("object"===typeof a){if(null===a)return"null";if(Array.isArray(a)){var b="[",g=a.length,h=0;if(h<g)for(b+=c(a[h]);++h<g;)b+=",",b+=c(a[h]);return b+"]"}b="{";g=Object.keys(a).sort();h=0;var r=g.length;if(h<r){var l=g[h];b+=JSON.stringify(l);for(b=b+":"+c(a[l]);++h<r;)b+=",",l=g[h],b+=JSON.stringify(l),b+=":",b+=c(a[l])}return b+"}"}return JSON.stringify(a)}function a(a){for(var b="";0<a.length;){var c=a.match(l);if(null===c){var h=a;c=a=""}else{h=a.substr(0,c.index);a=a.substr(c.index+
c[0].length);var r=c[1];if(void 0!==r){if(c=r,2<=c.length&&"'"===c.charAt(0)&&"'"===c.charAt(c.length-1)){c=c.substr(1,c.length-2);for(r='"';0<c.length;){var d=c.match(g);if(null===d){r+=c;break}r+=d[1];'"'===d[2]?(r+="\\",r+='"'):r+="'";c=c.substr(d.index+d[0].length)}c=r+'"'}}else c=c[2]}b+=h.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,"$1");b+=c}return b}function b(a,b,c){var h=a.length;if(!Array.isArray(b)||b.length!==h)throw Error("Expected length "+
h+" array, but received: "+JSON.stringify(b)+".");for(var g=0;g<h;++g)a[g]=c(b[g],g);return a}function d(a){if("string"!==typeof a)throw Error("Expected string, but received: "+JSON.stringify(a)+".");return a}e.b=function(a,b){var c=a.length;if(!Array.isArray(b)||b.length!==c)throw Error("Incompatible sizes");for(var h=0;h<c;++h)if(!Number.isFinite(parseFloat(b[h])))throw Error("Non-finite value.");for(h=0;h<c;++h)a[h]=parseFloat(b[h]);return a};e.e=c;e.d=function(b){return JSON.parse(a(b))};e.a=
function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+JSON.stringify(a)+".");return a.map(b)};e.c=b;e.i=function(a){if("object"!==typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a};e.l=d;e.k=function(a){if(void 0!==a)return d(a)};e.j=function(a,b,c){a=a.hasOwnProperty(b)?a[b]:void 0;try{return c(a)}catch(h){throw Error("Error parsing "+JSON.stringify(b)+" property: "+h.message);}};e.h=function(a,b){if("string"===
typeof a&&null!==a.match(/^[a-zA-Z]/)&&(a=a.toUpperCase(),b.hasOwnProperty(a)))return b[a];throw Error("Invalid enum value: "+JSON.stringify(a)+".");};e.g=function(a){return b(n.m.create(),a,k)};e.f=function(a){return b(n.m.create(),a,f)};e.m=function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),c=b.next();!c.done;c=b.next())if(c=c.value,"string"!==typeof c)throw Error("Expected string, received: "+JSON.stringify(c)+".");
return a};var n=m(1),l=new RegExp(/('(?:[^'\\]|(?:\\.))*')/.source+"|"+/("(?:[^'\\]|(?:\\.))*")/.source),g=/^((?:[^"'\\]|(?:\\[^']))*)("|\\')/},function(p,e,m){m.d(e,"a",function(){return k});e.b=1E-6;var k="undefined"!==typeof Float32Array?Float32Array:Array;e.c=Math.random},function(p,e,m){m.d(e,"a",function(){return n});var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,
g)}}return function(b,c,l){c&&a(b.prototype,c);l&&a(b,l);return b}}(),f=new Uint32Array(2),c=[];for(p=2;36>=p;++p){e=Math.floor(32/Math.log2(p));m=Math.pow(p,e);var a=Math.floor(e/2),b=Math.pow(p,a);a=Math.pow(p,e-a);var d="^[0-"+String.fromCharCode(48+Math.min(9,p-1));10<p&&(d+="a-"+String.fromCharCode(97+p-11),d+="A-"+String.fromCharCode(65+p-11));d+="]{1,"+Math.ceil(64/Math.log2(p))+"}$";c[p]={lowDigits:e,lowBase:m,lowBase1:b,lowBase2:a,pattern:new RegExp(d)}}var n=function(){function a(b,c){b=
void 0===b?0:b;c=void 0===c?0:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.low=b;this.high=c}k(a,[{key:"clone",value:function(){return new a(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=a.high}},{key:"toString",value:function(a){a=void 0===a?10:a;var b=this.low,g=this.high;if(0===g)return b.toString(a);g*=4294967296;var d=c[a],h=d.lowBase;d=d.lowDigits;var l=g%h;g=Math.floor(g/h);b+=l;g+=Math.floor(b/h);b=(b%h).toString(a);
return g.toString(a)+"0".repeat(d-b.length)+b}},{key:"tryParseString",value:function(a,b){b=void 0===b?10:b;var g=c[b],d=g.lowDigits,h=g.lowBase,l=g.lowBase1,r=g.lowBase2;if(!g.pattern.test(a))return!1;if(a.length<=d)return this.low=parseInt(a,b),this.high=0,!0;d=a.length-d;g=parseInt(a.substr(d),b);a=parseInt(a.substr(0,d),b);h=Math.floor(a*h/4294967296);l=g+a%4294967296*l%4294967296*r%4294967296;4294967296<=l&&(++h,l-=4294967296);if(l>>>0!==l||h>>>0!==h)return!1;this.low=l;this.high=h;return!0}},
{key:"parseString",value:function(a,b){if(!this.tryParseString(a,void 0===b?10:b))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},{key:"toJSON",value:function(){return this.toString()}},{key:"lshift",value:function(b){b&=63;if(0==b)return this.clone();var c=this.low,g=this.high;return 32>b?new a(c<<b,g<<b|c>>>32-b):new a(0,c<<b-32)}},{key:"rshift",value:function(b){b&=
63;if(0==b)return this.clone();var c=this.low,g=this.high;return 32>b?new a(c>>>b|g<<32-b,g>>b):new a(g>>b-32,0<=g?0:-1)}},{key:"or",value:function(b){return new a(this.low|b.low,this.high|b.high)}},{key:"xor",value:function(b){return new a(this.low^b.low,this.high^b.high)}},{key:"and",value:function(b){return new a(this.low&b.low,this.high&b.high)}}],[{key:"less",value:function(a,b){return a.high<b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-b.high||a.low-
b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(b,c){return a.less(b,c)?b:c}},{key:"random",value:function(){crypto.getRandomValues(f);return new a(f[0],f[1])}},{key:"parseString",value:function(b,c){c=void 0===c?10:c;return(new a).parseString(b,c)}}]);return a}();n.ZERO=new n(0,0)},function(p,e,m){p="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;e.assign=function(c){for(var a=Array.prototype.slice.call(arguments,
1);a.length;){var b=a.shift();if(b){if("object"!==typeof b)throw new TypeError(b+"must be non-object");for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d])}}return c};e.shrinkBuf=function(c,a){if(c.length===a)return c;if(c.subarray)return c.subarray(0,a);c.length=a;return c};var k={arraySet:function(c,a,b,d,n){if(a.subarray&&c.subarray)c.set(a.subarray(b,b+d),n);else for(var l=0;l<d;l++)c[n+l]=a[b+l]},flattenChunks:function(c){var a,b;var d=b=0;for(a=c.length;d<a;d++)b+=c[d].length;
var n=new Uint8Array(b);d=b=0;for(a=c.length;d<a;d++){var l=c[d];n.set(l,b);b+=l.length}return n}},f={arraySet:function(c,a,b,d,n){for(var l=0;l<d;l++)c[n+l]=a[b+l]},flattenChunks:function(c){return[].concat.apply([],c)}};e.setTyped=function(c){c?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,k)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,f))};e.setTyped(p)},function(p,e,m){m.d(e,"e",function(){return k});m.d(e,"d",function(){return f});var k;(function(c){c[c.GPU_MEMORY=
0]="GPU_MEMORY";c[c.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";c[c.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";c[c.DOWNLOADING=3]="DOWNLOADING";c[c.QUEUED=4]="QUEUED";c[c.NEW=5]="NEW";c[c.FAILED=6]="FAILED";c[c.EXPIRED=7]="EXPIRED"})(k||(k={}));var f;(function(c){c[c.FIRST_TIER=0]="FIRST_TIER";c[c.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";c[c.VISIBLE=0]="VISIBLE";c[c.PREFETCH=1]="PREFETCH";c[c.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";c[c.RECENT=2]="RECENT";c[c.LAST_TIER=2]="LAST_TIER"})(f||(f={}));e.f=
1E13;e.b="ChunkQueueManager";e.a="ChunkManager";e.c="ChunkSource.invalidate"},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}m.d(e,"b",function(){return a});m.d(e,"a",function(){return b});var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,g){c&&a(b.prototype,c);g&&a(b,g);return b}}(),a=function(){function a(){f(this,a);this.handlers=new Set;this.count=0;var b=this;this.dispatch=function(){var a=this,c=arguments;++b.count;b.handlers.forEach(function(b){b.apply(a,c)})}}
c(a,[{key:"add",value:function(a){var b=this;this.handlers.add(a);return function(){return b.remove(a)}}},{key:"remove",value:function(a){return this.handlers.delete(a)}},{key:"dispose",value:function(){this.handlers=void 0}}]);return a}(),b=function(a){function b(){f(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(b,
a);return b}(a)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b,c){for(var q=0;3>q;++q)a[q]=Number.POSITIVE_INFINITY,
b[q]=Number.NEGATIVE_INFINITY;c=$jscomp.makeIterator(c);for(q=c.next();!q.done;q=c.next()){var h=q.value.spec;q=h.lowerChunkBound;h=h.upperChunkBound;for(var g=0;3>g;++g)a[g]=Math.min(a[g],q[g]),b[g]=Math.max(b[g],h[g])}}function a(a,b,c,q){for(var h=u.FULLY_INSIDE,g=0;3>g;++g){var t=a[g];var d=b[g],l=c[g],r=q[g];t=t>=r||d<=l?u.FULLY_OUTSIDE:t>=l&&d<=r?u.FULLY_INSIDE:u.PARTIALLY_INSIDE;switch(t){case u.FULLY_OUTSIDE:return t;case u.PARTIALLY_INSIDE:h=t}}return h}function b(a){var b=a.transform,c=
a.transformedSources,q=b.changed.count;q!==a.transformedSourcesGeneration&&(a.transformedSourcesGeneration=q,c=h.h.equals(b.transform,h.c)?a.sources.map(function(a){return a.map(function(a){return{source:a,chunkLayout:a.spec.chunkLayout}})}):a.sources.map(function(a){return a.map(function(a){var c=a.spec.chunkLayout;return{chunkLayout:g.a.get(c.size,l(c.transform,b)),source:a}})}),a.transformedSources=c);return c}function d(a,b){var c=b.length,q=0;if(1<c)for(var h=0,g=0;g<c;++g){var t=b[g].chunkLayout;
var d=t.size;t=t.globalToLocalSpatialVector(I,a);for(var l=0,r=0,w=1,n=0;3>n;++n){var C=d[n];w*=C;C*=t[n];l=Math.min(l,C);r=Math.max(r,C)}d=w/(r-l);d>h&&(h=d,q=g)}return b[q]}function n(a){var b=a.voxelSize,c=void 0===a.lowerVoxelBound?h.g:a.lowerVoxelBound,q=a.upperVoxelBound,g=void 0===a.maxVoxelsPerChunkLog2?18:a.maxVoxelsPerChunkLog2;a=void 0===a.transform?h.c:a.transform;a=Object(h.b)(h.m.create(),a);b=h.m.multiply(a,a,b);a=h.m.fromValues(1,1,1);if(void 0===q)var d=h.e;else{d=h.m.create();for(var t=
0;3>t;++t)d[t]=Math.pow(2,Math.floor(Math.log2(q[t]-c[t])))}for(c=0;c<g;++c){q=Infinity;t=-1;for(var l=0;3>l;++l)if(!(a[l]>=d[l])){var r=a[l]*b[l];r<q&&(q=r,t=l)}q=t;if(-1===q)break;a[q]*=2}return a}function l(a,b){b=b.transform;return void 0===b?void 0===a?h.c:a:void 0===a?b:h.h.multiply(h.h.create(),b,a)}m.d(e,"h",function(){return J});e.l=n;e.k=l;e.j=function(a){if(void 0!==a.chunkDataSizes)return a.chunkDataSizes;var b=void 0===a.chunkLayoutPreference?v.ISOTROPIC:a.chunkLayoutPreference;switch(b){case v.ISOTROPIC:return[n(a)];
case v.FLAT:b=[];for(var c=0;3>c;++c){var q=c;var g=a.lowerVoxelBound;var d=a.upperVoxelBound,l=c,t=a.voxelSize,r=a.maxVoxelsPerChunkLog2,w=a.transform;h.m.subtract(I,void 0===d?h.e:d,void 0===g?h.g:g);I[l]=1;g=n({voxelSize:t,upperVoxelBound:I,maxVoxelsPerChunkLog2:r,transform:w});b[q]=g}b.push(n(a));return b}throw Error("Invalid chunk layout preference: "+b+".");};m.d(e,"i",function(){return A});var g=m(66),r=m(20),C=m(67),w=m(14),h=m(1);p=m(0);m.d(e,"a",function(){return w.b});var B=function(){function a(a,
b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,q){c&&a(b.prototype,c);q&&a(b,q);return b}}(),I=h.m.create(),u;(function(a){a[a.FULLY_OUTSIDE=0]="FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(u||(u={}));var x=[h.m.create(),h.m.create(),h.m.create(),h.m.create()],J=function(g){function l(){k(this,l);var a=(l.__proto__||Object.getPrototypeOf(l)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=h.h.create();a.viewportAxes=[h.m.create(),h.m.create(),h.m.create()];a.previousViewportAxes=[h.m.create(),h.m.create()];a.centerDataPosition=h.m.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;
a.pixelSize=0;h.h.identity(a.viewportToData);return a}f(l,g);B(l,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},{key:"onHasValidViewport",value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=
b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&h.h.equals(this.viewportToData,a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;h.h.copy(b,a);Object(h.k)(b);h.m.transformMat4(this.centerDataPosition,h.g,a);a=0;for(var c=this.viewportAxes,g=this.previousViewportAxes,d=0;3>d;++d){var l=c[d];Object(h.l)(l,h.d[d],b);0===d&&(a=h.m.length(l));h.m.normalize(l,l)}this.viewportAxes=c;this.previousViewportAxes=g;if(!Object(C.a)(a,
this.pixelSize)||.95>h.m.dot(c[0],g[0])||.95>h.m.dot(c[1],g[1]))h.m.copy(g[0],c[0]),h.m.copy(g[1],c[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=h.m.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();return!0}},{key:"onViewportToDataMatrixChanged",value:function(){}},{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,
c=this.visibleChunkLayouts,h=this.viewportAxes[2],g=this.visibleLayers;c.clear();var l={};g=$jscomp.makeIterator(g);for(var t=g.next();!t.done;l={smallestVoxelSize:l.smallestVoxelSize,visibleSources:l.visibleSources},t=g.next()){t=$jscomp.makeIterator(t.value);var r=t.next().value;l.visibleSources=t.next().value;l.visibleSources.length=0;t=b(r);var w=t.length;r=void 0;l.smallestVoxelSize=t[0][0].source.spec.voxelSize;var n=function(b){return function(c){for(var q=0;3>q;++q){var h=c[q];if(h>a&&h>b.smallestVoxelSize[q])return!0}return!1}}(l),
C=function(a){return function(b,q){var h=b.source,g=b.chunkLayout;a.visibleSources[a.visibleSources.length++]=b;b=c.get(g);void 0===b&&(b=new Map,c.set(g,b));b.set(h,q)}}(l);for(r=w-1;;){w=d(h,t[r]);C(w,r);if(0===r||!n(w.source.spec.voxelSize))break;--r}l.visibleSources.reverse()}}}},{key:"computeVisibleChunks",value:function(b,q){var g=this;this.updateVisibleSources();for(var l=this.width,d=this.height,t=this.viewportToData,w=0;3>w;++w)x[0][w]=-h.d[0][w]*l/2-h.d[1][w]*d/2,x[1][w]=-h.d[0][w]*l/2+
h.d[1][w]*d/2,x[2][w]=h.d[0][w]*l/2-h.d[1][w]*d/2,x[3][w]=h.d[0][w]*l/2+h.d[1][w]*d/2;for(l=0;4>l;++l)h.m.transformMat4(x[l],x[l],t);var n=h.m.create(),C=h.m.create(),B=h.m.create(),f=h.m.create(),z=h.m.create(),k=h.m.create(),e=[],m=[];this.visibleChunkLayouts.forEach(function(l,d){function t(){for(var a=0,b=0,c=0;3>c;++c){var q=k[c],h=n[c],g=C[c]-h,l=z[c]*g;a+=q*(h+l);b+=q*(h+g-l)}return a<v?!1:b<=v}function w(b){function c(){H=Object(r.b)(e,0,k,function(b){var c=b.spec;switch(a(n,C,c.lowerChunkBound,
c.upperChunkBound)){case u.PARTIALLY_INSIDE:return!0;case u.FULLY_INSIDE:m.push(b);default:return!1}})}if(0!==m.length||0!==H){for(var h=1,g=0;3>g;++g)h*=Math.max(0,C[g]-n[g]);if(0!==h&&t())if(1===h)q(d,G,n,m);else{for(var l;;)if(h=n[b],g=C[b],l=g-h,1===l)b=(b+1)%3;else break;l=h+Math.floor(.5*l);var B=(b+1)%3,f=m.length;C[b]=l;var k=H;c();w(B);m.length=f;H=k;C[b]=g;n[b]=l;c();w(B);n[b]=h;m.length=f;H=k}}}var G=b(d);c(B,f,l.keys());h.m.set(n,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);
h.m.set(C,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);d.globalToLocalSpatialVector(k,g.viewportAxes[2]);for(var y=0;3>y;++y)z[y]=0<k[y]?1:0;var v=h.m.dot(d.globalToLocalGrid(I,g.centerDataPosition),k);for(y=0;4>y;++y)for(var L=d.globalToLocalGrid(I,x[y]),A=0;3>A;++A)n[A]=Math.min(n[A],Math.floor(L[A])),C[A]=Math.max(C[A],Math.floor(L[A])+1);h.m.max(n,n,B);h.m.min(C,C,f);m.length=0;e.length=0;l=$jscomp.makeIterator(l.keys());for(y=l.next();!y.done;y=l.next())switch(y=
y.value,L=y.spec,a(n,C,L.lowerChunkBound,L.upperChunkBound)){case u.FULLY_INSIDE:m.push(y);break;case u.PARTIALLY_INSIDE:e.push(y)}var H=e.length;w(0)})}}]);return l}(p.b),v;(function(a){a[a.ISOTROPIC=0]="ISOTROPIC";a[a.FLAT=1]="FLAT"})(v||(v={}));var A=function(){function a(b){k(this,a);var c=b.chunkSize,q=b.transform,l=void 0===b.lowerChunkBound?h.g:b.lowerChunkBound,d=b.upperChunkBound;this.voxelSize=b.voxelSize;this.chunkLayout=g.a.get(c,q);this.lowerChunkBound=l;this.upperChunkBound=d}B(a,[{key:"toObject",
value:function(){return{transform:this.chunkLayout.transform,chunkSize:this.chunkLayout.size,voxelSize:this.voxelSize,lowerChunkBound:this.lowerChunkBound,upperChunkBound:this.upperChunkBound}}}]);return a}();e.f="SliceView";e.d="sliceview/RenderLayer";e.b="SliceView.addVisibleLayer";e.c="SliceView.removeVisibleLayer";e.g="SliceView.updateView";e.e="SliceView.updateTransform"},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.c=function(a){return function(a){function b(a){for(var c=[],g=0;g<arguments.length;++g)c[g-0]=arguments[g];if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var d,n=k(this,(d=b.__proto__||Object.getPrototypeOf(b)).call.apply(d,[].concat([this],$jscomp.arrayFromIterable(c))));n.visibility=c[0].get(c[1].visibility);n.registerDisposer(n.visibility.changed.add(function(){return n.chunkManager.scheduleUpdateChunkPriorities()}));return n}f(b,a);return b}(a)};e.b=function(a){return a===Number.POSITIVE_INFINITY?c.d.VISIBLE:c.d.PREFETCH};e.a=function(a){return a===Number.POSITIVE_INFINITY?0:a*c.f};m(68);
var c=m(7)},function(p,e,m){m.d(e,"b",function(){return k});e.c=function(c,a,b){b=void 0===b?f:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=2){var d=c[a];c[a]=c[a+1];c[a+1]=d}};e.d=function(c,a,b){b=void 0===b?f:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=4){var d=c[a];c[a]=c[a+3];c[a+3]=d;d=c[a+1];c[a+1]=c[a+2];c[a+2]=d}};var k;(function(c){c[c.LITTLE=0]="LITTLE";c[c.BIG=1]="BIG"})(k||(k={}));var f=function(){var c=
Uint16Array.of(4386);return 17===(new Uint8Array(c.buffer))[0]?k.BIG:k.LITTLE}();e.a=f},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}m.d(e,"b",function(){return d});m.d(e,"c",function(){return n});e.d=function(a,c){return new Promise(function(g,l){if(a===b)c(g,l,b);else{var r=new d,h=a.add(function(){r.cancel()});c(function(a){h();g(a)},function(a){h();l(a)},r)}})};var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(b,c,l){c&&a(b.prototype,c);l&&a(b,l);return b}}();p=new (function(){function a(){f(this,
a);this.name="CancellationError";this.message="CANCELED"}c(a,[{key:"toString",value:function(){return"CANCELED"}}]);return a}());e.a=p;var a=function(){},b={isCanceled:!1,add:function(){return a},remove:a};e.e=b;var d=function(){function b(){f(this,b)}c(b,[{key:"cancel",value:function(){var a=this.handlers;if(null!==a&&(this.handlers=null,void 0!==a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b()}}},{key:"add",value:function(b){var c=this,g=this.handlers;if(null===
g)return b(),a;void 0===g&&(g=this.handlers=new Set);g.add(b);return function(){c.remove(b)}}},{key:"remove",value:function(a){var b=this.handlers;null!=b&&b.delete(a)}},{key:"isCanceled",get:function(){return null===this.handlers}}]);return b}(),n=function(a){function g(){f(this,g);var a=(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:
a;a.consumers=new Set;return a}k(g,a);c(g,[{key:"addConsumer",value:function(a){var c=this;a=void 0===a?b:a;var g=this.consumers;g.has(a)||a.isCanceled||(g.add(a),a.add(function(){g.delete(a);0===g.size&&c.cancel()}))}}]);return g}(d)},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b,c,d){a.addEventListener(b,c,d);return function(){return a.removeEventListener(b,c,d)}}m.d(e,"a",function(){return b});m.d(e,"b",function(){return d});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,
g)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(){f(this,b);this.refCount=1}a(b,[{key:"addRef",value:function(){++this.refCount;return this}},{key:"dispose",value:function(){0===--this.refCount&&this.refCountReachedZero()}},{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var c=a[b-1];"object"===typeof c?c.dispose():c.call(this)}this.disposers=void 0}this.wasDisposed=!0}},{key:"disposed",
value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);return a}},{key:"unregisterDisposer",value:function(a){var b=this.disposers;if(null!=b){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}return a}},{key:"registerEventListener",value:function(a,b,d,n){this.registerDisposer(c(a,b,d,n))}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});return a}}]);return b}(),d=function(a){function b(a){f(this,b);
var c=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.value=a;return c}k(b,a);return b}(b)},function(p,e,m){m.d(e,"b",function(){return k});var k;(function(f){f[f.UINT8=0]="UINT8";f[f.UINT16=1]="UINT16";f[f.UINT32=2]="UINT32";f[f.UINT64=3]="UINT64";f[f.FLOAT32=4]="FLOAT32"})(k||(k={}));p=[];e.a=p;p[k.UINT8]=1;p[k.UINT16]=2;p[k.UINT32]=4;p[k.UINT64]=
8;p[k.FLOAT32]=4},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return n});e.b=function(a,c){c=void 0===c?"GET":c;var g=new XMLHttpRequest;g[d]=c;g[b]=a;g.open(c,a);return g};e.c=function(a,g,r){r=
void 0===r?"GET":r;var l=new XMLHttpRequest;if(Array.isArray(a)){var w=a.length;w=1===w?0:Math.abs(Object(c.a)(g))%w;a=a[w]+g}else a+=g;l[d]=r;l[b]=a;l.open(r,a);return l};e.e=function(a,b,c){c=void 0===c?f.e:c;a.responseType=b;return new Promise(function(b,d){var h=function(){a.abort()};c.add(h);a.onloadend=function(){var g=this.status;c.remove(h);200<=g&&300>g?b(this.response):d(n.fromXhr(a))};a.send()})};e.d=function(a,b,c,d){d=void 0===d?f.e:d;a.responseType=c;a.setRequestHeader("Content-Type",
"application/json");return new Promise(function(c,h){var g=function(){a.abort()};d.add(g);a.onloadend=function(){var b=this.status;d.remove(g);200<=b&&300>b?c(this.response):h(n.fromXhr(a))};a.send(JSON.stringify(b))})};var f=m(12),c=m(87),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();
var b=Symbol("url");$jscomp.initSymbol();var d=Symbol("method"),n=function(c){function g(a,b,c,h){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var d=a+" "+JSON.stringify(b)+" resulted in HTTP error "+c;h&&(d+=": "+h);d+=".";var l=(g.__proto__||Object.getPrototypeOf(g)).call(this,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l.name="HttpError";l.message=d;
l.method=a;l.url=b;l.code=c;l.statusMessage=h;return l}k(g,c);a(g,null,[{key:"fromXhr",value:function(a){return new g(a[d],a[b],a.status,a.statusText)}}]);return g}(Error)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return r});p=m(19);var a=m(44),b=m(1),d=function(){function a(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=function w(a,
b,c){null===a&&(a=Function.prototype);var h=Object.getOwnPropertyDescriptor(a,b);if(void 0===h){if(a=Object.getPrototypeOf(a),null!==a)return w(a,b,c)}else{if("value"in h)return h.value;b=h.get;return void 0===b?void 0:b.call(c)}},l=b.m.create(),g=b.m.create();m=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;return a}c(b,a);d(b,[{key:"initializeVolumeChunk",value:function(a,c){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"initializeVolumeChunk",this).call(this,a,c);this.chunkDataSize=null;a=this.source;this.gpuMemoryBytes=this.systemMemoryBytes=a.spec.chunkBytes;this.data=null}},{key:"serialize",value:function(a,c){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var h=this.chunkDataSize;h!==this.source.spec.chunkDataSize&&(a.chunkDataSize=h);a=a.data=this.data;c.push(a.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=
this.data.byteLength;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}}]);return b}(p.SliceViewChunk);var r=function(n){function h(b,c){k(this,h);b=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,b,c));b.spec=a.b.fromObject(c.spec);return b}c(h,n);d(h,[{key:"computeChunkBounds",value:function(a){var c=this.spec,h=c.upperVoxelBound;c=c.chunkDataSize;for(var d=b.m.multiply(g,a.chunkGridPosition,
c),n=!1,r=0;3>r;++r)(l[r]=Math.min(h[r],d[r]+c[r])-d[r])!==c[r]&&(n=!0);b.m.add(d,d,this.spec.baseVoxelOffset);a.chunkDataSize=n?b.m.clone(l):c;return d}}]);return h}(p.SliceViewChunkSource);r.prototype.chunkConstructor=m},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){for(var c=r.m.create(),h=r.m.create(),q=r.m.create(),d=new Float32Array(a.length),g=b.length,l=0;l<g;l+=3){for(var t=3*b[l],n=3*b[l+1],w=3*b[l+2],f=0;3>f;++f)h[f]=a[n+f]-a[t+f],q[f]=
a[w+f]-a[n+f];r.m.cross(c,h,q);r.m.normalize(c,c);for(t=0;3>t;++t)for(n=3*b[l+t],w=0;3>w;++w)d[n+w]+=c[w]}a=d.length;for(b=0;b<a;b+=3)c=d.subarray(b,b+3),r.m.normalize(c,c);return d}function b(a,b,c,h,q,d,l,n){var t=new Float32Array(c,q,3*d);Object(g.d)(t,h);void 0===l&&(l=q+12*d);var r;void 0!==n&&(r=n*b);c=void 0===r?new Uint32Array(c,l):new Uint32Array(c,l,r);if(0!==c.length%b)throw Error("Number of indices is not a multiple of "+b+": "+c.length+".");Object(g.d)(c,h);a.vertexPositions=t;a.indices=
c}e.c=function(a,b,c){Object(C.i)(b);a.fragmentIds=Object(C.j)(b,c,C.m)};e.b=a;e.e=b;e.d=function(c,h,d,g,q,l,n){b(c,3,h,d,g,q,l,n);c.vertexNormals=a(c.vertexPositions,c.indices)};m.d(e,"a",function(){return v});var d=m(2),n=m(7);p=m(89);e=m(42);var l=m(21),g=m(11),r=m(1),C=m(3),w=m(5),h=m(10);m=m(0);var B=function(){function a(a,b){for(var c=0;c<b.length;c++){var q=b[c];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(a,q.key,q)}}return function(b,
c,h){c&&a(b.prototype,c);h&&a(b,h);return b}}(),I=function t(a,b,c){null===a&&(a=Function.prototype);var q=Object.getOwnPropertyDescriptor(a,b);if(void 0===q){if(a=Object.getPrototypeOf(a),null!==a)return t(a,b,c)}else{if("value"in q)return q.value;b=q.get;return void 0===b?void 0:b.call(c)}},u=this&&this.__decorate||function(a,b,c,q){var h=arguments.length,d=3>h?b:null===q?q=Object.getOwnPropertyDescriptor(b,c):q,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(a,
b,c,q);else for(var l=a.length-1;0<=l;l--)if(g=a[l])d=(3>h?g(d):3<h?g(b,c,d):g(b,c))||d;return 3<h&&d&&Object.defineProperty(b,c,d),d},x=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.objectId=new w.a;return a}c(b,a);B(b,[{key:"initializeManifestChunk",value:function(a,c,h){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(c);h&&(this.clipBounds=h)}},{key:"freeSystemMemory",value:function(){this.fragmentIds=
null}},{key:"serialize",value:function(a,c){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);a.fragmentIds=this.fragmentIds}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=100;this.gpuMemoryBytes=0;I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);this.priorityTier<n.d.RECENT&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);
return b}(d.Chunk),J=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=null;a.indices=null;a.vertexNormals=null;return a}c(b,a);B(b,[{key:"initializeFragmentChunk",value:function(a,c,h){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.manifestChunk=c;this.fragmentId=h}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=
this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,c){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);a.objectKey=this.manifestChunk.key;var q=this.vertexPositions,h=this.indices,d=this.vertexNormals;a.vertexPositions=q;a.indices=h;a.vertexNormals=d;a=q.buffer;c.push(a);h=h.buffer;h!==a&&c.push(h);d=d.buffer;d!==a&&d!==h&&c.push(d);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",
value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(d.Chunk),v=function(a){function b(a,c){k(this,b);var q=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return(q.fragmentSource=q.registerDisposer(a.getRef(c.fragmentSource))).meshSource=q}c(b,a);B(b,[{key:"getChunk",value:function(a,
b){var c=Object(l.b)(a,b),q=this.chunks.get(c);void 0===q&&(q=this.getNewChunk_(x),q.initializeManifestChunk(c,a,b),this.addChunk(q));return q}},{key:"getFragmentChunk",value:function(a,b){var c=a.key+"/"+b,q=this.fragmentSource,h=q.chunks.get(c);void 0===h&&(h=q.getNewChunk_(J),h.initializeFragmentChunk(c,a,b),q.addChunk(h));return h}}]);return b}(d.ChunkSource);d=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.meshSource=null;return a}
c(b,a);B(b,[{key:"download",value:function(a,b){return this.meshSource.downloadFragment(a,b)}}]);return b}(d.ChunkSource);d=u([Object(m.g)(p.a)],d);e=function(a){function b(a,c){k(this,b);var q=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));q.source=q.registerDisposer(a.getRef(c.source));q.registerDisposer(q.chunkManager.recomputeChunkPriorities.add(function(){q.updateChunkPriorities()}));return q}c(b,a);B(b,[{key:"updateChunkPriorities",value:function(){var a=this,b=this.visibility.value;
if(b!==Number.NEGATIVE_INFINITY){var c=Object(h.b)(b),d=Object(h.a)(b),g=this.source,t=this.chunkManager;Object(l.a)(this,function(b){b=g.getChunk(b,a.clipBounds.value);t.requestChunk(b,c,d+100);var q=b.state;if(q===n.e.SYSTEM_MEMORY_WORKER||q===n.e.SYSTEM_MEMORY||q===n.e.GPU_MEMORY){q=$jscomp.makeIterator(b.fragmentIds);for(var h=q.next();!h.done;h=q.next())h=g.getFragmentChunk(b,h.value),t.requestChunk(h,c,d+50)}})}}}]);return b}(e.a);e=u([Object(m.g)(p.b)],e)},function(p,e,m){e.a=function(c,a){Object(k.a)(c,
Object(f.a)(new Uint8Array(a),c.chunkDataSize,c.source.spec.numChannels))};var k=m(26),f=m(99)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"SliceView",function(){return B});m.d(e,"SliceViewChunk",function(){return I});m.d(e,"SliceViewChunkSource",function(){return u});m.d(e,"RenderLayer",function(){return x});p=m(2);var a=m(65);e=m(9);var b=m(1),d=m(8),n=m(10);m=m(0);var l=function(){function a(a,
b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,h){c&&a(b.prototype,c);h&&a(b,h);return b}}(),g=function v(a,b,c){null===a&&(a=Function.prototype);var h=Object.getOwnPropertyDescriptor(a,b);if(void 0===h){if(a=Object.getPrototypeOf(a),null!==a)return v(a,b,c)}else{if("value"in h)return h.value;b=h.get;return void 0===b?void 0:b.call(c)}},r=this&&this.__decorate||function(a,
b,c,h){var d=arguments.length,q=3>d?b:null===h?h=Object.getOwnPropertyDescriptor(b,c):h,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)q=Reflect.decorate(a,b,c,h);else for(var l=a.length-1;0<=l;l--)if(g=a[l])q=(3>d?g(q):3<d?g(b,c,q):g(b,c))||q;return 3<d&&q&&Object.defineProperty(b,c,q),q},C=b.m.create(),w=b.m.create(),h=function(a){function b(a,c){k(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));h.initializeSharedObject(a,c.id);return h}c(b,a);return b}(e.h),
B=function(a){function h(a,b){k(this,h);var c=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a,b));c.handleLayerChanged=function(){c.hasValidViewport&&c.chunkManager.scheduleUpdateChunkPriorities()};c.invalidateVisibleSources=function(){c.visibleSourcesStale=!0;c.hasValidViewport&&c.chunkManager.scheduleUpdateChunkPriorities()};c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateVisibleChunks()}));return c}c(h,a);l(h,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},
{key:"updateVisibleChunks",value:function(){var a=this,c=this.centerDataPosition,h=this.chunkManager,q=this.visibility.value;if(q!==Number.NEGATIVE_INFINITY){var d=Object(n.b)(q),g=Object(n.a)(q);g+=-1E12;this.computeVisibleChunks(function(b){b.globalToLocalSpatial(w,c);return a.visibleChunkLayouts.get(b)},function(a,c,q,l){b.m.multiply(C,q,a.size);a=-b.m.distance(w,C);l=$jscomp.makeIterator(l);for(var t=l.next();!t.done;t=l.next()){var n=t.value;t=c.get(n);n=n.getChunk(q);h.requestChunk(n,d,g+a+
1E9*t)}})}}},{key:"removeVisibleLayer",value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged);a.transform.changed.remove(this.invalidateVisibleSources);this.invalidateVisibleSources()}},{key:"addVisibleLayer",value:function(a){this.visibleLayers.set(a,[]);a.layerChanged.add(this.handleLayerChanged);a.transform.changed.add(this.invalidateVisibleSources);this.invalidateVisibleSources()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),
b=a.next();!b.done;b=a.next())this.removeVisibleLayer(b.value);g(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"disposed",this).call(this)}}]);return h}(Object(n.c)(Object(p.withChunkManager)(h)));B=r([Object(m.g)(e.f)],B);Object(m.f)(e.g,function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});Object(m.f)(e.b,function(a){var b=this.get(a.id);a=this.get(a.layerId);b.addVisibleLayer(a)});Object(m.f)(e.c,
function(a){var b=this.get(a.id);a=this.get(a.layerId);b.removeVisibleLayer(a)});var I=function(a){function h(){k(this,h);var a=f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));a.source=null;a.chunkGridPosition=b.m.create();return a}c(h,a);l(h,[{key:"initializeVolumeChunk",value:function(a,c){g(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"initialize",this).call(this,a);b.m.copy(this.chunkGridPosition,c)}},{key:"serialize",value:function(a,b){g(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),
"serialize",this).call(this,a,b);a.chunkGridPosition=this.chunkGridPosition}},{key:"downloadSucceeded",value:function(){g(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){}},{key:"toString",value:function(){return this.source.toString()+":"+Object(b.n)(this.chunkGridPosition)}}]);return h}(p.Chunk),u=function(a){function h(a,b){k(this,h);return f(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a,b))}c(h,
a);l(h,[{key:"getChunk",value:function(a){var c=Object(b.n)(a),h=this.chunks.get(c);void 0===h&&(h=this.getNewChunk_(this.chunkConstructor),h.initializeVolumeChunk(c,a),this.addChunk(h));return h}}]);return h}(p.ChunkSource),x=function(h){function g(c,h){k(this,g);var l=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,c,h));l.layerChanged=new d.a;l.transform=new a.a;l.transformedSourcesGeneration=-1;for(var q=l.sources=[],t=$jscomp.makeIterator(h.sources),n=t.next();!n.done;n=t.next()){var r=
n.value;n=[];q.push(n);r=$jscomp.makeIterator(r);for(var w=r.next();!w.done;w=r.next())w=c.get(w.value),l.registerDisposer(w.addRef()),n.push(w)}b.h.copy(l.transform.transform,h.transform);l.transform.changed.add(l.layerChanged.dispatch);return l}c(g,h);return g}(m.c);x=r([Object(m.g)(e.d)],x);Object(m.f)(e.e,function(a){var c=this.get(a.id);a=a.value;var h=c.transform.transform;b.h.equals(a,h)||(b.h.copy(h,a),c.transform.changed.dispatch())})},function(p,e,m){e.b=function(k,f,c,a){for(;f<c;){var b=
k[f];a(b)?++f:(--c,k[f]=k[c],k[c]=b)}return c};e.a=function(k,f){var c=k.length,a=Array(c);f=a[0]=void 0===f?1:f;for(var b=1;b<c;++b)f*=k[b-1],a[b]=f;return a};e.c=function(k,f,c){for(var a=new k.constructor(k.length),b=0;b<f*c;b+=c)for(var d=0;d<c;d++)a[d*f+b/c]=k[b+d];return a}},function(p,e,m){e.b=function(k,f){return k.low+","+k.high+(f?"_"+f.center.toString()+"_"+f.size.toString():"")};e.a=function(k,f){var c=k.segmentEquivalences;k=$jscomp.makeIterator(k.visibleSegments);for(var a=k.next();!a.done;a=
k.next())if(a=a.value,c.disjointSets.isMinElement(a))for(var b=$jscomp.makeIterator(c.setElements(a)),d=b.next();!d.done;d=b.next())f(d.value,a)}},function(p,e,m){function k(f,c,a,b,d,n,l){for(var g=new Map,r=Array(3),C=2,w=0;3>w;++w){var h=r[w]=Math.ceil(b[w]/c[w]);C*=h}w=r[0];h=r[1];r=r[2];var B=b[0],k=b[1];b=b[2];var e=c[0],m=c[1],p=c[2],v=f.length,A=v,t=[0,0,0];f.resize(v+C);C=n[0];for(var z=n[1],H=n[2],q=0;q<r;++q){t[2]=Math.min(p,b-q*p);for(var G=0;G<h;++G){t[1]=Math.min(m,k-G*m);for(var L=
0;L<w;++L){t[0]=Math.min(e,B-L*e);var K=f.length-v,D=$jscomp.makeIterator(l(a,d+(q*p*H+G*m*z+L*e*C),n,c,t,v,g,f)),E=D.next().value;D=D.next().value;var Q=f.data;Q[A++]=D|E<<24;Q[A++]=K}}}}e.c=function(f,c,a,b,d,n,l,g,r){if(1===d)var C=0;else for(C=1;1<<C<d;)C*=2;var w=Math.ceil(C*b/32),h=f.length,B=w,k=!1,e=Array.prototype.join.call(n.subarray(0,d*r),",");b=a.get(e);void 0===b&&(k=!0,B+=d*r,b=h+w-c,a.set(e,b));f.resize(h+B);f=f.data;if(0<C)switch(C){case 1:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,B|=
g[l[c+1]]<<1,B|=g[l[c+2]]<<2,B|=g[l[c+3]]<<3,B|=g[l[c+4]]<<4,B|=g[l[c+5]]<<5,B|=g[l[c+6]]<<6,B|=g[l[c+7]]<<7,B|=g[l[c+8]]<<8,B|=g[l[c+9]]<<9,B|=g[l[c+10]]<<10,B|=g[l[c+11]]<<11,B|=g[l[c+12]]<<12,B|=g[l[c+13]]<<13,B|=g[l[c+14]]<<14,B|=g[l[c+15]]<<15,B|=g[l[c+16]]<<16,B|=g[l[c+17]]<<17,B|=g[l[c+18]]<<18,B|=g[l[c+19]]<<19,B|=g[l[c+20]]<<20,B|=g[l[c+21]]<<21,B|=g[l[c+22]]<<22,B|=g[l[c+23]]<<23,B|=g[l[c+24]]<<24,B|=g[l[c+25]]<<25,B|=g[l[c+26]]<<26,B|=g[l[c+27]]<<27,B|=g[l[c+28]]<<28,B|=g[l[c+29]]<<29,
B|=g[l[c+30]]<<30,B|=g[l[c+31]]<<31,f[h+a]=B,c+=32;break;case 2:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,B|=g[l[c+1]]<<2,B|=g[l[c+2]]<<4,B|=g[l[c+3]]<<6,B|=g[l[c+4]]<<8,B|=g[l[c+5]]<<10,B|=g[l[c+6]]<<12,B|=g[l[c+7]]<<14,B|=g[l[c+8]]<<16,B|=g[l[c+9]]<<18,B|=g[l[c+10]]<<20,B|=g[l[c+11]]<<22,B|=g[l[c+12]]<<24,B|=g[l[c+13]]<<26,B|=g[l[c+14]]<<28,B|=g[l[c+15]]<<30,f[h+a]=B,c+=16;break;case 4:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,B|=g[l[c+1]]<<4,B|=g[l[c+2]]<<8,B|=g[l[c+3]]<<12,B|=g[l[c+4]]<<16,B|=g[l[c+5]]<<
20,B|=g[l[c+6]]<<24,B|=g[l[c+7]]<<28,f[h+a]=B,c+=8;break;case 8:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,B|=g[l[c+1]]<<8,B|=g[l[c+2]]<<16,B|=g[l[c+3]]<<24,f[h+a]=B,c+=4;break;case 16:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,B|=g[l[c+1]]<<16,f[h+a]=B,c+=2;break;case 32:for(c=a=0;a<w;++a)B=0,B|=g[l[c+0]]<<0,f[h+a]=B,c+=1}if(k)for(l=h+w,g=0,d*=r;g<d;++g)f[l++]=n[g];return[C,b]};e.a=k;e.b=function(f,c,a,b,d,n,l){var g=f.length,r=b[3];f.resize(g+r);for(var C=0;C<r;++C)f.data[g+C]=f.length,k(f,c,a,b,d+n[3]*C,
n,l)}},function(p,e,m){e.a=function(b,d,n){n=void 0===n?c.a:n;var l=b.source.spec,g=l.dataType,r=Object(a.i)(b.chunkDataSize),C=f.a[g];l=r*C*l.numChannels;if(l!==d.byteLength)throw Error("Raw-format chunk is "+d.byteLength+" bytes, "+("but "+r+" * "+C+" = "+l+" bytes are expected."));switch(g){case f.b.UINT8:d=new Uint8Array(d);break;case f.b.UINT16:d=new Uint16Array(d);Object(c.c)(d,n);break;case f.b.UINT32:case f.b.UINT64:d=new Uint32Array(d);Object(c.d)(d,n);break;case f.b.FLOAT32:d=new Float32Array(d);
Object(c.d)(d,n);break;default:throw Error("Unexpected data type: "+g+".");}Object(k.a)(b,d)};var k=m(26),f=m(14),c=m(11),a=m(1)},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"b",function(){return g});m.d(e,"a",function(){return r});e.c=function(c,d){function h(){g=c.value;l=new b.a;d(l,g)}var g,l,n=a()(function(){c.value!==g&&(l.dispose(),h())},0),r=c.changed.add(n);h();return function(){n.cancel();r();l.dispose()}};p=m(69);var a=m.n(p),b=m(13),d=m(8),n=function w(a,
b,c){null===a&&(a=Function.prototype);var h=Object.getOwnPropertyDescriptor(a,b);if(void 0===h){if(a=Object.getPrototypeOf(a),null!==a)return w(a,b,c)}else{if("value"in h)return h.value;b=h.get;return void 0===b?void 0:b.call(c)}},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(){function a(b){c(this,
a);this.value_=b;this.changed=new d.a}l(a,[{key:"value",get:function(){return this.value_},set:function(a){a!==this.value_&&(this.value_=a,this.changed.dispatch())}}]);return a}();(function(a){function b(a,h,d){d=void 0===d?a:d;c(this,b);a=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));a.validator=h;a.defaultValue=d;return a}f(b,a);l(b,[{key:"toJSON",value:function(){if(this.value_!==this.defaultValue)return this.value_}},{key:"reset",value:function(){this.value=this.defaultValue}},
{key:"restoreState",value:function(a){if(void 0!==a){var b=this.validator;try{this.value=b(a);return}catch(u){}}this.value=this.defaultValue}}]);return b})(g);(function(a){function b(a,h){c(this,b);var g=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));g.changed=new d.a;g.f=a;g.ws=h;a=$jscomp.makeIterator(h);for(h=a.next();!h.done;h=a.next())g.registerDisposer(h.value.changed.add(g.changed.dispatch));return g}f(b,a);l(b,[{key:"value",get:function(){return this.f.apply(this,[].concat($jscomp.arrayFromIterable(this.ws.map(function(a){return a.value}))))}}]);
return b})(b.a);(function(a){function b(a,h){for(var g=[],l=1;l<arguments.length;++l)g[l-1]=arguments[l];c(this,b);l=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));l.f=a;l.changed=new d.a;g=$jscomp.makeIterator(g);for(var n=g.next();!n.done;n=g.next())l.registerDisposer(n.value.add(l.changed.dispatch));return l}f(b,a);l(b,[{key:"value",get:function(){return this.f()}}]);return b})(b.a);(function(a){function b(a,h){c(this,b);var d=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
d.validator=a;d.jsonConverter=h;return d}f(b,a);l(b,[{key:"toJSON",value:function(){var a=this.value;return a&&this.jsonConverter(a)}},{key:"restoreState",value:function(a){this.value=this.validator(a)}}]);return b})(function(a){function b(){c(this,b);var a=k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.changed=new d.a;return a}f(b,a);l(b,[{key:"reset",value:function(){this.value=void 0}},{key:"disposed",value:function(){void 0!==this.value_&&this.value_.dispose();this.value_=
void 0;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"disposed",this).call(this)}},{key:"value",get:function(){return this.value_},set:function(a){var b=this,c=this.value_;this.value_=a;void 0!==c&&(c.dispose(),this.valueHandler=void 0);if(void 0!==a){var h=this.valueHandler=function(){b.value_===a&&(b.value_=void 0,b.changed.dispatch())};a.registerDisposer(h)}a!==c&&this.changed.dispatch()}}]);return b}(b.a));var r=function(){function a(b){c(this,a);this.changed=new d.a;this.values=
void 0===b?new Set:new Set(b)}$jscomp.initSymbol();$jscomp.initSymbolIterator();l(a,[{key:"add",value:function(a){var b=this.values;b.has(a)||(b.add(a),this.changed.dispatch());return this}},{key:"delete",value:function(a){return this.values.delete(a)?(this.changed.dispatch(),!0):!1}},{key:"has",value:function(a){return this.values.has(a)}},{key:Symbol.iterator,value:function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();return this.values[Symbol.iterator]()}},{key:"clear",value:function(){var a=
this.values;0<a.size&&(a.clear(),this.changed.dispatch())}},{key:"size",get:function(){return this.values.size}}]);return a}()},function(p,e,m){e.a=function(k,f){k.data=new Uint32Array(f)}},function(p,e,m){e.a=function(d,n){var l=d.source.spec;if(l.compressedSegmentationBlockSize){var g=l.dataType;a.clear();var r=d.chunkDataSize;b[0]=r[0];b[1]=r[1];b[2]=r[2];b[3]=l.numChannels;switch(g){case k.a.UINT32:Object(f.a)(a,l.compressedSegmentationBlockSize,n,b);break;case k.a.UINT64:Object(c.a)(a,l.compressedSegmentationBlockSize,
n,b);break;default:throw Error("Unsupported data type for compressed segmentation: "+k.a[g]);}d.data=new Uint32Array(a.view)}else d.data=n};var k=m(9),f=m(96),c=m(97),a=new (m(98).a)(2E4),b=Array(4)},function(p,e,m){e=m(6).assign;var k=m(104),f=m(107);m=m(50);var c={};e(c,k,f,m);p.exports=c},function(p,e,m){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(p,
e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return C});p=m(2);var a=m(7),b=m(12),d=m(15),n=m(124),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function h(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=
Object.getPrototypeOf(a),null!==a)return h(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},r=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.backendOnly=!0;return a}c(b,a);l(b,[{key:"initialize",value:function(a){g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.requesters=new Set}},{key:"downloadSucceeded",value:function(){g(b.prototype.__proto__||
Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);var a=this.requesters,c=this.data;this.requesters=void 0;a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())h.value.resolve(c)}},{key:"downloadFailed",value:function(a){g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadFailed",this).call(this,a);var c=this.requesters;this.requesters=void 0;c=$jscomp.makeIterator(c);for(var h=c.next();!h.done;h=c.next())h.value.reject(a)}},{key:"freeSystemMemory",
value:function(){this.data=void 0}}]);return b}(p.Chunk),C=function(h){function g(a,b){k(this,g);var c=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a));c.decodeFile=b;c.registerDisposer(a);c.registerDisposer(c.chunkManager.recomputeChunkPrioritiesLate.add(function(){c.updateChunkPriorities()}));return c}c(g,h);l(g,[{key:"updateChunkPriorities",value:function(){for(var a=this.chunkManager,b=$jscomp.makeIterator(this.chunks.values()),c=b.next();!c.done;c=b.next()){c=c.value;var h=c.requesters;
if(void 0!==h){h=$jscomp.makeIterator(h);for(var d=h.next();!d.done;d=h.next())d=d.value.getPriority(),a.requestChunk(c,d.priorityTier,d.priority)}}}},{key:"download",value:function(a,b){var c=this;return Object(d.e)(Object(d.b)(a.key),"arraybuffer",b).then(function(b){a.data=c.decodeFile(b)})}},{key:"getData",value:function(c,h,d){var g=this,l=this.chunks.get(c);void 0===l&&(l=this.getNewChunk_(r),l.initialize(c),this.addChunk(l));return Object(b.d)(d,function(c,d,n){switch(l.state){case a.e.FAILED:d(l.error);
return;case a.e.SYSTEM_MEMORY_WORKER:c(l.data);return}var t={resolve:c,reject:d,getPriority:h};l.requesters.add(t);n.add(function(){var a=l.requesters;void 0!==a&&(a.delete(t),g.chunkManager.scheduleUpdateChunkPriorities());d(b.a)});g.chunkManager.scheduleUpdateChunkPriorities()})}}],[{key:"get",value:function(a,b){return a.memoize.get("getFileSource:"+Object(n.a)(b),function(){return new g(a,b)})}},{key:"getData",value:function(a,b,c,h,d){a=g.get(a,b);c=a.getData(c,h,d);a.dispose();return c}}]);
return g}(p.ChunkSourceBase)},function(p,e,m){var k=k||{};k.Utils=k.Utils||{};k.Utils.crcTable=null;k.Utils.GUNZIP_MAGIC_COOKIE1=31;k.Utils.GUNZIP_MAGIC_COOKIE2=139;k.Utils.getStringAt=function(f,c,a){for(var b="",d;c<a;c+=1)d=f.getUint8(c),0!==d&&(b+=String.fromCharCode(d));return b};k.Utils.getByteAt=function(f,c){return f.getInt8(c)};k.Utils.getShortAt=function(f,c,a){return f.getInt16(c,a)};k.Utils.getIntAt=function(f,c,a){return f.getInt32(c,a)};k.Utils.getFloatAt=function(f,c,a){return f.getFloat32(c,
a)};k.Utils.getDoubleAt=function(f,c,a){return f.getFloat64(c,a)};k.Utils.getLongAt=function(f,c,a){var b,d=[],n=0;for(b=0;8>b;b+=1)d[b]=k.Utils.getByteAt(f,c+b,a);for(b=d.length-1;0<=b;b--)n=256*n+d[b];return n};k.Utils.toArrayBuffer=function(f){var c;var a=new ArrayBuffer(f.length);var b=new Uint8Array(a);for(c=0;c<f.length;c+=1)b[c]=f[c];return a};k.Utils.isString=function(f){return"string"===typeof f||f instanceof String};k.Utils.formatNumber=function(f,c){f=k.Utils.isString(f)?Number(f):f;f=
c?f.toPrecision(5):f.toPrecision(7);return parseFloat(f)};k.Utils.makeCRCTable=function(){for(var f,c=[],a=0;256>a;a++){f=a;for(var b=0;8>b;b++)f=f&1?3988292384^f>>>1:f>>>1;c[a]=f}return c};k.Utils.crc32=function(f){for(var c=k.Utils.crcTable||(k.Utils.crcTable=k.Utils.makeCRCTable()),a=-1,b=0;b<f.byteLength;b++)a=a>>>8^c[(a^f.getUint8(b))&255];return(a^-1)>>>0};"undefined"!==typeof p&&p.exports&&(p.exports=k.Utils)},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"a",function(){return n});var c=m(13),a=m(3),b=function g(a,b,c){null===a&&(a=Function.prototype);var h=Object.getOwnPropertyDescriptor(a,b);if(void 0===h){if(a=Object.getPrototypeOf(a),null!==a)return g(a,b,c)}else{if("value"in
h)return h.value;b=h.get;return void 0===b?void 0:b.call(c)}},d=function(){function a(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=function(g){function n(){f(this,n);var a=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(n,g);d(n,[{key:"get",value:function(c,d){"string"!==typeof c&&(c=Object(a.e)(c));return b(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"get",this).call(this,c,d)}},{key:"getUncounted",value:function(a,b){return this.get(a,function(){return new c.b(b())}).value}}]);return n}(function(){function a(){f(this,a);this.map=new Map}d(a,[{key:"get",value:function(a,b){var c=this.map,h=c.get(a);void 0===h?(h=b(),h.registerDisposer(function(){c.delete(a)}),
c.set(a,h)):h.addRef();return h}}]);return a}())},function(p,e,m){m(4);m(58);m(59);m(33);var k=m(60),f=m(61);m(62);var c=m(34);m(35);m.d(e,"a",function(){return k});m.d(e,"b",function(){return f});m.d(e,"c",function(){return c})},function(p,e,m){e.a=function(){var f=new k.a(9);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};var k=m(4)},function(p,e,m){function k(){var a=new w.a(3);a[0]=0;a[1]=0;a[2]=0;return a}function f(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*
c+a*a)}function c(a,b,c){var h=new w.a(3);h[0]=a;h[1]=b;h[2]=c;return h}function a(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function b(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function d(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function n(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+h*h+a*a)}function l(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return c*c+h*h+a*a}function g(a){var b=a[0],c=a[1];a=a[2];return b*b+c*
c+a*a}function r(a,b){var c=b[0],h=b[1],d=b[2];c=c*c+h*h+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function C(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(e,"__esModule",{value:!0});e.create=k;e.clone=function(a){var b=new w.a(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};e.length=f;e.fromValues=c;e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};e.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=
b[1]+c[1];a[2]=b[2]+c[2];return a};e.subtract=a;e.multiply=b;e.divide=d;e.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};e.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};e.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};e.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};e.round=function(a,b){a[0]=
Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};e.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};e.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};e.distance=n;e.squaredDistance=l;e.squaredLength=g;e.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};e.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};e.normalize=r;e.dot=C;e.cross=function(a,b,c){var d=b[0],h=b[1];b=b[2];var g=c[0],
l=c[1];c=c[2];a[0]=h*c-b*l;a[1]=b*g-d*c;a[2]=d*l-h*g;return a};e.lerp=function(a,b,c,d){var h=b[0],g=b[1];b=b[2];a[0]=h+d*(c[0]-h);a[1]=g+d*(c[1]-g);a[2]=b+d*(c[2]-b);return a};e.hermite=function(a,b,c,d,g,l){var h=l*l,n=h*(2*l-3)+1,t=h*(l-2)+l,r=h*(l-1);l=h*(3-2*l);a[0]=b[0]*n+c[0]*t+d[0]*r+g[0]*l;a[1]=b[1]*n+c[1]*t+d[1]*r+g[1]*l;a[2]=b[2]*n+c[2]*t+d[2]*r+g[2]*l;return a};e.bezier=function(a,b,c,d,g,l){var h=1-l,n=h*h,t=l*l,r=n*h;n*=3*l;h*=3*t;l*=t;a[0]=b[0]*r+c[0]*n+d[0]*h+g[0]*l;a[1]=b[1]*r+c[1]*
n+d[1]*h+g[1]*l;a[2]=b[2]*r+c[2]*n+d[2]*h+g[2]*l;return a};e.random=function(a,b){b=b||1;var c=2*w.c()*Math.PI,d=2*w.c()-1,h=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*h;a[1]=Math.sin(c)*h;a[2]=d*b;return a};e.transformMat4=function(a,b,c){var d=b[0],h=b[1];b=b[2];var g=c[3]*d+c[7]*h+c[11]*b+c[15];g=g||1;a[0]=(c[0]*d+c[4]*h+c[8]*b+c[12])/g;a[1]=(c[1]*d+c[5]*h+c[9]*b+c[13])/g;a[2]=(c[2]*d+c[6]*h+c[10]*b+c[14])/g;return a};e.transformMat3=function(a,b,c){var d=b[0],h=b[1];b=b[2];a[0]=d*c[0]+h*c[3]+b*c[6];
a[1]=d*c[1]+h*c[4]+b*c[7];a[2]=d*c[2]+h*c[5]+b*c[8];return a};e.transformQuat=function(a,b,c){var d=b[0],h=b[1],g=b[2];b=c[0];var l=c[1],n=c[2];c=c[3];var t=c*d+l*g-n*h,r=c*h+n*d-b*g,f=c*g+b*h-l*d;d=-b*d-l*h-n*g;a[0]=t*c+d*-b+r*-n-f*-l;a[1]=r*c+d*-l+f*-b-t*-n;a[2]=f*c+d*-n+t*-l-r*-b;return a};e.rotateX=function(a,b,c,d){var h=[],g=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];g[0]=h[0];g[1]=h[1]*Math.cos(d)-h[2]*Math.sin(d);g[2]=h[1]*Math.sin(d)+h[2]*Math.cos(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=
g[2]+c[2];return a};e.rotateY=function(a,b,c,d){var h=[],g=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];g[0]=h[2]*Math.sin(d)+h[0]*Math.cos(d);g[1]=h[1];g[2]=h[2]*Math.cos(d)-h[0]*Math.sin(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};e.rotateZ=function(a,b,c,d){var h=[],g=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];g[0]=h[0]*Math.cos(d)-h[1]*Math.sin(d);g[1]=h[0]*Math.sin(d)+h[1]*Math.cos(d);g[2]=h[2];a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};e.angle=function(a,b){a=
c(a[0],a[1],a[2]);b=c(b[0],b[1],b[2]);r(a,a);r(b,b);b=C(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};e.equals=function(a,b){var c=a[0],d=a[1];a=a[2];var h=b[0],g=b[1];b=b[2];return Math.abs(c-h)<=w.b*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-g)<=w.b*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(a-b)<=w.b*Math.max(1,Math.abs(a),Math.abs(b))};var w=m(4);e.sub=
a;e.mul=b;e.div=d;e.dist=n;e.sqrDist=l;e.len=f;e.sqrLen=g;p=function(){var a=k();return function(b,c,d,g,h,l){c||(c=3);d||(d=0);for(g=g?Math.min(g*c+d,b.length):b.length;d<g;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],h(a,a,l),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();e.forEach=p},function(p,e,m){function k(){var c=new f.a(4);c[0]=0;c[1]=0;c[2]=0;c[3]=0;return c}e.b=function(c){var a=new f.a(4);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a};e.g=function(c,a,b,d){var n=new f.a(4);n[0]=c;n[1]=a;
n[2]=b;n[3]=d;return n};e.c=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c};e.l=function(c,a,b,d,n){c[0]=a;c[1]=b;c[2]=d;c[3]=n;return c};e.a=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};e.k=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};e.h=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return Math.sqrt(a*a+b*b+d*d+c*c)};e.m=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return a*a+b*b+d*d+c*c};e.j=function(c,a){var b=
a[0],d=a[1],n=a[2];a=a[3];var l=b*b+d*d+n*n+a*a;0<l&&(l=1/Math.sqrt(l),c[0]=b*l,c[1]=d*l,c[2]=n*l,c[3]=a*l);return c};e.d=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]};e.i=function(c,a,b,d){var n=a[0],l=a[1],g=a[2];a=a[3];c[0]=n+d*(b[0]-n);c[1]=l+d*(b[1]-l);c[2]=g+d*(b[2]-g);c[3]=a+d*(b[3]-a);return c};e.f=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};e.e=function(c,a){var b=c[0],d=c[1],n=c[2];c=c[3];var l=a[0],g=a[1],r=a[2];a=a[3];return Math.abs(b-l)<=
f.b*Math.max(1,Math.abs(b),Math.abs(l))&&Math.abs(d-g)<=f.b*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(n-r)<=f.b*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(c-a)<=f.b*Math.max(1,Math.abs(c),Math.abs(a))};var f=m(4);(function(){var c=k();return function(a,b,d,n,l,g){b||(b=4);d||(d=0);for(n=n?Math.min(n*b+d,a.length):a.length;d<n;d+=b)c[0]=a[d],c[1]=a[d+1],c[2]=a[d+2],c[3]=a[d+3],l(c,c,g),a[d]=c[0],a[d+1]=c[1],a[d+2]=c[2],a[d+3]=c[3];return a}})()},function(p,e){p.exports=function(e){var k=typeof e;
return null!=e&&("object"==k||"function"==k)}},function(p,e,m){e=m(71);m="object"==typeof self&&self&&self.Object===Object&&self;e=e||m||Function("return this")();p.exports=e},function(p,e,m){e=m(37).Symbol;p.exports=e},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"PerspectiveViewState",function(){return b});m.d(e,"PerspectiveViewRenderLayer",function(){return d});p=m(79);var a=m(24);m=m(0);e=this&&this.__decorate||
function(a,b,c,d){var g=arguments.length,l=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,c,d);else for(var n=a.length-1;0<=n;n--)if(h=a[n])l=(3>g?h(l):3<g?h(b,c,l):h(b,c))||l;return 3<g&&l&&Object.defineProperty(b,c,l),l};var b=function(a){function b(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];k(this,b);var g;d=f(this,(g=b.__proto__||Object.getPrototypeOf(b)).call.apply(g,[].concat([this],
$jscomp.arrayFromIterable(c))));d.visibility=c[0].get(c[1].visibility);return d}c(b,a);return b}(m.c);b=e([Object(m.g)(p.c)],b);var d=function(b){function d(){k(this,d);var b=f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));b.viewStates=new a.a;return b}c(d,b);return d}(m.c);Object(m.f)(p.a,function(a){var b=this.get(a.view);this.get(a.layer).viewStates.add(b)});Object(m.f)(p.b,function(a){var b=this.get(a.view);this.get(a.layer).viewStates.delete(b)})},function(p,e,m){function k(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){return function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);B(b,[{key:"serialize",value:function(a,c){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);this.data.serialize(a,c);this.data=void 0}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.data.numBytes;I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=void 0}}]);return b}(a)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"AnnotationMetadataChunk",function(){return u});m.d(e,"AnnotationGeometryData",function(){return x});m.d(e,"AnnotationGeometryChunk",function(){return J});m.d(e,"AnnotationSubsetGeometryChunk",function(){return v});m.d(e,"AnnotationSource",function(){return t});var b=m(41),d=m(81);p=m(2);var n=m(7),l=m(39),g=m(21),r=m(19),C=m(24),
w=m(1),h=m(10);m=m(0);var B=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),I=function H(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return H(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:
b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var q=arguments.length,g=3>q?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(h=a[l])g=(3>q?h(g):3<q?h(b,c,g):h(b,c))||g;return 3<q&&g&&Object.defineProperty(b,c,g),g};var u=function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);B(b,[{key:"freeSystemMemory",
value:function(){this.annotation=void 0}},{key:"serialize",value:function(a,c){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);a.annotation=this.annotation}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=0;I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(p.Chunk),x=function(){function a(){k(this,a)}B(a,[{key:"serialize",value:function(a,b){a.data=this.data;
a.typeToOffset=this.typeToOffset;a.typeToIds=this.typeToIds;a.segmentList=this.segmentList;a.segmentListIndex=this.segmentListIndex;b.push(this.data.buffer,this.segmentList.buffer,this.segmentListIndex.buffer)}},{key:"numBytes",get:function(){return this.data.byteLength}}]);return a}(),J=function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(a(r.SliceViewChunk)),v=function(a){function b(){k(this,b);return f(this,(b.__proto__||
Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(a(p.Chunk)),A=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.parent=void 0;return a}c(b,a);B(b,[{key:"getChunk",value:function(a){var b=this.chunks.get(a);void 0===b&&(b=this.getNewChunk_(u),b.initialize(a),this.addChunk(b));return b}},{key:"download",value:function(a,b){return this.parent.downloadMetadata(a,b)}}]);return b}(p.ChunkSource);A=e([Object(m.g)(d.d)],A);r=
function(a){function b(a,c){k(this,b);a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));a.parent=void 0;a.spec=new d.k(c.spec);return a}c(b,a);B(b,[{key:"download",value:function(a,b){return this.parent.downloadGeometry(a,b)}}]);return b}(r.SliceViewChunkSource);r=e([Object(m.g)(d.c)],r);r.prototype.chunkConstructor=J;r=function(a){function b(a,c){k(this,b);a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));a.parent=void 0;return a}c(b,a);B(b,[{key:"getChunk",value:function(a){var b=
Object(g.b)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(v),c.initialize(b),c.objectId=a.clone(),this.addChunk(c));return c}},{key:"download",value:function(a,b){return this.parent.downloadSegmentFilteredGeometry(a,b)}}]);return b}(p.ChunkSource);r=e([Object(m.g)(d.j)],r);var t=function(a){function b(a,c){k(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.references=new Set;var q=d.chunkManager=a.get(c.chunkManager),g=d.metadataChunkSource=d.registerDisposer(a.getRef(c.metadataChunkSource));
d.sources=c.sources.map(function(b){return b.map(function(b){b=d.registerDisposer(a.getRef(b));b.parent=d;return b})});d.segmentFilteredSource=d.registerDisposer(a.getRef(c.segmentFilteredSource));d.segmentFilteredSource.parent=d;g.parent=d;d.registerDisposer(q.recomputeChunkPriorities.add(function(){return d.recomputeChunkPriorities()}));return d}c(b,a);B(b,[{key:"recomputeChunkPriorities",value:function(){for(var a=this.chunkManager,b=this.metadataChunkSource,c=$jscomp.makeIterator(this.references),
d=c.next();!d.done;d=c.next())a.requestChunk(b.getChunk(d.value),n.d.VISIBLE,200)}},{key:"add",value:function(a){a;throw Error("Not implemented");}},{key:"delete",value:function(a){a;throw Error("Not implemented");}},{key:"update",value:function(a,b){a;b;throw Error("Not implemented");}}]);return b}(m.c);Object(m.f)(d.f,function(a){var b=this.get(a.id);b.references.add(a.annotation);b.chunkManager.scheduleUpdateChunkPriorities()});Object(m.f)(d.g,function(a){var b=this.get(a.id);b.references.delete(a.annotation);
b.chunkManager.scheduleUpdateChunkPriorities()});Object(m.f)(d.b,function(a){var c=this,g=this.get(a.id),h=a.annotationId,l=Object(b.c)(a.newAnnotation);(void 0===h?g.add(l).then(function(a){return Object.assign({},l,{id:a})}):null===l?g.delete(h).then(function(){return null}):g.update(h,l).then(function(){return l})).then(function(a){g.wasDisposed||c.invoke(d.a,{id:g.rpcId,annotationId:h||l.id,newAnnotation:a})},function(a){g.wasDisposed||c.invoke(d.a,{id:g.rpcId,annotationId:h,error:a.message})})});
l=function(a){function b(a,c){k(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=a.get(c.source);d.filterBySegmentation=a.get(c.filterBySegmentation);d.viewStates.changed.add(function(){return d.source.chunkManager.scheduleUpdateChunkPriorities()});d.filterBySegmentation.changed.add(function(){return d.source.chunkManager.scheduleUpdateChunkPriorities()});d.registerDisposer(d.source.chunkManager.recomputeChunkPriorities.add(function(){return d.recomputeChunkPriorities()}));
return d}c(b,a);B(b,[{key:"recomputeChunkPriorities",value:function(){var a=this.source;if(!this.filterBySegmentation.value)for(var b=$jscomp.makeIterator(this.viewStates),c=b.next();!c.done;c=b.next()){var d=c.value.visibility.value;if(d!==Number.NEGATIVE_INFINITY){c=Object(h.b)(d);d=Object(h.a)(d);for(var g=$jscomp.makeIterator(a.sources),q=g.next();!q.done;q=g.next()){q=$jscomp.makeIterator(q.value);for(var l=q.next();!l.done;l=q.next())l=l.value.getChunk(w.g),a.chunkManager.requestChunk(l,c,d)}}}}}]);
return b}(l.PerspectiveViewRenderLayer);l=e([Object(m.g)(d.e)],l);l;p=function(a){function b(a,c){k(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.segmentationState=new C.b(void 0);d.source=a.get(c.source);d.segmentationState.value=d.getSegmentationState(c.segmentationState);var g=function(){return d.chunkManager.scheduleUpdateChunkPriorities()};d.registerDisposer(Object(C.c)(d.segmentationState,function(a,b){null!=b&&(a.registerDisposer(b.visibleSegments.changed.add(g)),
a.registerDisposer(b.segmentEquivalences.changed.add(g)))}));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){return d.recomputeChunkPriorities()}));return d}c(b,a);B(b,[{key:"recomputeChunkPriorities",value:function(){var a=this.segmentationState.value;if(null!=a){var b=this.visibility.value;if(b!==Number.NEGATIVE_INFINITY){var c=Object(h.b)(b),d=Object(h.a)(b),q=this.chunkManager,l=this.source.segmentFilteredSource;Object(g.a)(a,function(a){a=l.getChunk(a);q.requestChunk(a,
c,d+60)})}}}},{key:"getSegmentationState",value:function(a){return null==a?a:{visibleSegments:this.rpc.get(a.visibleSegments),segmentEquivalences:this.rpc.get(a.segmentEquivalences)}}}]);return b}(Object(h.c)(Object(p.withChunkManager)(m.c)));p=e([Object(m.g)(d.h)],p);p;Object(m.f)(d.i,function(a){var b=this.get(a.id);b.segmentationState.value=b.getSegmentationState(a.segmentationState)})},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){var b=
x.get(a.type).toJSON(a);b.type=I[a.type].toLowerCase();b.id=a.id;b.description=a.description||void 0;a=a.segments;void 0!==a&&0<a.length&&(b.segments=a.map(function(a){return a.toString()}));return b}function b(a,b){b=void 0===b?!1:b;Object(g.i)(a);var c=Object(g.j)(a,"type",function(a){return Object(g.h)(a,I)});b={id:Object(g.j)(a,"id",b?g.k:g.l)||Object(r.a)(160),description:Object(g.j)(a,"description",g.k),segments:Object(g.j)(a,"segments",function(a){return void 0===a?void 0:Object(g.a)(a,function(a){return w.a.parseString(a)})}),
type:c};x.get(c).restoreState(b,a);return b}function d(a,b){return a.id<b.id?-1:a.id===b.id?0:1}function n(a){for(var b=0,c=[],g=0,h=0,q=$jscomp.makeIterator(u),l=q.next();!l.done;l=q.next()){l=l.value;c[l]=b;for(var n=a[l],r=0,f=$jscomp.makeIterator(n),w=f.next();!w.done;w=f.next())w=w.value.segments,void 0!==w&&(r+=w.length);h+=n.length;g+=r;n.sort(d);n=n.length;l=x.get(l);b+=l.serializedBytes*n}var k=new Uint32Array(h+1),e=new Uint32Array(2*g);g=[];b=new ArrayBuffer(b);var C=0,m=0;h={};q=$jscomp.makeIterator(u);
for(l=q.next();!l.done;h={serializer:h.serializer},l=q.next())l=l.value,n=a[l],g[l]=n.map(function(a){return a.id}),r=n.length,f=x.get(l),h.serializer=f.serializer(b,c[l],r),n.forEach(function(a){return function(b,c){a.serializer(b,c);k[m++]=C;b=b.segments;if(void 0!==b)for(b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next())c=c.value,e[2*C]=c.low,e[2*C+1]=c.high,++C}}(h));return{data:new Uint8Array(b),typeToIds:g,typeToOffset:c,segmentListIndex:k,segmentList:e}}m.d(e,"b",function(){return I});
m.d(e,"a",function(){return J});e.c=function(a){if(null==a)return a;var b=a.segments;void 0!==b&&(a.segments=b.map(function(a){return new w.a(a.low,a.high)}));return a};p=m(13);var l=m(1),g=m(3),r=m(80),C=m(8),w=m(5),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),B=function(a){function b(a){k(this,b);var c=
f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c.id=a;c.changed=new C.a;return c}c(b,a);return b}(p.a),I;(function(a){a[a.POINT=0]="POINT";a[a.LINE=1]="LINE";a[a.AXIS_ALIGNED_BOUNDING_BOX=2]="AXIS_ALIGNED_BOUNDING_BOX";a[a.ELLIPSOID=3]="ELLIPSOID"})(I||(I={}));var u=[I.POINT,I.LINE,I.AXIS_ALIGNED_BOUNDING_BOX,I.ELLIPSOID],x=new Map;x.set(I.LINE,{icon:"\ua579",description:"Line",toJSON:function(a){return{pointA:Array.from(a.pointA),pointB:Array.from(a.pointB)}},restoreState:function(a,
b){a.pointA=Object(g.j)(b,"pointA",g.g);a.pointB=Object(g.j)(b,"pointB",g.g)},serializedBytes:24,serializer:function(a,b,c){var d=new Float32Array(a,b,6*c);return function(a,b){var c=a.pointA;a=a.pointB;b*=6;d[b]=c[0];d[b+1]=c[1];d[b+2]=c[2];d[b+3]=a[0];d[b+4]=a[1];d[b+5]=a[2]}}});x.set(I.POINT,{icon:"\u26ac",description:"Point",toJSON:function(a){return{point:Array.from(a.point)}},restoreState:function(a,b){a.point=Object(g.j)(b,"point",g.g)},serializedBytes:12,serializer:function(a,b,c){var d=new Float32Array(a,
b,3*c);return function(a,b){a=a.point;b*=3;d[b]=a[0];d[b+1]=a[1];d[b+2]=a[2]}}});x.set(I.AXIS_ALIGNED_BOUNDING_BOX,{icon:"\u2751",description:"Bounding Box",toJSON:function(a){return{pointA:Array.from(a.pointA),pointB:Array.from(a.pointB)}},restoreState:function(a,b){a.pointA=Object(g.j)(b,"pointA",g.g);a.pointB=Object(g.j)(b,"pointB",g.g)},serializedBytes:24,serializer:function(a,b,c){var d=new Float32Array(a,b,6*c);return function(a,b){var c=a.pointA;a=a.pointB;b*=6;d[b]=Math.min(c[0],a[0]);d[b+
1]=Math.min(c[1],a[1]);d[b+2]=Math.min(c[2],a[2]);d[b+3]=Math.max(c[0],a[0]);d[b+4]=Math.max(c[1],a[1]);d[b+5]=Math.max(c[2],a[2])}}});x.set(I.ELLIPSOID,{icon:"\u25ce",description:"Ellipsoid",toJSON:function(a){return{center:Array.from(a.center),radii:Array.from(a.radii)}},restoreState:function(a,b){a.center=Object(g.j)(b,"center",g.g);a.radii=Object(g.j)(b,"radii",g.f)},serializedBytes:24,serializer:function(a,b,c){var d=new Float32Array(a,b,6*c);return function(a,b){var c=a.radii;b*=6;d.set(a.center,
b);d.set(c,b+3)}}});(function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b})(function(d){function n(a){a=void 0===a?l.h.create():a;k(this,n);var b=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));b.objectToLocal=a;b.annotationMap=new Map;b.changed=new C.a;b.readonly=!1;b.pending=new Set;b.references=new Map;return b}c(n,d);$jscomp.initSymbol();$jscomp.initSymbolIterator();h(n,[{key:"add",value:function(a,b){b=void 0===
b?!0:b;if(!a.id)a.id=Object(r.a)(160);else if(this.annotationMap.has(a.id))throw Error("Annotation id already exists: "+JSON.stringify(a.id)+".");this.annotationMap.set(a.id,a);this.changed.dispatch();b||this.pending.add(a.id);return this.getReference(a.id)}},{key:"commit",value:function(a){this.pending.delete(a.id)}},{key:"update",value:function(a,b){if(null===a.value)throw Error("Annotation already deleted.");a.value=b;this.annotationMap.set(b.id,b);a.changed.dispatch();this.changed.dispatch()}},
{key:Symbol.iterator,value:function(){return this.annotationMap.values()}},{key:"get",value:function(a){return this.annotationMap.get(a)}},{key:"delete",value:function(a){null!==a.value&&(a.value=null,this.annotationMap.delete(a.id),this.pending.delete(a.id),a.changed.dispatch(),this.changed.dispatch())}},{key:"getReference",value:function(a){var b=this,c=this.references.get(a);if(void 0!==c)return c.addRef();c=new B(a);c.value=this.annotationMap.get(a)||null;this.references.set(a,c);c.registerDisposer(function(){b.references.delete(a)});
return c}},{key:"toJSON",value:function(){for(var b=[],c=this.pending,d=$jscomp.makeIterator(this),g=d.next();!g.done;g=d.next())g=g.value,c.has(g.id)||b.push(a(g));return b}},{key:"clear",value:function(){this.annotationMap.clear();this.pending.clear();this.changed.dispatch()}},{key:"restoreState",value:function(a){var c=this.annotationMap;c.clear();this.pending.clear();void 0!==a&&Object(g.a)(a,function(a){a=b(a);c.set(a.id,a)});a=$jscomp.makeIterator(this.references.values());for(var d=a.next();!d.done;d=
a.next()){d=d.value;var h=c.get(d.id);d.value=h||null;d.changed.dispatch()}this.changed.dispatch()}},{key:"reset",value:function(){this.clear()}}]);return n}(p.a));var J=function(){function a(){k(this,a);this.annotations=[[],[],[],[]]}h(a,[{key:"add",value:function(a){this.annotations[a.type].push(a)}},{key:"serialize",value:function(){return n(this.annotations)}}]);return a}()},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return c});m(90);m(92);p=m(2);e=m(10);m=m(0);var c=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var d=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.visibleSegments=a.get(c.visibleSegments);d.clipBounds=a.get(c.clipBounds);d.segmentEquivalences=a.get(c.segmentEquivalences);a=function(){d.chunkManager.scheduleUpdateChunkPriorities()};d.registerDisposer(d.visibleSegments.changed.add(a));d.registerDisposer(d.segmentEquivalences.changed.add(a));d.registerDisposer(d.clipBounds.changed.add(a));return d}f(b,a);return b}(Object(e.c)(Object(p.withChunkManager)(m.c)))},function(p,e,
m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return h});e.b=function(b,c,d,g,h,l,n){Object(a.e)(b,2,c,d,g,h,l,n)};e=m(2);var a=m(17),b=m(42),d=m(21);p=m(95);var n=m(5),l=m(10);m=m(0);var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),r=function I(a,b,c){null===
a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return I(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},C=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,h=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var n=a.length-1;0<=n;n--)if(l=a[n])h=(3>g?l(h):3<g?
l(b,c,h):l(b,c))||h;return 3<g&&h&&Object.defineProperty(b,c,h),h},w=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.objectId=new n.a;a.vertexPositions=null;a.vertexAttributes=null;a.indices=null;return a}c(b,a);g(b,[{key:"initializeSkeletonChunk",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(c)}},{key:"freeSystemMemory",value:function(){this.vertexPositions=
this.indices=null}},{key:"getVertexAttributeBytes",value:function(){var a=this.vertexPositions.byteLength,b=this.vertexAttributes;null!=b&&b.forEach(function(b){a+=b.byteLength});return a}},{key:"serialize",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.vertexPositions,g=this.indices;a.indices=g;c.push(g.buffer);g=this.vertexAttributes;if(null!=g&&0<g.length){var h=new Uint8Array(this.getVertexAttributeBytes());h.set(new Uint8Array(d.buffer,
d.byteOffset,d.byteLength));var l=a.vertexAttributeOffsets=new Uint32Array(g.length+1);l[0]=0;var n=d.byteLength;g.forEach(function(a,b){l[b+1]=n;h.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),n);n+=a.byteLength});c.push(h.buffer);a.vertexAttributes=h}else a.vertexAttributes=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),a.vertexAttributeOffsets=Uint32Array.of(0),d.buffer!==c[0]&&c.push(d.buffer);this.vertexPositions=this.indices=this.vertexAttributes=null}},{key:"downloadSucceeded",
value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.indices.byteLength+this.getVertexAttributeBytes();r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(e.Chunk),h=function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);g(b,[{key:"getChunk",value:function(a){var b=Object(d.b)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(w),c.initializeSkeletonChunk(b,
a),this.addChunk(c));return c}}]);return b}(e.ChunkSource);e=function(a){function b(a,c){k(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}c(b,a);g(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(l.b)(a),c=Object(l.a)(a),g=this.source,h=
this.chunkManager;Object(d.a)(this,function(a){a=g.getChunk(a);h.requestChunk(a,b,c+60)})}}}]);return b}(b.a);e=C([Object(m.g)(p.a)],e)},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"c",function(){return n});
m.d(e,"b",function(){return l});var f=m(9),c=m(14),a=m(1);m.d(e,"a",function(){return c.b});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function r(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return r(a,
b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},n;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";a[a.SEGMENTATION=2]="SEGMENTATION"})(n||(n={}));var l=function(l){function r(b){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");for(var d=void 0===b.lowerVoxelBound?a.g:b.lowerVoxelBound,l=b.upperVoxelBound,n=b.chunkDataSize,f=b.voxelSize,k=b.transform,e=void 0===b.baseVoxelOffset?a.g:b.baseVoxelOffset,w=void 0===b.lowerClipBound?
a.m.multiply(a.m.create(),f,d):b.lowerClipBound,m=void 0===b.upperClipBound?a.m.multiply(a.m.create(),f,l):b.upperClipBound,t=a.m.multiply(a.m.create(),n,f),C=a.m.create(),p=a.m.create(),q=0;3>q;++q)C[q]=Math.floor(d[q]/n[q]),p[q]=Math.floor((l[q]-1)/n[q]+1);f=(r.__proto__||Object.getPrototypeOf(r)).call(this,{voxelSize:f,transform:k,lowerChunkBound:C,upperChunkBound:p,chunkSize:t});if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&
"function"!==typeof f?this:f;f.baseVoxelOffset=e;f.lowerClipBound=w;f.upperClipBound=m;f.lowerVoxelBound=d;f.upperVoxelBound=l;f.chunkDataSize=n;d=f.dataType=b.dataType;l=f.numChannels=b.numChannels;f.chunkBytes=Object(a.i)(n)*c.a[d]*l;f.compressedSegmentationBlockSize=b.compressedSegmentationBlockSize;return f}k(r,l);b(r,[{key:"toObject",value:function(){return Object.assign({},d(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toObject",this).call(this),{numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,
dataType:this.dataType,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,compressedSegmentationBlockSize:this.compressedSegmentationBlockSize})}}],[{key:"make",value:function(a){return new r(Object.assign({},a,{transform:Object(f.k)(a.transform,a.volumeSourceOptions)}))}},{key:"fromObject",value:function(a){return new r(a)}},{key:"withDefaultCompression",value:function(a){var b=
a.compressedSegmentationBlockSize,d=a.dataType,l=a.voxelSize,k=a.transform,e=a.lowerVoxelBound,w=a.upperVoxelBound;k=Object(f.k)(k,a.volumeSourceOptions);void 0!==b||a.volumeType!==n.SEGMENTATION||d!==c.b.UINT32&&d!==c.b.UINT64||(b=Object(f.l)({voxelSize:l,transform:k,lowerVoxelBound:e,upperVoxelBound:w,maxVoxelsPerChunkLog2:9}));return new r(Object.assign({},a,{compressedSegmentationBlockSize:b,transform:k}))}},{key:"getDefaults",value:function(a){var b=Object.assign({},a,{transform:Object(f.k)(a.transform,
a.volumeSourceOptions)});return(void 0===a.chunkDataSizes?Object(f.j)(b):a.chunkDataSizes).map(function(b){return r.withDefaultCompression(Object.assign({},a,{chunkDataSize:b}))})}}]);return r}(f.i)},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"NDStoreVolumeChunkSource",function(){return r});p=m(2);e=m(101);var f=m(18),c=m(102),a=m(23),b=m(16),d=m(15);m=m(0);var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,
h=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var n=a.length-1;0<=n;n--)if(l=a[n])h=(3>g?l(h):3<g?l(b,c,h):l(b,c))||h;return 3<g&&h&&Object.defineProperty(b,c,h),h},g=new Map;g.set("npz",c.a);g.set("jpeg",f.a);g.set("raw",a.a);var r=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.chunkDecoder=g.get(a.parameters.encoding);return a}k(b,a);n(b,[{key:"download",value:function(a,b){for(var c=this,g=this.parameters,h=g.urlPrefix+"/"+g.key+"/"+g.channel+"/"+(g.encoding+"/"+g.resolution),l=this.computeChunkBounds(a),n=a.chunkDataSize,r=0;3>r;++r)h+="/"+l[r]+","+(l[r]+n[r]);g.neariso&&(h+="/neariso/");return Object(d.e)(Object(d.c)(g.baseUrls,
h),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(p.WithParameters)(b.a,e.a));r=l([Object(m.g)()],r)},function(p,e,m){p.exports=function(k,f,c,a){var b=k&65535|0;k=k>>>16&65535|0;for(var d;0!==c;){d=2E3<c?2E3:c;c-=d;do b=b+f[a++]|0,k=k+b|0;while(--d);b%=65521;k%=65521}return b|k<<16|0}},function(p,e,m){var k=function(){for(var f,c=[],a=0;256>a;a++){f=a;for(var b=0;8>b;b++)f=f&1?3988292384^f>>>1:f>>>1;c[a]=f}return c}();p.exports=function(f,c,a,b){a=b+a;for(f^=
-1;b<a;b++)f=f>>>8^k[(f^c[b])&255];return f^-1}},function(p,e,m){function k(b,n){if(65537>n&&(b.subarray&&a||!b.subarray&&c))return String.fromCharCode.apply(null,f.shrinkBuf(b,n));for(var d="",g=0;g<n;g++)d+=String.fromCharCode(b[g]);return d}var f=m(6),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(d){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){a=!1}var b=new f.Buf8(256);for(p=0;256>p;p++)b[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;b[254]=b[254]=1;e.string2buf=
function(a){var b,c,d=a.length,r=0;for(b=0;b<d;b++){var k=a.charCodeAt(b);if(55296===(k&64512)&&b+1<d){var e=a.charCodeAt(b+1);56320===(e&64512)&&(k=65536+(k-55296<<10)+(e-56320),b++)}r+=128>k?1:2048>k?2:65536>k?3:4}var h=new f.Buf8(r);for(b=c=0;c<r;b++)k=a.charCodeAt(b),55296===(k&64512)&&b+1<d&&(e=a.charCodeAt(b+1),56320===(e&64512)&&(k=65536+(k-55296<<10)+(e-56320),b++)),128>k?h[c++]=k:(2048>k?h[c++]=192|k>>>6:(65536>k?h[c++]=224|k>>>12:(h[c++]=240|k>>>18,h[c++]=128|k>>>12&63),h[c++]=128|k>>>6&
63),h[c++]=128|k&63);return h};e.buf2binstring=function(a){return k(a,a.length)};e.binstring2buf=function(a){for(var b=new f.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b};e.buf2string=function(a,c){var d,g=c||a.length,n=Array(2*g);for(c=d=0;c<g;){var f=a[c++];if(128>f)n[d++]=f;else{var e=b[f];if(4<e)n[d++]=65533,c+=e-1;else{for(f&=2===e?31:3===e?15:7;1<e&&c<g;)f=f<<6|a[c++]&63,e--;1<e?n[d++]=65533:65536>f?n[d++]=f:(f-=65536,n[d++]=55296|f>>10&1023,n[d++]=56320|f&1023)}}}return k(n,
d)};e.utf8border=function(a,c){var d;c=c||a.length;c>a.length&&(c=a.length);for(d=c-1;0<=d&&128===(a[d]&192);)d--;return 0>d||0===d?c:d+b[a[d]]>c?d:c}},function(p,e,m){p.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},function(p,e,m){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,
Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(p,e,m){var k=k||{};k.Utils=k.Utils||m(30);k.NIFTI1=k.NIFTI1||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=
this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=!1;this.extensionFlag=[0,0,0,0];this.extensionCode=this.extensionSize=
0};k.NIFTI1.TYPE_NONE=0;k.NIFTI1.TYPE_BINARY=1;k.NIFTI1.TYPE_UINT8=2;k.NIFTI1.TYPE_INT16=4;k.NIFTI1.TYPE_INT32=8;k.NIFTI1.TYPE_FLOAT32=16;k.NIFTI1.TYPE_COMPLEX64=32;k.NIFTI1.TYPE_FLOAT64=64;k.NIFTI1.TYPE_RGB24=128;k.NIFTI1.TYPE_INT8=256;k.NIFTI1.TYPE_UINT16=512;k.NIFTI1.TYPE_UINT32=768;k.NIFTI1.TYPE_INT64=1024;k.NIFTI1.TYPE_UINT64=1280;k.NIFTI1.TYPE_FLOAT128=1536;k.NIFTI1.TYPE_COMPLEX128=1792;k.NIFTI1.TYPE_COMPLEX256=2048;k.NIFTI1.XFORM_UNKNOWN=0;k.NIFTI1.XFORM_SCANNER_ANAT=1;k.NIFTI1.XFORM_ALIGNED_ANAT=
2;k.NIFTI1.XFORM_TALAIRACH=3;k.NIFTI1.XFORM_MNI_152=4;k.NIFTI1.SPATIAL_UNITS_MASK=7;k.NIFTI1.TEMPORAL_UNITS_MASK=56;k.NIFTI1.UNITS_UNKNOWN=0;k.NIFTI1.UNITS_METER=1;k.NIFTI1.UNITS_MM=2;k.NIFTI1.UNITS_MICRON=3;k.NIFTI1.UNITS_SEC=8;k.NIFTI1.UNITS_MSEC=16;k.NIFTI1.UNITS_USEC=24;k.NIFTI1.UNITS_HZ=32;k.NIFTI1.UNITS_PPM=40;k.NIFTI1.UNITS_RADS=48;k.NIFTI1.MAGIC_COOKIE=348;k.NIFTI1.STANDARD_HEADER_SIZE=348;k.NIFTI1.MAGIC_NUMBER_LOCATION=344;k.NIFTI1.MAGIC_NUMBER=[110,43,49];k.NIFTI1.MAGIC_NUMBER2=[110,105,
49];k.NIFTI1.EXTENSION_HEADER_SIZE=8;k.NIFTI1.prototype.readHeader=function(f){f=new DataView(f);var c=k.Utils.getIntAt(f,0,this.littleEndian),a,b;c!==k.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,c=k.Utils.getIntAt(f,0,this.littleEndian));if(c!==k.NIFTI1.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.dim_info=k.Utils.getByteAt(f,39);for(a=0;8>a;a+=1)c=40+2*a,this.dims[a]=k.Utils.getShortAt(f,c,this.littleEndian);this.intent_p1=k.Utils.getFloatAt(f,56,this.littleEndian);
this.intent_p2=k.Utils.getFloatAt(f,60,this.littleEndian);this.intent_p3=k.Utils.getFloatAt(f,64,this.littleEndian);this.intent_code=k.Utils.getShortAt(f,68,this.littleEndian);this.datatypeCode=k.Utils.getShortAt(f,70,this.littleEndian);this.numBitsPerVoxel=k.Utils.getShortAt(f,72,this.littleEndian);this.slice_start=k.Utils.getShortAt(f,74,this.littleEndian);for(a=0;8>a;a+=1)c=76+4*a,this.pixDims[a]=k.Utils.getFloatAt(f,c,this.littleEndian);this.vox_offset=k.Utils.getFloatAt(f,108,this.littleEndian);
this.scl_slope=k.Utils.getFloatAt(f,112,this.littleEndian);this.scl_inter=k.Utils.getFloatAt(f,116,this.littleEndian);this.slice_end=k.Utils.getShortAt(f,120,this.littleEndian);this.slice_code=k.Utils.getByteAt(f,122);this.xyzt_units=k.Utils.getByteAt(f,123);this.cal_max=k.Utils.getFloatAt(f,124,this.littleEndian);this.cal_min=k.Utils.getFloatAt(f,128,this.littleEndian);this.slice_duration=k.Utils.getFloatAt(f,132,this.littleEndian);this.toffset=k.Utils.getFloatAt(f,136,this.littleEndian);this.description=
k.Utils.getStringAt(f,148,228);this.aux_file=k.Utils.getStringAt(f,228,252);this.qform_code=k.Utils.getShortAt(f,252,this.littleEndian);this.sform_code=k.Utils.getShortAt(f,254,this.littleEndian);this.quatern_b=k.Utils.getFloatAt(f,256,this.littleEndian);this.quatern_c=k.Utils.getFloatAt(f,260,this.littleEndian);this.quatern_d=k.Utils.getFloatAt(f,264,this.littleEndian);this.qoffset_x=k.Utils.getFloatAt(f,268,this.littleEndian);this.qoffset_y=k.Utils.getFloatAt(f,272,this.littleEndian);this.qoffset_z=
k.Utils.getFloatAt(f,276,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=280+4*(4*a+b),this.affine[a][b]=k.Utils.getFloatAt(f,c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=k.Utils.getStringAt(f,328,344);this.magic=k.Utils.getStringAt(f,344,348);this.isHDR=this.magic===k.NIFTI1.MAGIC_NUMBER2;f.byteLength>k.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=k.Utils.getByteAt(f,348),this.extensionFlag[1]=k.Utils.getByteAt(f,349),
this.extensionFlag[2]=k.Utils.getByteAt(f,350),this.extensionFlag[3]=k.Utils.getByteAt(f,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(f),this.extensionCode=this.getExtensionCode(f)))};k.NIFTI1.prototype.toFormattedString=function(){var f=k.Utils.formatNumber;var c=""+("Dim Info = "+this.dim_info+"\n");c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";
c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Intent Code = "+this.intent_code+"\n";c+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n";c+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Voxel Dimensions (1-8): "+f(this.pixDims[0])+", "+f(this.pixDims[1])+", "+f(this.pixDims[2])+", "+f(this.pixDims[3])+", "+f(this.pixDims[4])+", "+f(this.pixDims[5])+", "+f(this.pixDims[6])+
", "+f(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+f(this.scl_slope)+"  Intercept = "+f(this.scl_inter)+"\n";c+="Slice End = "+this.slice_end+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(k.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(k.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Display Range:  Max = "+f(this.cal_max)+"  Min = "+f(this.cal_min)+"\n";c+=
"Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+f(this.quatern_b)+"  c = "+f(this.quatern_c)+"  d = "+f(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+
"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+f(this.affine[0][0])+", "+f(this.affine[0][1])+", "+f(this.affine[0][2])+", "+f(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+f(this.affine[1][0])+", "+f(this.affine[1][1])+", "+f(this.affine[1][2])+", "+f(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+f(this.affine[2][0])+", "+f(this.affine[2][1])+", "+f(this.affine[2][2])+", "+f(this.affine[2][3])+"\n";c+='Intent Name: "'+this.intent_name+'"\n';this.extensionFlag[0]&&
(c+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n");return c};k.NIFTI1.prototype.getDatatypeCodeString=function(f){return f===k.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":f===k.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":f===k.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":f===k.NIFTI1.TYPE_FLOAT32?"4-Byte Float":f===k.NIFTI1.TYPE_FLOAT64?"8-Byte Float":f===k.NIFTI1.TYPE_RGB24?"RGB":f===k.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":f===k.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":
f===k.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":f===k.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":f===k.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};k.NIFTI1.prototype.getTransformCodeString=function(f){return f===k.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":f===k.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":f===k.NIFTI1.XFORM_TALAIRACH?"Talairach":f===k.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"};k.NIFTI1.prototype.getUnitsCodeString=function(f){return f===k.NIFTI1.UNITS_METER?"Meters":f===k.NIFTI1.UNITS_MM?
"Millimeters":f===k.NIFTI1.UNITS_MICRON?"Microns":f===k.NIFTI1.UNITS_SEC?"Seconds":f===k.NIFTI1.UNITS_MSEC?"Milliseconds":f===k.NIFTI1.UNITS_USEC?"Microseconds":f===k.NIFTI1.UNITS_HZ?"Hz":f===k.NIFTI1.UNITS_PPM?"PPM":f===k.NIFTI1.UNITS_RADS?"Rads":"Unknown"};k.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};k.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=
function(f,c,a,b,d,n,l,g,r,k){var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],h=a;e[3][0]=e[3][1]=e[3][2]=0;e[3][3]=1;a=1-(f*f+c*c+h*h);1E-7>a?(a=1/Math.sqrt(f*f+c*c+h*h),f*=a,c*=a,h*=a,a=0):a=Math.sqrt(a);l=0<l?l:1;g=0<g?g:1;r=0<r?r:1;0>k&&(r=-r);e[0][0]=(a*a+f*f-c*c-h*h)*l;e[0][1]=2*(f*c-a*h)*g;e[0][2]=2*(f*h+a*c)*r;e[1][0]=2*(f*c+a*h)*l;e[1][1]=(a*a+c*c-f*f-h*h)*g;e[1][2]=2*(c*h-a*f)*r;e[2][0]=2*(f*h-a*c)*l;e[2][1]=2*(c*h+a*f)*g;e[2][2]=(a*a+h*h-c*c-f*f)*r;e[0][3]=b;e[1][3]=d;e[2][3]=n;return e};
k.NIFTI1.prototype.convertNiftiSFormToNEMA=function(f){var c,a,b,d;var n=[[0,0,0],[0,0,0],[0,0,0]];var l=[[0,0,0],[0,0,0],[0,0,0]];var g=f[0][0];var r=f[0][1];var e=f[0][2];var k=f[1][0];var h=f[1][1];var m=f[1][2];var p=f[2][0];var u=f[2][1];var x=f[2][2];f=Math.sqrt(g*g+k*k+p*p);if(0===f)return null;g/=f;k/=f;p/=f;f=Math.sqrt(r*r+h*h+u*u);if(0===f)return null;r/=f;h/=f;u/=f;f=g*r+k*h+p*u;if(1E-4<Math.abs(f)){r-=f*g;h-=f*k;u-=f*p;f=Math.sqrt(r*r+h*h+u*u);if(0===f)return null;r/=f;h/=f;u/=f}f=Math.sqrt(e*
e+m*m+x*x);0===f?(e=k*u-p*h,m=p*r-u*g,x=g*h-k*r):(e/=f,m/=f,x/=f);f=g*e+k*m+p*x;if(1E-4<Math.abs(f)){e-=f*g;m-=f*k;x-=f*p;f=Math.sqrt(e*e+m*m+x*x);if(0===f)return null;e/=f;m/=f;x/=f}f=r*e+h*m+u*x;if(1E-4<Math.abs(f)){e-=f*r;m-=f*h;x-=f*u;f=Math.sqrt(e*e+m*m+x*x);if(0===f)return null;e/=f;m/=f;x/=f}n[0][0]=g;n[0][1]=r;n[0][2]=e;n[1][0]=k;n[1][1]=h;n[1][2]=m;n[2][0]=p;n[2][1]=u;n[2][2]=x;p=this.nifti_mat33_determ(n);if(0===p)return null;var J=-666;g=k=h=m=1;r=2;e=3;for(u=1;3>=u;u+=1)for(x=1;3>=x;x+=
1)if(u!==x)for(c=1;3>=c;c+=1)if(u!==c&&x!==c)for(l[0][0]=l[0][1]=l[0][2]=l[1][0]=l[1][1]=l[1][2]=l[2][0]=l[2][1]=l[2][2]=0,a=-1;1>=a;a+=2)for(b=-1;1>=b;b+=2)for(d=-1;1>=d;d+=2)l[0][u-1]=a,l[1][x-1]=b,l[2][c-1]=d,f=this.nifti_mat33_determ(l),0<f*p&&(f=this.nifti_mat33_mul(l,n),f=f[0][0]+f[1][1]+f[2][2],f>J&&(J=f,g=u,r=x,e=c,k=a,h=b,m=d));n=l=f=p=u=x=0;switch(g*k){case 1:n="X";p="+";break;case -1:n="X";p="-";break;case 2:n="Y";p="+";break;case -2:n="Y";p="-";break;case 3:n="Z";p="+";break;case -3:n=
"Z",p="-"}switch(r*h){case 1:l="X";u="+";break;case -1:l="X";u="-";break;case 2:l="Y";u="+";break;case -2:l="Y";u="-";break;case 3:l="Z";u="+";break;case -3:l="Z",u="-"}switch(e*m){case 1:f="X";x="+";break;case -1:f="X";x="-";break;case 2:f="Y";x="+";break;case -2:f="Y";x="-";break;case 3:f="Z";x="+";break;case -3:f="Z",x="-"}return n+l+f+p+u+x};k.NIFTI1.prototype.nifti_mat33_mul=function(f,c){var a=[[0,0,0],[0,0,0],[0,0,0]],b,d;for(b=0;3>b;b+=1)for(d=0;3>d;d+=1)a[b][d]=f[b][0]*c[0][d]+f[b][1]*c[1][d]+
f[b][2]*c[2][d];return a};k.NIFTI1.prototype.nifti_mat33_determ=function(f){var c=f[0][0];var a=f[0][1];var b=f[0][2];var d=f[1][0];var n=f[1][1];var l=f[1][2];var g=f[2][0];var r=f[2][1];f=f[2][2];return c*n*f-c*r*l-d*a*f+d*r*b+g*a*l-g*n*b};k.NIFTI1.prototype.getExtensionLocation=function(){return k.NIFTI1.MAGIC_COOKIE+4};k.NIFTI1.prototype.getExtensionSize=function(f){return k.Utils.getIntAt(f,this.getExtensionLocation(),this.littleEndian)};k.NIFTI1.prototype.getExtensionCode=function(f){return k.Utils.getIntAt(f,
this.getExtensionLocation()+4,this.littleEndian)};"undefined"!==typeof p&&p.exports&&(p.exports=k.NIFTI1)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){b=b.match(v);if(null===b||void 0===b[1])throw Error('Data source URL must have the form "<protocol>://<path>".');var c=b[1];a=a.get(c);if(void 0===a)throw Error("Unsupported data source: "+JSON.stringify(c)+".");return[a,b[2],c]}function b(b,c,d,g){var h=$jscomp.makeIterator(a(x,c));c=h.next().value;
h=h.next().value;return c.getMesh(b,h,d,g)}function d(b,c,d,g){var h=$jscomp.makeIterator(a(J,c));c=h.next().value;h=h.next().value;return c.getMeshVertexAttributes(b,h,d,g)}function n(a){var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,b=Math.min(b,d),c=Math.max(c,d);return[b,c]}function l(a,c,g,h){for(var q=[b(a,c.meshSourceUrl,g,h)],l=$jscomp.makeIterator(c.attributeSourceUrls),f=l.next();!f.done;f=l.next())q.push(d(a,
f.value,g,h));return Promise.all(q).then(function(a){function b(a,b,c){for(var d=a.length,h=0;h<d;++h){var q=a[h],l=b[h],f=c,r=$jscomp.makeIterator(n(l)),e=r.next().value;r=r.next().value;g.info.vertexAttributes.push({name:q.name,source:f,numComponents:q.numComponents,dataType:q.dataType,min:e,max:r});g.vertexAttributes.push(l)}}var d=a[0],g={info:{numVertices:d.info.numVertices,numTriangles:d.info.numTriangles,vertexAttributes:[]},vertexPositions:d.vertexPositions,indices:d.indices,vertexNormals:d.vertexNormals,
vertexAttributes:[]};b(d.info.vertexAttributes,d.vertexAttributes);c.attributeSourceUrls.forEach(function(c,g){g=a[g+1];if(g.numVertices!==d.info.numVertices)throw Error("Vertex attribute source "+JSON.stringify(c)+" specifies attributes for "+(g.numVertices+" vertices, but mesh has "+d.info.numVertices+" vertices."));b(g.attributeInfo,g.attributes,c)});return g})}e.a=function(a,b){x.set(a,b)};e.b=function(a,b){J.set(a,b)};p=m(2);var g=m(7),r=m(17),C=m(130),w=m(3),h=m(10);m=m(0);var B=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),I=function z(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return z(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,
b,c,d){var g=arguments.length,h=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(q=a[l])h=(3>g?q(h):3<g?q(b,c,h):q(b,c))||h;return 3<g&&h&&Object.defineProperty(b,c,h),h};var u=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.data=null;return a}c(b,a);B(b,[{key:"freeSystemMemory",value:function(){this.data=
null}},{key:"serialize",value:function(a,c){I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.data,g=d.vertexPositions,h=d.indices,l=d.vertexNormals;d=d.vertexAttributes;a.vertexPositions=g;a.indices=h;a.vertexNormals=l;a.vertexAttributes=d;a=new Set;a.add(g.buffer);a.add(h.buffer);a.add(l.buffer);g=$jscomp.makeIterator(d);for(h=g.next();!h.done;h=g.next())a.add(h.value.buffer);c.push.apply(c,[].concat($jscomp.arrayFromIterable(a)));this.data=
null}},{key:"downloadSucceeded",value:function(){var a=this.data,c=a.vertexAttributes;a=this.gpuMemoryBytes=a.vertexPositions.byteLength+a.indices.byteLength+a.vertexNormals.byteLength;c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())a+=d.value.byteLength;this.systemMemoryBytes=this.gpuMemoryBytes=a;I(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(p.Chunk),x=new Map,J=new Map,v=/^(?:([a-zA-Z-+_]+):\/\/)?(.*)$/,A=function(a){function b(){k(this,
b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);B(b,[{key:"getChunk",value:function(){var a=C.b,b=this.chunks.get(a);void 0===b&&(b=this.getNewChunk_(u),b.initialize(a),this.addChunk(b));return b}},{key:"download",value:function(a,b){var c=this;return l(this.chunkManager,this.parameters,function(){return{priorityTier:a.priorityTier,priority:a.priority}},b).then(function(b){if(Object(w.e)(b.info)!==Object(w.e)(c.parameters.info))throw Error("Mesh info has changed.");
void 0===b.vertexNormals&&(b.vertexNormals=Object(r.b)(b.vertexPositions,b.indices));a.data=b})}}]);return b}(Object(p.WithParameters)(p.ChunkSource,C.d));A=e([Object(m.g)()],A);p=function(a){function b(a,c){k(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}c(b,a);B(b,[{key:"updateChunkPriorities",value:function(){var a=
this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(h.b)(a);a=Object(h.a)(a);var c=this.chunkManager,d=this.source.getChunk();c.requestChunk(d,b,a+50)}}}]);return b}(Object(h.c)(Object(p.withChunkManager)(m.c)));p=e([Object(m.g)(C.c)],p);Object(m.e)(C.a,function(a,b){var c=this.getRef(a.chunkManager);try{return l(c,a.parameters,function(){return{priorityTier:g.d.VISIBLE,priority:1E3}},b).then(function(a){return{value:a.info}})}finally{c.dispose()}})},function(p,e,m){e.a=function(f){f=
f instanceof ArrayBuffer?new Uint8Array(f):new Uint8Array(f.buffer,f.byteOffset,f.byteLength);var c=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);return 2<c.length&&31===c[0]&&139===c[1]?Object(k.inflate)(f):f};var k=m(27);m.n(k)},function(p,e,m){m(55);m(2);m(19);m(39);m(40);m(82);m(45);m(112);m(115);m(120);m(121);m(123);m(128);p.exports=m(131)},function(p,e,m){Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"rpc",function(){return k});var k=new (m(0).a)(self);self.rpc=k},function(p,e,
m){var k=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();p=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}k(f,null,[{key:"insertAfter",value:function(c,a){var b=c.next0;a.next0=b;a.prev0=c;c.next0=a;b.prev0=a}},{key:"insertBefore",value:function(c,
a){var b=c.prev0;a.prev0=b;a.next0=c;c.prev0=a;b.next0=a}},{key:"front",value:function(c){var a=c.next0;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev0;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next0,b=c.prev0;a.prev0=b;b.next0=a;c.next0=null;c.prev0=null;return c}},{key:"iterator",value:function(c){function a(a,g){for(;;)switch(b){case 0:d=c.next0;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===g){b=5;break}b=-1;throw g;case 5:case 2:d=
d.next0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"reverseIterator",value:function(c){function a(a,g){for(;;)switch(b){case 0:d=c.prev0;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===g){b=5;break}b=-1;throw g;case 5:case 2:d=
d.prev0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"initializeHead",value:function(c){c.next0=c.prev0=c}}]);return f}();e.a=p},function(p,e,m){var k=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();p=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}k(f,null,[{key:"insertAfter",value:function(c,a){var b=c.next1;a.next1=b;a.prev1=c;c.next1=a;b.prev1=a}},{key:"insertBefore",value:function(c,a){var b=c.prev1;a.prev1=b;a.next1=c;c.prev1=a;b.next1=a}},{key:"front",value:function(c){var a=c.next1;return a===c?null:
a}},{key:"back",value:function(c){var a=c.prev1;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next1,b=c.prev1;a.prev1=b;b.next1=a;c.next1=null;c.prev1=null;return c}},{key:"iterator",value:function(c){function a(a,g){for(;;)switch(b){case 0:d=c.next1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===g){b=5;break}b=-1;throw g;case 5:case 2:d=d.next1;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,
b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"reverseIterator",value:function(c){function a(a,g){for(;;)switch(b){case 0:d=c.prev1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===g){b=5;break}b=-1;throw g;case 5:case 2:d=d.prev1;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,
b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"initializeHead",value:function(c){c.next1=c.prev1=c}}]);return f}();e.a=p},function(p,e,m){m(4)},function(p,e,m){m(4)},function(p,e,m){function k(a,b,c){var d=b[0],l=b[1],g=b[2],f=b[3],e=b[4],k=b[5],h=b[6],m=b[7],p=b[8],u=b[9],x=b[10],J=b[11],v=b[12],A=b[13],t=b[14];b=b[15];var z=c[0],H=c[1],q=c[2],G=c[3];a[0]=z*d+H*e+q*p+G*v;a[1]=z*l+H*k+q*u+G*A;a[2]=
z*g+H*h+q*x+G*t;a[3]=z*f+H*m+q*J+G*b;z=c[4];H=c[5];q=c[6];G=c[7];a[4]=z*d+H*e+q*p+G*v;a[5]=z*l+H*k+q*u+G*A;a[6]=z*g+H*h+q*x+G*t;a[7]=z*f+H*m+q*J+G*b;z=c[8];H=c[9];q=c[10];G=c[11];a[8]=z*d+H*e+q*p+G*v;a[9]=z*l+H*k+q*u+G*A;a[10]=z*g+H*h+q*x+G*t;a[11]=z*f+H*m+q*J+G*b;z=c[12];H=c[13];q=c[14];G=c[15];a[12]=z*d+H*e+q*p+G*v;a[13]=z*l+H*k+q*u+G*A;a[14]=z*g+H*h+q*x+G*t;a[15]=z*f+H*m+q*J+G*b;return a}function f(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];
a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(){var a=new c.a(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.clone=function(a){var b=new c.a(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=
a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};e.fromValues=function(a,b,d,n,l,g,f,e,k,h,m,p,u,x,J,v){var r=new c.a(16);r[0]=a;r[1]=b;r[2]=d;r[3]=n;r[4]=l;r[5]=g;r[6]=f;r[7]=e;r[8]=k;r[9]=h;r[10]=m;r[11]=p;r[12]=u;r[13]=x;r[14]=J;r[15]=v;
return r};e.set=function(a,b,c,n,l,g,f,e,k,h,m,p,u,x,J,v,A){a[0]=b;a[1]=c;a[2]=n;a[3]=l;a[4]=g;a[5]=f;a[6]=e;a[7]=k;a[8]=h;a[9]=m;a[10]=p;a[11]=u;a[12]=x;a[13]=J;a[14]=v;a[15]=A;return a};e.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.transpose=function(a,b){if(a===b){var c=b[1],n=b[2],l=b[3],g=b[6],f=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=n;a[9]=g;a[11]=
b[14];a[12]=l;a[13]=f;a[14]=e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};e.invert=function(a,b){var c=b[0],n=b[1],l=b[2],g=b[3],f=b[4],e=b[5],k=b[6],h=b[7],m=b[8],p=b[9],u=b[10],x=b[11],J=b[12],v=b[13],A=b[14];b=b[15];var t=c*e-n*f,z=c*k-l*f,H=c*h-g*f,q=n*k-l*e,G=n*h-g*e,L=l*h-g*k,K=m*v-p*J,D=m*A-u*J,E=m*b-x*J,Q=p*A-u*v,N=p*b-x*v,O=u*b-x*A,F=t*O-z*N+H*Q+q*
E-G*D+L*K;if(!F)return null;F=1/F;a[0]=(e*O-k*N+h*Q)*F;a[1]=(l*N-n*O-g*Q)*F;a[2]=(v*L-A*G+b*q)*F;a[3]=(u*G-p*L-x*q)*F;a[4]=(k*E-f*O-h*D)*F;a[5]=(c*O-l*E+g*D)*F;a[6]=(A*H-J*L-b*z)*F;a[7]=(m*L-u*H+x*z)*F;a[8]=(f*N-e*E+h*K)*F;a[9]=(n*E-c*N-g*K)*F;a[10]=(J*G-v*H+b*t)*F;a[11]=(p*H-m*G-x*t)*F;a[12]=(e*D-f*Q-k*K)*F;a[13]=(c*Q-n*D+l*K)*F;a[14]=(v*z-J*q-A*t)*F;a[15]=(m*q-p*z+u*t)*F;return a};e.adjoint=function(a,b){var c=b[0],n=b[1],l=b[2],g=b[3],f=b[4],e=b[5],k=b[6],h=b[7],m=b[8],p=b[9],u=b[10],x=b[11],J=
b[12],v=b[13],A=b[14];b=b[15];a[0]=e*(u*b-x*A)-p*(k*b-h*A)+v*(k*x-h*u);a[1]=-(n*(u*b-x*A)-p*(l*b-g*A)+v*(l*x-g*u));a[2]=n*(k*b-h*A)-e*(l*b-g*A)+v*(l*h-g*k);a[3]=-(n*(k*x-h*u)-e*(l*x-g*u)+p*(l*h-g*k));a[4]=-(f*(u*b-x*A)-m*(k*b-h*A)+J*(k*x-h*u));a[5]=c*(u*b-x*A)-m*(l*b-g*A)+J*(l*x-g*u);a[6]=-(c*(k*b-h*A)-f*(l*b-g*A)+J*(l*h-g*k));a[7]=c*(k*x-h*u)-f*(l*x-g*u)+m*(l*h-g*k);a[8]=f*(p*b-x*v)-m*(e*b-h*v)+J*(e*x-h*p);a[9]=-(c*(p*b-x*v)-m*(n*b-g*v)+J*(n*x-g*p));a[10]=c*(e*b-h*v)-f*(n*b-g*v)+J*(n*h-g*e);a[11]=
-(c*(e*x-h*p)-f*(n*x-g*p)+m*(n*h-g*e));a[12]=-(f*(p*A-u*v)-m*(e*A-k*v)+J*(e*u-k*p));a[13]=c*(p*A-u*v)-m*(n*A-l*v)+J*(n*u-l*p);a[14]=-(c*(e*A-k*v)-f*(n*A-l*v)+J*(n*k-l*e));a[15]=c*(e*u-k*p)-f*(n*u-l*p)+m*(n*k-l*e);return a};e.determinant=function(a){var b=a[0],c=a[1],n=a[2],l=a[3],g=a[4],f=a[5],e=a[6],k=a[7],h=a[8],m=a[9],p=a[10],u=a[11],x=a[12],J=a[13],v=a[14];a=a[15];return(b*f-c*g)*(p*a-u*v)-(b*e-n*g)*(m*a-u*J)+(b*k-l*g)*(m*v-p*J)+(c*e-n*f)*(h*a-u*x)-(c*k-l*f)*(h*v-p*x)+(n*k-l*e)*(h*J-m*x)};e.multiply=
k;e.translate=function(a,b,c){var d=c[0],l=c[1];c=c[2];if(b===a)a[12]=b[0]*d+b[4]*l+b[8]*c+b[12],a[13]=b[1]*d+b[5]*l+b[9]*c+b[13],a[14]=b[2]*d+b[6]*l+b[10]*c+b[14],a[15]=b[3]*d+b[7]*l+b[11]*c+b[15];else{var g=b[0];var f=b[1];var e=b[2];var k=b[3];var h=b[4];var m=b[5];var p=b[6];var u=b[7];var x=b[8];var J=b[9];var v=b[10];var A=b[11];a[0]=g;a[1]=f;a[2]=e;a[3]=k;a[4]=h;a[5]=m;a[6]=p;a[7]=u;a[8]=x;a[9]=J;a[10]=v;a[11]=A;a[12]=g*d+h*l+x*c+b[12];a[13]=f*d+m*l+J*c+b[13];a[14]=e*d+p*l+v*c+b[14];a[15]=
k*d+u*l+A*c+b[15]}return a};e.scale=function(a,b,c){var d=c[0],l=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*l;a[5]=b[5]*l;a[6]=b[6]*l;a[7]=b[7]*l;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};e.rotate=function(a,b,d,n){var l=n[0],g=n[1];n=n[2];var f=Math.sqrt(l*l+g*g+n*n);if(Math.abs(f)<c.b)return null;f=1/f;l*=f;g*=f;n*=f;var e=Math.sin(d);var k=Math.cos(d);var h=1-k;d=b[0];f=b[1];var m=b[2];var p=b[3];var u=
b[4];var x=b[5];var J=b[6];var v=b[7];var A=b[8];var t=b[9];var z=b[10];var H=b[11];var q=l*l*h+k;var G=g*l*h+n*e;var L=n*l*h-g*e;var K=l*g*h-n*e;var D=g*g*h+k;var E=n*g*h+l*e;var Q=l*n*h+g*e;l=g*n*h-l*e;g=n*n*h+k;a[0]=d*q+u*G+A*L;a[1]=f*q+x*G+t*L;a[2]=m*q+J*G+z*L;a[3]=p*q+v*G+H*L;a[4]=d*K+u*D+A*E;a[5]=f*K+x*D+t*E;a[6]=m*K+J*D+z*E;a[7]=p*K+v*D+H*E;a[8]=d*Q+u*l+A*g;a[9]=f*Q+x*l+t*g;a[10]=m*Q+J*l+z*g;a[11]=p*Q+v*l+H*g;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};e.rotateX=function(a,
b,c){var d=Math.sin(c);c=Math.cos(c);var l=b[4],g=b[5],f=b[6],e=b[7],k=b[8],h=b[9],m=b[10],p=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=l*c+k*d;a[5]=g*c+h*d;a[6]=f*c+m*d;a[7]=e*c+p*d;a[8]=k*c-l*d;a[9]=h*c-g*d;a[10]=m*c-f*d;a[11]=p*c-e*d;return a};e.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var l=b[0],g=b[1],f=b[2],e=b[3],k=b[8],h=b[9],m=b[10],p=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],
a[14]=b[14],a[15]=b[15]);a[0]=l*c-k*d;a[1]=g*c-h*d;a[2]=f*c-m*d;a[3]=e*c-p*d;a[8]=l*d+k*c;a[9]=g*d+h*c;a[10]=f*d+m*c;a[11]=e*d+p*c;return a};e.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var l=b[0],g=b[1],f=b[2],e=b[3],k=b[4],h=b[5],m=b[6],p=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=l*c+k*d;a[1]=g*c+h*d;a[2]=f*c+m*d;a[3]=e*c+p*d;a[4]=k*c-l*d;a[5]=h*c-g*d;a[6]=m*c-f*d;a[7]=p*c-e*d;return a};e.fromTranslation=function(a,
b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromRotation=function(a,b,d){var f=d[0],l=d[1];d=d[2];var g=Math.sqrt(f*f+l*l+d*d);if(Math.abs(g)<c.b)return null;g=1/g;f*=g;l*=g;d*=g;g=Math.sin(b);b=Math.cos(b);var e=1-b;a[0]=f*f*e+b;a[1]=l*f*
e+d*g;a[2]=d*f*e-l*g;a[3]=0;a[4]=f*l*e-d*g;a[5]=l*l*e+b;a[6]=d*l*e+f*g;a[7]=0;a[8]=f*d*e+l*g;a[9]=l*d*e-f*g;a[10]=d*d*e+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=
b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromRotationTranslation=function(a,b,c){var d=b[0],l=b[1],g=b[2],f=b[3],e=d+d,k=l+l,h=g+g;b=d*e;var m=d*k;d*=h;var p=l*k;l*=h;g*=h;e*=f;k*=f;f*=h;a[0]=1-(p+g);a[1]=m+f;a[2]=d-k;a[3]=0;a[4]=m-f;a[5]=1-(b+g);a[6]=l+e;a[7]=0;a[8]=d+k;a[9]=l-e;a[10]=1-(b+p);a[11]=
0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};e.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};e.getScaling=function(a,b){var c=b[0],f=b[1],l=b[2],g=b[4],e=b[5],k=b[6],m=b[8],h=b[9];b=b[10];a[0]=Math.sqrt(c*c+f*f+l*l);a[1]=Math.sqrt(g*g+e*e+k*k);a[2]=Math.sqrt(m*m+h*h+b*b);return a};e.getRotation=function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-
b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};e.fromRotationTranslationScale=function(a,b,c,f){var d=b[0],g=b[1],e=b[2],k=b[3],n=d+d,h=g+g,m=e+e;b=d*n;var p=d*h;d*=m;var u=g*h;g*=m;e*=m;n*=k;h*=k;k*=m;m=f[0];var x=f[1];f=f[2];a[0]=(1-(u+e))*
m;a[1]=(p+k)*m;a[2]=(d-h)*m;a[3]=0;a[4]=(p-k)*x;a[5]=(1-(b+e))*x;a[6]=(g+n)*x;a[7]=0;a[8]=(d+h)*f;a[9]=(g-n)*f;a[10]=(1-(b+u))*f;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};e.fromRotationTranslationScaleOrigin=function(a,b,c,f,l){var d=b[0],e=b[1],k=b[2],n=b[3],h=d+d,m=e+e,p=k+k;b=d*h;var u=d*m;d*=p;var x=e*m;e*=p;k*=p;h*=n;m*=n;n*=p;p=f[0];var J=f[1];f=f[2];var v=l[0],A=l[1];l=l[2];a[0]=(1-(x+k))*p;a[1]=(u+n)*p;a[2]=(d-m)*p;a[3]=0;a[4]=(u-n)*J;a[5]=(1-(b+k))*J;a[6]=(e+h)*J;a[7]=0;
a[8]=(d+m)*f;a[9]=(e-h)*f;a[10]=(1-(b+x))*f;a[11]=0;a[12]=c[0]+v-(a[0]*v+a[4]*A+a[8]*l);a[13]=c[1]+A-(a[1]*v+a[5]*A+a[9]*l);a[14]=c[2]+l-(a[2]*v+a[6]*A+a[10]*l);a[15]=1;return a};e.fromQuat=function(a,b){var c=b[0],f=b[1],l=b[2];b=b[3];var g=c+c,e=f+f,k=l+l;c*=g;var m=f*g;f*=e;var h=l*g,p=l*e;l*=k;g*=b;e*=b;b*=k;a[0]=1-f-l;a[1]=m+b;a[2]=h-e;a[3]=0;a[4]=m-b;a[5]=1-c-l;a[6]=p+g;a[7]=0;a[8]=h+e;a[9]=p-g;a[10]=1-c-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.frustum=function(a,b,c,f,l,g,e){var d=
1/(c-b),k=1/(l-f),h=1/(g-e);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(l+f)*k;a[10]=(e+g)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=e*g*2*h;a[15]=0;return a};e.perspective=function(a,b,c,f,l){b=1/Math.tan(b/2);var d=1/(f-l);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(l+f)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*l*f*d;a[15]=0;return a};e.perspectiveFromFieldOfView=function(a,b,c,f){var d=Math.tan(b.upDegrees*Math.PI/180),g=Math.tan(b.downDegrees*
Math.PI/180),e=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var k=2/(e+b),n=2/(d+g);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=-((e-b)*k*.5);a[9]=(d-g)*n*.5;a[10]=f/(c-f);a[11]=-1;a[12]=0;a[13]=0;a[14]=f*c/(c-f);a[15]=0;return a};e.ortho=function(a,b,c,f,l,g,e){var d=1/(b-c),k=1/(f-l),h=1/(g-e);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*h;a[11]=0;a[12]=(b+c)*d;a[13]=(l+f)*k;a[14]=(e+g)*h;a[15]=1;return a};e.lookAt=
function(a,b,d,f){var l=b[0],g=b[1];b=b[2];var e=f[0];var k=f[1];var n=f[2];var h=d[0];f=d[1];var m=d[2];if(Math.abs(l-h)<c.b&&Math.abs(g-f)<c.b&&Math.abs(b-m)<c.b)return mat4.identity(a);d=l-h;f=g-f;h=b-m;var p=1/Math.sqrt(d*d+f*f+h*h);d*=p;f*=p;h*=p;m=k*h-n*f;n=n*d-e*h;e=e*f-k*d;(p=Math.sqrt(m*m+n*n+e*e))?(p=1/p,m*=p,n*=p,e*=p):e=n=m=0;k=f*e-h*n;var u=h*m-d*e;var x=d*n-f*m;(p=Math.sqrt(k*k+u*u+x*x))?(p=1/p,k*=p,u*=p,x*=p):x=u=k=0;a[0]=m;a[1]=k;a[2]=d;a[3]=0;a[4]=n;a[5]=u;a[6]=f;a[7]=0;a[8]=e;a[9]=
x;a[10]=h;a[11]=0;a[12]=-(m*l+n*g+e*b);a[13]=-(k*l+u*g+x*b);a[14]=-(d*l+f*g+h*b);a[15]=1;return a};e.targetTo=function(a,b,c,f){var d=b[0],g=b[1];b=b[2];var e=f[0],k=f[1],m=f[2];f=d-c[0];var h=g-c[1];c=b-c[2];var n=f*f+h*h+c*c;0<n&&(n=1/Math.sqrt(n),f*=n,h*=n,c*=n);n=k*c-m*h;m=m*f-e*c;e=e*h-k*f;a[0]=n;a[1]=m;a[2]=e;a[3]=0;a[4]=h*e-c*m;a[5]=c*n-f*e;a[6]=f*m-h*n;a[7]=0;a[8]=f;a[9]=h;a[10]=c;a[11]=0;a[12]=d;a[13]=g;a[14]=b;a[15]=1;return a};e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];
a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};e.subtract=f;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};e.multiplyScalarAndAdd=
function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;a[2]=b[2]+c[2]*f;a[3]=b[3]+c[3]*f;a[4]=b[4]+c[4]*f;a[5]=b[5]+c[5]*f;a[6]=b[6]+c[6]*f;a[7]=b[7]+c[7]*f;a[8]=b[8]+c[8]*f;a[9]=b[9]+c[9]*f;a[10]=b[10]+c[10]*f;a[11]=b[11]+c[11]*f;a[12]=b[12]+c[12]*f;a[13]=b[13]+c[13]*f;a[14]=b[14]+c[14]*f;a[15]=b[15]+c[15]*f;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===
b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};e.equals=function(a,b){var d=a[0],f=a[1],l=a[2],g=a[3],e=a[4],k=a[5],m=a[6],h=a[7],p=a[8],I=a[9],u=a[10],x=a[11],J=a[12],v=a[13],A=a[14];a=a[15];var t=b[0],z=b[1],H=b[2],q=b[3],G=b[4],L=b[5],K=b[6],D=b[7],E=b[8],Q=b[9],N=b[10],O=b[11],F=b[12],y=b[13],M=b[14];b=b[15];return Math.abs(d-t)<=c.b*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(f-z)<=c.b*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(l-H)<=c.b*Math.max(1,Math.abs(l),Math.abs(H))&&
Math.abs(g-q)<=c.b*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(e-G)<=c.b*Math.max(1,Math.abs(e),Math.abs(G))&&Math.abs(k-L)<=c.b*Math.max(1,Math.abs(k),Math.abs(L))&&Math.abs(m-K)<=c.b*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(h-D)<=c.b*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(p-E)<=c.b*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(I-Q)<=c.b*Math.max(1,Math.abs(I),Math.abs(Q))&&Math.abs(u-N)<=c.b*Math.max(1,Math.abs(u),Math.abs(N))&&Math.abs(x-O)<=c.b*Math.max(1,Math.abs(x),Math.abs(O))&&
Math.abs(J-F)<=c.b*Math.max(1,Math.abs(J),Math.abs(F))&&Math.abs(v-y)<=c.b*Math.max(1,Math.abs(v),Math.abs(y))&&Math.abs(A-M)<=c.b*Math.max(1,Math.abs(A),Math.abs(M))&&Math.abs(a-b)<=c.b*Math.max(1,Math.abs(a),Math.abs(b))};var c=m(4);e.mul=k;e.sub=f},function(p,e,m){function k(){var a=new d.a(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function f(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function c(a,b,c){var d=b[0],g=b[1],l=b[2];b=b[3];var f=c[0],e=
c[1],k=c[2];c=c[3];a[0]=d*c+b*f+g*k-l*e;a[1]=g*c+b*e+l*f-d*k;a[2]=l*c+b*k+d*e-g*f;a[3]=b*c-d*f-g*e-l*k;return a}function a(a,b,c,d){var g=b[0],h=b[1],l=b[2];b=b[3];var f=c[0],e=c[1],k=c[2];c=c[3];var m=g*f+h*e+l*k+b*c;0>m&&(m=-m,f=-f,e=-e,k=-k,c=-c);if(1E-6<1-m){var n=Math.acos(m);var r=Math.sin(n);m=Math.sin((1-d)*n)/r;d=Math.sin(d*n)/r}else m=1-d;a[0]=m*g+d*f;a[1]=m*h+d*e;a[2]=m*l+d*k;a[3]=m*b+d*c;return a}function b(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-
b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var g=(d+1)%3,l=(d+2)%3;c=Math.sqrt(b[3*d+d]-b[3*g+g]-b[3*l+l]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*g+l]-b[3*l+g])*c;a[g]=(b[3*g+d]+b[3*d+g])*c;a[l]=(b[3*l+d]+b[3*d+l])*c}return a}Object.defineProperty(e,"__esModule",{value:!0});e.create=k;e.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};e.setAxisAngle=f;e.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/
d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};e.multiply=c;e.rotateX=function(a,b,c){c*=.5;var d=b[0],g=b[1],l=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*f;a[1]=g*c+l*f;a[2]=l*c-g*f;a[3]=b*c-d*f;return a};e.rotateY=function(a,b,c){c*=.5;var d=b[0],g=b[1],l=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c-l*f;a[1]=g*c+b*f;a[2]=l*c+d*f;a[3]=b*c-g*f;return a};e.rotateZ=function(a,b,c){c*=.5;var d=b[0],g=b[1],l=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*f;a[1]=g*c-d*f;a[2]=
l*c+b*f;a[3]=b*c-l*f;return a};e.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};e.slerp=a;e.invert=function(a,b){var c=b[0],d=b[1],g=b[2];b=b[3];var l=c*c+d*d+g*g+b*b;l=l?1/l:0;a[0]=-c*l;a[1]=-d*l;a[2]=-g*l;a[3]=b*l;return a};e.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};e.fromMat3=b;e.fromEuler=function(a,b,c,d){var g=.5*Math.PI/180;b*=g;c*=g;d*=g;g=Math.sin(b);b=Math.cos(b);var h=Math.sin(c);
c=Math.cos(c);var l=Math.sin(d);d=Math.cos(d);a[0]=g*c*d-b*h*l;a[1]=b*h*d+g*c*l;a[2]=b*c*l-g*h*d;a[3]=b*c*d+g*h*l;return a};e.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var d=m(4),n=m(33),l=m(34);p=m(35);e.clone=p.b;e.fromValues=p.g;e.copy=p.c;e.set=p.l;e.add=p.a;e.mul=c;e.scale=p.k;e.dot=p.d;e.lerp=p.i;m=p.h;e.length=m;e.len=m;m=p.m;e.squaredLength=m;e.sqrLen=m;var g=p.j;e.normalize=g;e.exactEquals=p.f;e.equals=p.e;p=function(){var a=l.create(),b=l.fromValues(1,0,0),c=
l.fromValues(0,1,0);return function(d,e,k){var h=l.dot(e,k);if(-.999999>h)return l.cross(a,b,e),1E-6>l.len(a)&&l.cross(a,c,e),l.normalize(a,a),f(d,a,Math.PI),d;if(.999999<h)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;l.cross(a,e,k);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+h;return g(d,d)}}();e.rotationTo=p;p=function(){var b=k(),c=k();return function(d,g,l,f,e,k){a(b,g,e,k);a(c,l,f,k);a(d,b,c,2*k*(1-k));return d}}();e.sqlerp=p;p=function(){var a=n.a();return function(c,d,h,l){a[0]=h[0];a[3]=h[1];a[6]=h[2];a[1]=
l[0];a[4]=l[1];a[7]=l[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return g(c,b(c,a))}}();e.setAxes=p},function(p,e,m){function k(){var c=new f.a(2);c[0]=0;c[1]=0;return c}var f=m(4);(function(){var c=k();return function(a,b,d,f,l,g){b||(b=2);d||(d=0);for(f=f?Math.min(f*b+d,a.length):a.length;d<f;d+=b)c[0]=a[d],c[1]=a[d+1],l(c,c,g),a[d]=c[0],a[d+1]=c[1];return a}})()},function(p,e,m){var k=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();p=function(){function f(c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.compare=c}k(f,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child0;a.next0=b;a.prev0=c;null!==b&&(b.prev0=a);c.child0=a;return c}},{key:"combineChildren",value:function(c){var a=c.child0;if(null===
a)return null;for(c=null;;){var b=a.next0;if(null===b)var d=null;else d=b.next0,a=this.meld(a,b);a.next0=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next0;null!==c;)a=c.next0,d=this.meld(d,c),c=a;d.prev0=null;d.next0=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next0=null;c.prev0=null;c.child0=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev0,d=a.next0;b.child0===a?b.child0=d:b.next0=d;null!==d&&(d.prev0=b);c=this.meld(c,
this.combineChildren(a));a.next0=null;a.prev0=null;a.child0=null;return c}},{key:"entries",value:function(c){function a(a,h){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child0;b=2;return{value:c,done:!1};case 2:if(void 0===h){b=3;break}b=-1;throw h;case 3:case 4:if(null===g){b=5;break}l=g.next0;f=$jscomp.makeIterator(e.entries(g));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===h){b=9;break}b=-1;throw h;case 9:b=6;break;case 7:g=l;b=4;break;case 5:case 1:b=
-1;default:return{value:void 0,done:!0}}}var b=0,d,f,l,g,e=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:"removedEntries",value:function(c){function a(a,h){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child0;c.child0=null;c.next0=null;c.prev0=null;b=2;return{value:c,done:!1};case 2:if(void 0===h){b=3;break}b=-1;
throw h;case 3:case 4:if(null===g){b=5;break}l=g.next0;g.child0=null;g.next0=null;g.prev0=null;f=$jscomp.makeIterator(e.entries(g));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===h){b=9;break}b=-1;throw h;case 9:b=6;break;case 7:g=l;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,l,g,e=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}}]);return f}();e.a=p},function(p,e,m){var k=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();p=function(){function f(c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.compare=c}k(f,[{key:"meld",
value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child1;a.next1=b;a.prev1=c;null!==b&&(b.prev1=a);c.child1=a;return c}},{key:"combineChildren",value:function(c){var a=c.child1;if(null===a)return null;for(c=null;;){var b=a.next1;if(null===b)var d=null;else d=b.next1,a=this.meld(a,b);a.next1=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next1;null!==c;)a=c.next1,d=this.meld(d,c),c=a;d.prev1=null;d.next1=null;return d}},{key:"removeMin",value:function(c){var a=
this.combineChildren(c);c.next1=null;c.prev1=null;c.child1=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev1,d=a.next1;b.child1===a?b.child1=d:b.next1=d;null!==d&&(d.prev1=b);c=this.meld(c,this.combineChildren(a));a.next1=null;a.prev1=null;a.child1=null;return c}},{key:"entries",value:function(c){function a(a,h){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child1;b=2;return{value:c,done:!1};case 2:if(void 0===h){b=3;break}b=-1;throw h;case 3:case 4:if(null===
g){b=5;break}l=g.next1;f=$jscomp.makeIterator(e.entries(g));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===h){b=9;break}b=-1;throw h;case 9:b=6;break;case 7:g=l;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,l,g,e=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};
return k}},{key:"removedEntries",value:function(c){function a(a,h){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child1;c.child1=null;c.next1=null;c.prev1=null;b=2;return{value:c,done:!1};case 2:if(void 0===h){b=3;break}b=-1;throw h;case 3:case 4:if(null===g){b=5;break}l=g.next1;g.child1=null;g.next1=null;g.prev1=null;f=$jscomp.makeIterator(e.entries(g));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===h){b=9;break}b=-1;throw h;case 9:b=6;break;case 7:g=
l;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,l,g,e=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}}]);return f}();e.a=p},function(p,e,m){m.d(e,"a",function(){return b});var k=m(1),f=m(3),c=m(8),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;
d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(a){a=void 0===a?k.h.create():a;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.transform=a;this.changed=new c.a}a(b,[{key:"reset",value:function(){k.h.copy(this.transform,k.c);this.changed.dispatch()}},{key:"toJSON",value:function(){if(!k.h.equals(k.c,this.transform)){var a=this.transform;return[[a[0],
a[4],a[8],a[12]],[a[1],a[5],a[9],a[13]],[a[2],a[6],a[10],a[14]],[a[3],a[7],a[11],a[15]]]}}},{key:"restoreState",value:function(a){if(null==a)this.reset();else if(Array.isArray(a))if(4===a.length)try{for(var b=0;4>b;++b)Object(f.b)(this.transform.subarray(4*b,4*(b+1)),a[b]);k.h.transpose(this.transform,this.transform)}catch(C){this.reset()}else if(16===a.length)try{Object(f.b)(this.transform,a),k.h.transpose(this.transform,this.transform)}catch(C){this.reset()}else this.reset();else if("object"===
typeof a){b=k.j.create();var c=k.m.create(),d=k.m.fromValues(1,1,1);try{Object(f.b)(b,a.rotation),k.j.normalize(b,b)}catch(C){k.j.identity(b)}try{Object(f.b)(c,a.translation)}catch(C){k.m.copy(c,k.g)}try{Object(f.b)(d,a.scale)}catch(C){k.m.copy(d,k.f)}k.h.fromRotationTranslationScale(this.transform,b,c,d);this.changed.dispatch()}else this.reset()}},{key:"clone",value:function(){return new b(k.h.clone(this.transform))}}]);return b}()},function(p,e,m){m.d(e,"a",function(){return c});var k=m(1),f=function(){function a(a,
c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),c=function(){function a(b,c){c=void 0===c?k.c:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=k.m.clone(b);this.transform=k.h.clone(c);this.invTransform=k.h.invert(k.h.create(),c)}f(a,[{key:"toObject",value:function(a){a.size=this.size;a.transform=
this.transform}},{key:"localSpatialToGlobal",value:function(a,c){return k.m.transformMat4(a,c,this.transform)}},{key:"globalToLocalSpatial",value:function(a,c){return k.m.transformMat4(a,c,this.invTransform)}},{key:"globalToLocalGrid",value:function(a,c){this.globalToLocalSpatial(a,c);k.m.divide(a,a,this.size);return a}},{key:"localSpatialVectorToGlobal",value:function(a,c){return Object(k.l)(a,c,this.transform)}},{key:"globalToLocalSpatialVector",value:function(a,c){return Object(k.l)(a,c,this.invTransform)}},
{key:"assignLocalSpatialToGlobalMat4",value:function(a){return k.h.copy(a,this.transform)}}],[{key:"get",value:function(b,c){c=void 0===c?k.c:c;var d=a.cache,f=JSON.stringify([Array.from(b),Array.from(c)]),g=d.get(f);void 0===g&&(g=new a(b,c),d.set(f,g));return g}},{key:"fromObject",value:function(b){return a.get(b.size,b.transform)}}]);return a}();c.cache=new Map},function(p,e,m){e.a=function(e,f){return e===f?!0:1E-6>Math.abs(e-f)/Math.min(Math.abs(e),Math.abs(f))}},function(p,e,m){function k(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=m(24);p=m(0);var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,
d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function n(a,b,c){null===a&&(a=Function.prototype);var g=Object.getOwnPropertyDescriptor(a,b);if(void 0===g){if(a=Object.getPrototypeOf(a),null!==a)return n(a,b,c)}else{if("value"in g)return g.value;b=g.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,f){var g=arguments.length,l=3>g?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=
Reflect.decorate(a,b,c,f);else for(var e=a.length-1;0<=e;e--)if(h=a[e])l=(3>g?h(l):3<g?h(b,c,l):h(b,c))||l;return 3<g&&l&&Object.defineProperty(b,c,l),l};m=b=function(e){function l(a,b){b=void 0===b?{}:b;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var c=(l.__proto__||Object.getPrototypeOf(l)).call(this,a,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.updatingValue_=
!1;void 0!==a&&(c.base=new f.b(b.value),c.setupChangedHandler());return c}k(l,e);c(l,[{key:"initializeCounterpart",value:function(b,c){c=void 0===c?{}:c;c.value=this.value;a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"initializeCounterpart",this).call(this,b,c)}},{key:"setupChangedHandler",value:function(){var a=this;this.registerDisposer(this.base.changed.add(function(){if(a.updatingValue_)a.updatingValue_=!1;else{var b=a.rpc;null!==b&&b.invoke("SharedWatchableValue.changed",{id:a.rpcId,
value:a.value})}}))}},{key:"value",get:function(){return this.base.value},set:function(a){this.base.value=a}},{key:"changed",get:function(){return this.base.changed}}],[{key:"makeFromExisting",value:function(a,c){var g=new b;g.base=c;g.setupChangedHandler();g.initializeCounterpart(a);return g}},{key:"make",value:function(a,c){return b.makeFromExisting(a,new f.b(c))}}]);return l}(p.c);m=b=e([Object(p.g)("SharedWatchableValue")],m);Object(p.f)("SharedWatchableValue.changed",function(a){var b=this.get(a.id);
b.updatingValue_=!0;b.base.value=a.value;b.updatingValue_=!1});var b},function(p,e,m){var k=m(36),f=m(70),c=m(73),a=Math.max,b=Math.min;p.exports=function(d,e,l){function g(a){var b=B,c=I;B=I=void 0;v=a;return u=d.apply(c,b)}function m(a){var b=a-J;a-=v;return void 0===J||b>=e||0>b||t&&a>=H}function n(){var a=f();if(m(a))return p(a);var c=setTimeout;var d=a-v;a=e-(a-J);d=t?b(a,H-d):a;x=c(n,d)}function p(a){x=void 0;if(z&&B)return g(a);B=I=void 0;return u}function h(){var a=f(),b=m(a);B=arguments;
I=this;J=a;if(b){if(void 0===x)return v=a=J,x=setTimeout(n,e),A?g(a):u;if(t)return x=setTimeout(n,e),g(J)}void 0===x&&(x=setTimeout(n,e));return u}var B,I,u,x,J,v=0,A=!1,t=!1,z=!0;if("function"!=typeof d)throw new TypeError("Expected a function");e=c(e)||0;if(k(l)){A=!!l.leading;var H=(t="maxWait"in l)?a(c(l.maxWait)||0,e):H;z="trailing"in l?!!l.trailing:z}h.cancel=function(){void 0!==x&&clearTimeout(x);v=0;B=J=I=x=void 0};h.flush=function(){return void 0===x?u:p(f())};return h}},function(p,e,m){var k=
m(37);p.exports=function(){return k.Date.now()}},function(p,e,m){e=m(72);p.exports="object"==typeof e&&e&&e.Object===Object&&e},function(p,e){e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(m){"object"===typeof window&&(e=window)}p.exports=e},function(p,e,m){var k=m(36),f=m(74),c=0/0,a=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,n=/^0o[0-7]+$/i,l=parseInt;p.exports=function(g){if("number"==typeof g)return g;if(f(g))return c;k(g)&&(g="function"==typeof g.valueOf?
g.valueOf():g,g=k(g)?g+"":g);if("string"!=typeof g)return 0===g?g:+g;g=g.replace(a,"");var e=d.test(g);return e||n.test(g)?l(g.slice(2),e?2:8):b.test(g)?c:+g}},function(p,e,m){var k=m(75),f=m(78);p.exports=function(c){return"symbol"==typeof c||f(c)&&"[object Symbol]"==k(c)}},function(p,e,m){e=m(38);var k=m(76),f=m(77),c=e?e.toStringTag:void 0;p.exports=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":c&&c in Object(a)?k(a):f(a)}},function(p,e,m){e=m(38);m=Object.prototype;
var k=m.hasOwnProperty,f=m.toString,c=e?e.toStringTag:void 0;p.exports=function(a){var b=k.call(a,c),d=a[c];try{a[c]=void 0;var e=!0}catch(g){}var l=f.call(a);e&&(b?a[c]=d:delete a[c]);return l}},function(p,e){var m=Object.prototype.toString;p.exports=function(e){return m.call(e)}},function(p,e){p.exports=function(e){return null!=e&&"object"==typeof e}},function(p,e,m){e.c="perspective_view/PerspectiveView";e.a="perspective_view/addLayer";e.b="perspective_view/removeLayer"},function(p,e,m){e.a=function(e){e=
Math.ceil((void 0===e?128:e)/32);var f=new Uint32Array(e);crypto.getRandomValues(f);for(var c="",a=0;a<e;++a)c+=("00000000"+f[a].toString(16)).slice(-8);return c}},function(p,e,m){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}m.d(e,
"k",function(){return f});p=m(9);e.d="annotation.MetadataChunkSource";e.c="annotation.GeometryChunkSource";e.j="annotation.SubsetGeometryChunkSource";e.f="annotation.reference.add";e.g="annotation.reference.delete";e.b="annotation.commit";e.a="annotation.commit";var f=function(c){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?this:b}k(a,c);return a}(p.i);e.e="annotation/PerspectiveRenderLayer";e.h="annotation/RenderLayer";e.i="annotation/RenderLayer.updateSegmentation"},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){a&&(b.change_spec={change_stack_id:a.changeStackId},a.timeStamp&&(b.change_spec.time_stamp=a.timeStamp),a.skipEquivalences&&(b.change_spec.skip_equivalences=a.skipEquivalences))}function b(a,b){return Object(H.WithParameters)(Object(q.a)()(a),
b)}function d(a,b){Object(K.c)(a,b,"fragmentKey");a.clipBounds&&(a.fragmentIds=n(a.fragmentIds,a.clipBounds));a.fragmentIds=r(a.fragmentIds);return a}function n(a,b){b;if(!a)return a;var c=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var g=O.m.clone([500,500,500]),h=d;var f=g;var q=new y.a;if(!q.tryParseString(h,16))throw Error("Couldn't parse fragmentId "+h+" as hex-encoded Uint64");if(q.high)throw Error("Fragment ids > 2^32 not supported yet");h=Object(O.a)(q);q=
O.m.create();f=O.m.mul(q,h,f);h=O.m.create();O.m.scale(h,g,.5);q=O.m.create();O.m.add(q,f,h);l({center:q,size:g},b)&&c.push(d)}return c}function l(a,b){function c(a,b,c){return[].concat($jscomp.arrayFromIterable(a.map(function(a,d){return a+c*b[d]/2}).values()))}function d(a){return{min:O.m.clone(c(a.center,a.size,-1)),max:O.m.clone(c(a.center,a.size,1))}}a=d(a);b=d(b);return a.min[0]<=b.max[0]&&a.max[0]>=b.min[0]&&a.min[1]<=b.max[1]&&a.max[1]>=b.min[1]&&a.min[2]<=b.max[2]&&a.max[2]>=b.min[2]}function g(a,
b){Object(F.i)(b);var c=Object(F.j)(b,"fragmentKey",F.m);b=Object(F.j)(b,"supervoxelId",F.m);if(c.length!==b.length)throw Error("Expected fragmentKey and supervoxelId arrays to have the same length.");b=b.map(function(a,b){return a+"\x00"+c[b]});a.clipBounds&&(b=n(b,a.clipBounds));a.fragmentIds=r(b)}function r(a){for(var b=[],c=0,d=a.length;c<d;)b.push(JSON.stringify(a.slice(c,c+100))),c+=100;return b}function C(a){var b=a.match(/(-?[0-9]+),(-?[0-9]+),(-?[0-9]+)/);if(null===b)throw Error("Error parsing number triplet: "+
JSON.stringify(a)+".");return O.m.fromValues(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]))}function w(a){return a.volumeId+":"+a.changestack+":"}function h(a,b){if(!b.startsWith(a))throw Error("Received annotation id "+JSON.stringify(b)+" does not have expected prefix of "+JSON.stringify(a)+".");return b.substring(a.length)}function B(a){if(null!=a)return Object(F.a)(a,function(a){return y.a.parseString(""+a,10)})}function I(a,b,c){var d=Object(F.j)(a,"corner",function(a){return C(Object(F.l)(a))}),
g=Object(F.j)(a,"size",function(a){return C(Object(F.l)(a))}),f=Object(F.j)(a,"payload",F.k),l=Object(F.j)(a,"type",F.l),q=Object(F.j)(a,"id",F.l);b=h(b,q);a=Object(F.j)(a,"objectLabels",B);if(void 0!==c&&b!==c)throw Error("Received annotation has unexpected id "+JSON.stringify(q)+".");switch(l){case "LOCATION":if(O.m.equals(g,O.g))return{type:t.b.POINT,id:b,point:d,description:f,segments:a};c=O.m.scale(O.m.create(),g,.5);d=O.m.add(O.m.create(),d,c);return{type:t.b.ELLIPSOID,id:b,center:d,radii:c,
description:f,segments:a};case "LINE":return{type:t.b.LINE,id:b,pointA:d,pointB:O.m.add(O.m.create(),d,g),description:f,segments:a};case "VOLUME":return{type:t.b.AXIS_ALIGNED_BOUNDING_BOX,id:b,pointA:d,pointB:O.m.add(O.m.create(),d,g),description:f,segments:a};default:throw Error("Unknown spatial annotation type: "+JSON.stringify(l)+".");}}function u(a,b,c){Object(F.i)(a);a=Object(F.j)(a,"annotations",function(a){return Object(F.c)([void 0],a,F.i)})[0];return I(a,b,c)}function x(a,b){var c=new t.a,
d=w(a.source.parent.parameters);b.forEach(function(a,b){try{Object(F.i)(a);var g=Object(F.j)(a,"annotations",function(a){return void 0===a?[]:a});if(!Array.isArray(g))throw Error("Expected array, but received "+JSON.stringify(typeof g)+".");for(var h=$jscomp.makeIterator(g),f=h.next();!f.done;f=h.next()){var l=f.value;try{c.add(I(l,d))}catch(Ja){throw Error("Error parsing annotation: "+Ja.message);}}}catch(Ja){throw Error("Error parsing "+jb[b]+" annotations: "+Ja.message);}});a.data=Object.assign(new z.AnnotationGeometryData,
c.serialize())}function J(a){var b=a.indexOf(".");return a.substring(0,b)}function v(a){return Math.round(a[0])+","+Math.round(a[1])+","+Math.round(a[2])}function A(a){var b=a.description||"",c=void 0===a.segments?void 0:a.segments.map(function(a){return a.toString()});switch(a.type){case t.b.LINE:case t.b.AXIS_ALIGNED_BOUNDING_BOX:var d=a.pointA,g=a.pointB,h=O.m.min(O.m.create(),d,g);d=O.m.max(O.m.create(),d,g);d=O.m.subtract(d,d,h);return{type:a.type===t.b.LINE?"LINE":"VOLUME",corner:v(h),size:v(d),
object_labels:c,payload:b};case t.b.POINT:return{type:"LOCATION",corner:v(a.point),size:"0,0,0",object_labels:c,payload:b};case t.b.ELLIPSOID:return h=O.m.subtract(O.m.create(),a.center,a.radii),a=O.m.scale(O.m.create(),a.radii,2),{type:"LOCATION",corner:v(h),size:v(a),object_labels:c,payload:b}}}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"BrainmapsVolumeChunkSource",function(){return ba});m.d(e,"BrainmapsMeshSource",function(){return kb});m.d(e,"BrainmapsSkeletonSource",function(){return P});
m.d(e,"BrainmapsAnnotationSource",function(){return ib});var t=m(41),z=m(40),H=m(2),q=m(83),G=m(86),L=m(88),K=m(17),D=m(43);p=m(25);e=m(18);var E=m(23),Q=m(16),N=m(11),O=m(1),F=m(3),y=m(5);m=m(0);var M=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),R=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,
h=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(f=a[l])h=(3>g?f(h):3<g?f(b,c,h):f(b,c))||h;return 3<g&&h&&Object.defineProperty(b,c,h),h},X=new Map([[L.d.RAW,E.a],[L.d.JPEG,e.a],[L.d.COMPRESSED_SEGMENTATION,p.a]]),ba=function(b){function d(){k(this,d);var a=f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=X.get(a.parameters.encoding);
return a}c(d,b);M(d,[{key:"applyEncodingParams",value:function(a){var b=this.parameters.encoding;switch(b){case L.d.RAW:a.subvolume_format="RAW";break;case L.d.JPEG:a.subvolume_format="SINGLE_IMAGE";a.image_format_options={image_format:"JPEG",jpeg_quality:70};break;case L.d.COMPRESSED_SEGMENTATION:a.subvolume_format="RAW";a.image_format_options={compressed_segmentation_block_size:Object(O.n)(this.spec.compressedSegmentationBlockSize)};break;default:throw Error("Invalid encoding: "+b);}}},{key:"download",
value:function(b,c){var d=this,g=this.parameters,h=this.computeChunkBounds(b),f=b.chunkDataSize;var l="/v1/volumes/"+g.volumeId+"/subvolume:binary";h={geometry:{corner:Object(O.n)(h),size:Object(O.n)(f),scale:g.scaleIndex}};this.applyEncodingParams(h);a(g.changeSpec,h);return Object(G.a)(g.instance,this.credentialsProvider,{method:"POST",payload:JSON.stringify(h),path:l,responseType:"arraybuffer"},c).then(function(a){return d.chunkDecoder(b,a)})}}]);return d}(b(Q.a,L.e));ba=R([Object(m.g)()],ba);
var kb=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.manifestDecoder=void 0!==a.parameters.changeSpec?g:d;var c=a.parameters.changeSpec;c=void 0!==c?"&header.changeStackId="+c.changeStackId+"&return_supervoxel_ids=true":"";a.listFragmentsParams=c;return a}c(b,a);M(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters;return Object(G.a)(d.instance,this.credentialsProvider,{method:"GET",path:"/v1/objects/"+d.volumeId+"/meshes/"+
(d.meshName+":listfragments?object_id="+a.objectId)+this.listFragmentsParams,responseType:"json"},b).then(function(b){return c.manifestDecoder(a,b)})}},{key:"downloadFragment",value:function(a,b){function c(b){for(var c=b.byteLength,e=0,k=new DataView(b);e<c;){if(e+32>c)throw Error("Invalid batch mesh fragment response.");if(void 0!==g.changeSpec){var m=k.getUint32(e,!0);var t=k.getUint32(e+4,!0);t=(new y.a(m,t)).toString()+"\x00"}else t="";e+=8;m=k.getUint32(e,!0);var n=k.getUint32(e+4,!0);e+=8;
if(0!==n)throw Error("Invalid batch mesh fragment response.");if(e+m+8+8>c)throw Error("Invalid batch mesh fragment response.");n=(new TextDecoder).decode(new Uint8Array(b,e,m));t+=n;if(!h.delete(t))throw Error("Received unexpected fragment key: "+JSON.stringify(t)+".");e+=m;m=k.getUint32(e,!0);n=k.getUint32(e+4,!0);e+=8;t=k.getUint32(e,!0);var r=k.getUint32(e+4,!0);e+=8;if(0!==n||0!==r)throw Error("Invalid batch mesh fragment response.");n=e+12*t+12*m;if(n>c)throw Error("Invalid batch mesh fragment response.");
f+=m;l+=3*t;q.push({buffer:b,verticesOffset:e,numVertices:m,indicesOffset:e+12*m,numIndices:3*t});e=n}if(0!==h.size)return d();b=new Float32Array(3*f);c=new Uint32Array(l);k=e=0;m=$jscomp.makeIterator(q);for(t=m.next();!t.done;t=m.next()){t=t.value;b.set(new Float32Array(t.buffer,t.verticesOffset,3*t.numVertices),3*e);n=t.numIndices;r=new Uint32Array(t.buffer,t.indicesOffset,n);Object(N.d)(r,N.b.LITTLE);for(var p=0;p<n;++p)c[k++]=r[p]+e;e+=t.numVertices}Object(N.d)(b,N.b.LITTLE);a.vertexPositions=
b;a.indices=c;a.vertexNormals=Object(K.b)(b,c)}function d(){var d=[];if(void 0!==g.changeSpec)for(var f=$jscomp.makeIterator(h),l=f.next();!l.done;l=f.next()){var q=l.value,k=q.indexOf("\x00");l=q.substring(0,k);q=q.substring(k+1);void 0!==l&&d.push({object_id:l,fragment_keys:[]});d[d.length-1].fragment_keys.push(q)}else d.push({object_id:a.manifestChunk.objectId.toString(),fragment_keys:Array.from(h)});return Object(G.a)(g.instance,e,{method:"POST",path:"/v1/objects/meshes:batch",payload:JSON.stringify({volume_id:g.volumeId,
mesh_name:g.meshName,batches:d}),responseType:"arraybuffer"},b).then(c)}var g=this.parameters,h=new Set(JSON.parse(a.fragmentId)),f=0,l=0,q=[],e=this.credentialsProvider;return d()}}]);return b}(b(K.a,L.b));kb=R([Object(m.g)()],kb);var P=function(b){function d(){k(this,d);return f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);M(d,[{key:"download",value:function(b,c){var d=this.parameters,g={object_id:""+b.objectId},h="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/skeleton:binary";
a(d.changeSpec,g);return Object(G.a)(d.instance,this.credentialsProvider,{method:"POST",path:h,payload:JSON.stringify(g),responseType:"arraybuffer"},c).then(function(a){var c=new DataView(a),d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");var g=c.getUint32(8,!0);if(0!==c.getUint32(12,!0))throw Error("The number of edges should not exceed 2^32-1.");Object(D.b)(b,a,N.b.LITTLE,16,d,void 0,g)})}}]);return d}(b(D.a,L.c));P=R([Object(m.g)()],
P);var jb=["LOCATION","LINE","VOLUME"],ib=function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);M(b,[{key:"downloadGeometry",value:function(a,b){var c=this,d=this.parameters;return Promise.all(jb.map(function(a){return Object(G.a)(d.instance,c.credentialsProvider,{method:"POST",path:"/v1/changes/"+d.volumeId+"/"+d.changestack+"/spatials:get",payload:JSON.stringify({type:a,ignore_payload:!0}),responseType:"json"},b)})).then(function(b){x(a,
b)})}},{key:"downloadSegmentFilteredGeometry",value:function(a,b){var c=this,d=this.parameters;return Promise.all(jb.map(function(g){return Object(G.a)(d.instance,c.credentialsProvider,{method:"POST",path:"/v1/changes/"+d.volumeId+"/"+d.changestack+"/spatials:get",payload:JSON.stringify({type:g,object_labels:[a.objectId.toString()],ignore_payload:!0}),responseType:"json"},b)})).then(function(b){x(a,b)})}},{key:"downloadMetadata",value:function(a,b){var c=this.parameters,d=a.key;return Object(G.a)(c.instance,
this.credentialsProvider,{method:"POST",path:"/v1/changes/"+c.volumeId+"/"+c.changestack+"/spatials:get",payload:JSON.stringify({type:J(d),id:c.volumeId+":"+c.changestack+":"+d}),responseType:"json"},b).then(function(b){a.annotation=u(b,w(c),d)},function(){a.annotation=null})}},{key:"add",value:function(a){var b=this,c=this.parameters;a=A(a);return Object(G.a)(c.instance,this.credentialsProvider,{method:"POST",path:"/v1/changes/"+c.volumeId+"/"+c.changestack+"/spatials:push",payload:JSON.stringify({annotations:[a]}),
responseType:"json"}).then(function(a){Object(F.i)(a);a=Object(F.j)(a,"ids",F.m);if(1!==a.length)throw Error("Expected list of 1 id, but received "+JSON.stringify(a)+".");var c=w(b.parameters);return h(c,a[0])})}},{key:"update",value:function(a,b){var c=this.parameters;b=A(b);b.id=c.volumeId+":"+c.changestack+":"+a;return Object(G.a)(c.instance,this.credentialsProvider,{method:"POST",path:"/v1/changes/"+c.volumeId+"/"+c.changestack+"/spatials:push",payload:JSON.stringify({annotations:[b]}),responseType:"json"})}},
{key:"delete",value:function(a){var b=this.parameters;return Object(G.a)(b.instance,this.credentialsProvider,{method:"POST",path:"/v1/changes/"+b.volumeId+"/"+b.changestack+"/spatials:delete",payload:JSON.stringify({type:J(a),ids:[b.volumeId+":"+b.changestack+":"+a]}),responseType:"json"})}}]);return b}(b(z.AnnotationSource,L.a));ib=R([Object(m.g)()],ib)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.a=function(){return function(a){return function(a){function b(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];k(this,
b);var g;d=f(this,(g=b.__proto__||Object.getPrototypeOf(b)).call.apply(g,[].concat([this],$jscomp.arrayFromIterable(c))));d.credentialsProvider=d.rpc.getRef(c[1].credentialsProvider);return d}c(b,a);return b}(a)}};var a=m(84),b=m(85);p=m(0);e=this&&this.__decorate||function(a,b,c,g){var d=arguments.length,f=3>d?b:null===g?g=Object.getOwnPropertyDescriptor(b,c):g,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,g);else for(var h=a.length-1;0<=h;h--)if(l=
a[h])f=(3>d?l(f):3<d?l(b,c,f):l(b,c))||f;return 3<d&&f&&Object.defineProperty(b,c,f),f};m=function(d){function e(){k(this,e);var c=f(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));c.get=Object(a.a)(function(a,d){return c.rpc.promiseInvoke(b.a,{providerId:c.rpcId,invalidCredentials:a},d)});return c}c(e,d);return e}(p.c);m=e([Object(p.g)(b.b)],m)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.a=function(b){var c,d,f;return function(g,h){if(void 0!==d&&(void 0===c||void 0===g||c.generation!==g.generation))return void 0===
c&&f.addConsumer(h),d;c=void 0;f=new a.c;return d=b(g,f).then(function(a){c=a;f=void 0;return a},function(a){f.isCanceled&&(d=f=void 0);throw a;})}};var a=m(12);p=m(13);var b=m(31),d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();(function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}c(b,a);return b})(p.a);var n=function(){function a(){k(this,a);this.providers=new Map}d(a,[{key:"register",value:function(a,b){this.providers.set(a,b)}},{key:"getCredentialsProvider",value:function(a,b){var c=this.providers.get(a);if(void 0===c)throw Error("No registered credentials provider: "+JSON.stringify(a));return c(b)}}]);return a}();(function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new n))}c(b,a);d(b,[{key:"register",value:function(a,
b){this.base.register(a,b)}}]);return b})(function(a){function g(a){k(this,g);var c=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));c.base=a;c.memoize=new b.a;return c}c(g,a);d(g,[{key:"getCredentialsProvider",value:function(a,b){var c=this;return this.memoize.get({key:a,parameters:b},function(){return c.registerDisposer(c.base.getCredentialsProvider(a,b).addRef())})}}]);return g}(p.a))},function(p,e,m){e.b="CredentialsProvider";e.a="CredentialsProvider.get"},function(p,e,m){e.a=function(c,
a,b,d){d=void 0===d?k.e:d;var e=void 0;return new Promise(function(l,g){function m(k){null!==e&&(e=Object(f.c)(c.serverUrls,b.path,b.method),e.responseType=b.responseType,e.setRequestHeader("Authorization",k.credentials.tokenType+" "+k.credentials.accessToken),e.onloadend=function(){if(null!==e){var b=this.status;200<=b&&300>b?(d.remove(n),l(this.response)):401===b?a.get(k,d).then(m):504===b||503===b?a.get(void 0,d).then(m):(d.remove(n),g(f.a.fromXhr(this)))}},e.send(b.payload))}var n=function(){var a=
e;e=null;null!=a&&a.abort();g(k.a)};d.add(n);a.get(void 0,d).then(m)})};var k=m(12),f=m(15)},function(p,e,m){e.a=function(e){for(var f=0,c=e.length,a=0;a<c;++a)f=31*f+e.charCodeAt(a)|0;return f}},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"d",function(){return c});m.d(e,"e",function(){return a});m.d(e,"b",function(){return b});m.d(e,"c",function(){return d});m.d(e,"a",function(){return n});var c;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(c||(c={}));var a=function g(){f(this,g)};a.RPC_ID="brainmaps/VolumeChunkSource";var b=function r(){f(this,r)};b.RPC_ID=
"brainmaps/MeshSource";var d=function(a){function b(){f(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(b,a);return b}(b);d.RPC_ID="brainmaps/SkeletonSource";var n=function C(){f(this,C)};n.RPC_ID="brainmaps/Annotation"},function(p,e,m){e.b="mesh/MeshLayer";e.a="mesh/FragmentSource"},function(p,e,m){function k(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=m(91),c=m(3),a=m(8),b=m(5);p=m(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,
d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=function C(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return C(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,f=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=
Reflect.decorate(a,b,c,d);else for(var e=a.length-1;0<=e;e--)if(h=a[e])f=(3>g?h(f):3<g?h(b,c,f):h(b,c))||f;return 3<g&&f&&Object.defineProperty(b,c,f),f};m=function(g){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var b=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.disjointSets=new f.a;
b.changed=new a.a;return b}k(e,g);d(e,[{key:"disposed",value:function(){this.changed=this.disjointSets=void 0;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disposed",this).call(this)}},{key:"link",value:function(a,b){if(this.disjointSets.link(a,b)){var c=this.rpc;c&&c.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high});this.changed.dispatch()}}},{key:"get",value:function(a){return this.disjointSets.get(a)}},{key:"clear",value:function(){if(this.disjointSets.clear()){var a=
this.rpc;a&&a.invoke("DisjointUint64Sets.clear",{id:this.rpcId});this.changed.dispatch()}}},{key:"setElements",value:function(a){return this.disjointSets.setElements(a)}},{key:"toJSON",value:function(){return this.disjointSets.toJSON()}},{key:"restoreState",value:function(a){var d=this;this.clear();if(void 0!==a){var g=[new b.a,new b.a];Object(c.a)(a,function(a){Object(c.a)(a,function(a,b){g[b%2].parseString(String(a),10);0!==b&&d.link(g[0],g[1])})})}}},{key:"size",get:function(){return this.disjointSets.size}}],
[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return e}(p.c);m=e([Object(p.g)("DisjointUint64Sets")],m);var l=new b.a,g=new b.a;Object(p.f)("DisjointUint64Sets.add",function(a){var b=this.get(a.id);l.low=a.al;l.high=a.ah;g.low=a.bl;g.high=a.bh;b.disjointSets.link(l,g)&&b.changed.dispatch()});Object(p.f)("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.disjointSets.clear()&&a.changed.dispatch()})},function(p,e,m){function k(a){for(var b=
a,c=a[d];c!==a;)a=c,c=a[d];for(a=b[d];c!==a;)b[d]=c,b=a,a=b[d];return c}function f(a){function b(b,f){for(;;)switch(c){case 0:g=!0,d=a;case 1:if(!g&&d===a){c=3;break}c=4;return{value:d,done:!1};case 4:if(void 0===f){c=5;break}c=-1;throw f;case 5:d=d[n];case 2:g=!1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,g,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
f[Symbol.iterator]=function(){return this};return f}m.d(e,"a",function(){return r});var c=m(5),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();var b=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var d=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var n=Symbol("disjoint_sets:next");
$jscomp.initSymbol();var l=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var g=Symbol("disjoint_sets:min"),r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0}$jscomp.initSymbol();$jscomp.initSymbolIterator();a(e,[{key:"get",value:function(a){var b=this.map.get(a.toString());return void 0===b?a:k(b)[g]}},{key:"isMinElement",value:function(a){var b=this.get(a);return b===a||c.a.equal(b,a)}},{key:"makeSet",
value:function(a){var c=a.toString(),f=this.map,e=f.get(c);return void 0===e?(a=e=a.clone(),a[d]=a,a[b]=0,a[n]=a[l]=a,e[g]=e,f.set(c,e),e):k(e)}},{key:"link",value:function(a,f){a=this.makeSet(a);f=this.makeSet(f);if(a===f)return!1;this.generation++;var e=a;var h=f,k=e[b],m=h[b];k>m?h[d]=e:(e[d]=h,k===m&&(h[b]=m+1),e=h);h=a;k=f;m=h[l];var p=k[l];k[l]=m;m[n]=k;h[l]=p;p[n]=h;a=a[g];f=f[g];e[g]=c.a.less(a,f)?a:f;return!0}},{key:"setElements",value:function(a){function b(b,h){for(;;)switch(c){case 0:l=
a.toString();e=k.map.get(l);if(void 0!==e){c=1;break}c=3;return{value:a,done:!1};case 3:if(void 0===h){c=4;break}c=-1;throw h;case 4:c=2;break;case 1:g=$jscomp.makeIterator(f(e));case 5:if((d=g.next(b)).done){c=6;break}c=7;return{value:d.value,done:!1};case 7:if(void 0===h){c=8;break}c=-1;throw h;case 8:c=5;break;case 6:case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,g,e,l,k=this,m={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;++this.generation;a.clear();return!0}},{key:"mappings",value:function(a){function b(b,h){for(;;)switch(c){case 0:a=void 0===a?Array(2):a,e=$jscomp.makeIterator(l.map.values()),f=e.next();case 1:if(f.done){c=3;break}d=f.value;a[0]=d;a[1]=k(d)[g];c=4;return{value:a,done:!1};case 4:if(void 0===h){c=5;break}c=-1;throw h;case 5:case 2:f=e.next();c=1;
break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,f,e,l=this,m={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this.map.values()),g=b.next();!g.done;g=b.next()){var e=g.value;if(e[d]===e){g=
[];e=$jscomp.makeIterator(f(e));for(var l=e.next();!l.done;l=e.next())g.push(l.value);g.sort(c.a.compare);a.push(g)}}a.sort(function(a,b){return c.a.compare(a[0],b[0])});return a.map(function(a){return a.map(function(a){return a.toString()})})}},{key:"size",get:function(){return this.map.size}}]);return e}()},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=m(93),c=m(8);p=m(0);var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function l(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,
b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return l(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,f=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(e=a[l])f=(3>g?e(f):3<g?e(b,c,f):e(b,c))||f;return 3<g&&f&&Object.defineProperty(b,c,f),f};
m=d=function(e){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var a=(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.hashTable=new f.a;a.changed=new c.b;return a}k(g,e);$jscomp.initSymbol();$jscomp.initSymbolIterator();a(g,[{key:"disposed",value:function(){b(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),
"disposed",this).call(this);this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,!0)}}},{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=
this.rpc;b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,!1)}}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),c=b.next();!c.done;c=b.next())a.push(c.value.toString());a.sort();return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=
new d;b.initializeCounterpart(a);return b}}]);return g}(p.c);m=d=e([Object(p.g)("Uint64Set")],m);Object(p.f)("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&b.changed.dispatch()});Object(p.f)("Uint64Set.delete",function(a){var b=this.get(a.id);b.delete_(a.value)&&b.changed.dispatch()});Object(p.f)("Uint64Set.clear",function(a){a=this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()});var d},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"a",function(){return w});var a=
m(94),b=m(5),d=function J(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return J(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),
l=0,g=0,r=0,C=0;p=function(){function d(a){a=void 0===a?d.generateHashFunctions(3):a;c(this,d);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;this.hashFunctions=a;this.allocate(4,1)}n(d,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=d.generateHashFunctions(a);this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",
value:function(a){for(var b=this.hashFunctions.length,c=Array(b),d=0;d<b;++d)c[d]=this.getHash(d,this.emptyLow,this.emptyHigh);d=this.mungedEmptyKey;if(-1===d)a:for(;;){d=16777216*Math.random()>>>0;for(var g=0;g<b;++g)for(var f=this.getHash(g,d,d),e=0;e<b;++e)if(c[e]===f)continue a;this.mungedEmptyKey=d;break}g=this.table;f=this.emptyLow;e=this.emptyHigh;for(var h=0;h<b;++h){var l=c[h];g[l]===f&&g[l+1]===e&&(g[l]=d,g[l+1]=d)}try{a(g)}finally{for(a=0;a<b;++a)h=c[a],g[h]===d&&g[h+1]===d&&(g[h]=f,g[h+
1]=e)}}},{key:"getHash",value:function(a,b,c){a=this.hashFunctions[a];var d=this.width,g=this.height;d=a[0].compute(b,c)%d;b=a[1].compute(b,c)%g;return this.entryStride*(b*this.width+d)}},{key:"keys",value:function(a){function c(c,q){for(;;)switch(d){case 0:a=void 0===a?new b.a:a,r=v,p=r.emptyLow,n=r.emptyHigh,m=r.entryStride,k=v,l=k.table,h=0,e=l.length;case 1:if(!(h<e)){d=3;break}f=l[h];g=l[h+1];if(f===p&&g===n){d=4;break}a.low=f;a.high=g;d=5;return{value:a,done:!1};case 5:if(void 0===q){d=6;break}d=
-1;throw q;case 6:case 4:case 2:h+=m;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,g,f,e,h,l,k,m,n,p,r,v=this,u={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();u[Symbol.iterator]=function(){return this};return u}},{key:"indexOfPair",value:function(a,b){var c=this.table,d=this.emptyHigh;if(a===this.emptyLow&&b===d)return-1;d=0;for(var g=this.hashFunctions.length;d<
g;++d){var f=this.getHash(d,a,b);if(c[f]===a&&c[f+1]===b)return f}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,c=this.table,d=this.entryStride,g,f;g=4294967296*Math.random()>>>0,f=4294967296*Math.random()>>>0,g===a&&f===b||this.hasPair(g,f););this.emptyLow=g;this.emptyHigh=f;for(var e=0,h=c.length;e<h;e+=d)c[e]===a&&c[e+1]===b&&(c[e]=g,c[e+1]=f)}},{key:"has",value:function(a){return-1!==
this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},{key:"clearTable",value:function(){for(var a=this.table,b=this.entryStride,c=this.emptyLow,d=this.emptyHigh,g=a.length,f=0;f<g;f+=b)a[f]=c,a[f+1]=d}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();
return!0}},{key:"swapPending",value:function(a,b){var c=l,d=g;this.storePending(a,b);a[b]=c;a[b+1]=d}},{key:"storePending",value:function(a,b){l=a[b];g=a[b+1]}},{key:"backupPending",value:function(){r=l;C=g}},{key:"restorePending",value:function(){l=r;g=C}},{key:"tryToInsert",value:function(){for(var a=0,b=this.emptyLow,c=this.emptyHigh,d=this.maxAttempts,f=this.table,e=this.hashFunctions.length,h=Math.floor(Math.random()*e);;){var k=this.getHash(h,l,g);this.swapPending(f,k);if(l===b&&g===c)return!0;
if(++a===d)break;h=(h+Math.floor(Math.random()*(e-1))+1)%e}return!1}},{key:"allocate",value:function(a,b){var c=a*b;this.width=a;this.height=b;this.table=new Uint32Array(c*this.entryStride);this.maxAttempts=c;this.clearTable();this.capacity=c*this.loadFactor;this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,b,c){this.allocate(b,c);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;c=this.emptyHigh;for(var d=this.entryStride,g=0,f=a.length;g<f;g+=d){var e=a[g+1];if(a[g]!==b||
e!==c)if(this.storePending(a,g),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,c=this.width,d=this.height,g=this.maxWidth,f=this.maxHeight;;){var e=c*d;c=Math.min(g,Math.ceil(a/this.height));c*d<a&&(d=Math.min(f,Math.ceil(a/c)));var h=c*d;if(h<a&&h===e)throw Error("Maximum table size exceeded");for(e=0;e<this.maxRehashAttempts;++e)if(this.rehash(b,c,d))return;a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;l===
this.emptyLow&&g===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),this.restorePending()}}],[{key:"generateHashFunctions",value:function(b){b=void 0===b?3:b;for(var c=[],d=0;d<b;++d){var g=[a.a.generate(),a.a.generate()];c.push(g)}return c}}]);return d}();var w=function(a){function b(){c(this,
b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();n(b,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;l=b;g=a;this.insertInternal();return!0}},{key:Symbol.iterator,value:function(){return this.keys()}}]);return b}(p);w.prototype.entryStride=2;var h=0,B=0,I=0,u=0;(function(a){function e(){c(this,e);return k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}f(e,a);
$jscomp.initSymbol();$jscomp.initSymbolIterator();n(e,[{key:"set",value:function(a,b){var c=a.low;a=a.high;if(this.hasPair(c,a))return!1;l=c;g=a;h=b.low;B=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){a=this.indexOf(a);if(-1===a)return!1;var c=this.table;b.low=c[a+2];b.high=c[a+3];return!0}},{key:"swapPending",value:function(a,b){var c=h,g=B;d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"swapPending",this).call(this,a,b);a[b+2]=c;a[b+3]=g}},{key:"storePending",
value:function(a,b){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"storePending",this).call(this,a,b);h=a[b+2];B=a[b+3]}},{key:"backupPending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"backupPending",this).call(this);I=h;u=B}},{key:"restorePending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"restorePending",this).call(this);h=I;B=u}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(a){function c(c,
q){for(;;)switch(d){case 0:a=void 0===a?[new b.a,new b.a]:a,M=R,y=M.emptyLow,u=M.emptyHigh,r=M.entryStride,p=R,n=p.table,m=$jscomp.makeIterator(a),k=m.next().value,l=m.next().value,h=0,e=n.length;case 1:if(!(h<e)){d=3;break}f=n[h];g=n[h+1];if(f===y&&g===u){d=4;break}k.low=f;k.high=g;l.low=n[h+2];l.high=n[h+3];d=5;return{value:a,done:!1};case 5:if(void 0===q){d=6;break}d=-1;throw q;case 6:case 4:case 2:h+=r;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,g,f,e,h,l,k,m,n,p,r,u,y,
M,R=this,v={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();v[Symbol.iterator]=function(){return this};return v}}]);return e})(p).prototype.entryStride=4},function(p,e,m){m.d(e,"a",function(){return f});var k=function(){function c(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(a,
b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a,b,d,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a0=a;this.a1=b;this.b=d;this.c=f}k(c,[{key:"computeDotProduct",value:function(a,b){var c=this.a0,f=this.a1;return c[0]*(a&255)+c[1]*(a>>8&255)+c[2]*(a>>16&255)+c[3]*(a>>24&255)+(f[0]*(b&255)+f[1]*(b>>8&255)+f[2]*(b>>16&255)+f[3]*(b>>24&255))}},{key:"compute",value:function(a,b){var c=this.b,f=this.c;a=this.computeDotProduct(a,b);return(a+
a*a%4093*f+c)%4093}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), "+("Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")")}}],[{key:"generate",value:function(){function a(){return Math.floor(4093*Math.random())}return new c(Float32Array.of(a(),a(),a(),a()),Float32Array.of(a(),a(),a(),a()),a(),a())}}]);return c}()},function(p,e,m){e.a="skeleton/SkeletonLayer"},function(p,e,m){function k(c,e,k,m,h,p,I,u){var g=h[0],r=h[1],v=h[2];h=m[0];var w=m[1];m=m[2];
var t=k[0],z=k[1],C=k[2];C-=z*r;z-=t*g;if(0===g*r*v)return[0,0];k=h*w*m+31;if(void 0===a||a.length<k)a=new Uint32Array(k),b=new Uint32Array(1*k),d=new Uint32Array(1*k),n=new Uint32Array(k),l=new Uint32Array(k);k=a.subarray(0,k);k.fill(0);for(var q=b,G=d,L=n,K=l,D=0,E=c[e]+1>>>0,B=0,N=h-g,O=h*w-h*r,F=0;F<v;++F,e+=C,B+=O)for(var y=0;y<r;++y,e+=z,B+=N)for(var M=0;M<g;++M,e+=t){var R=c[e];R!==E&&(E=q[1*D]=R,L[D]=D++);k[B++]=D}L.subarray(0,D).sort(function(a,b){return q[a]-q[b]});c=-1;g=q[1*L[0]]+1>>>
0;for(r=0;r<D;++r)v=L[r],t=q[1*v],t!==g&&(++c,g=G[1*c]=t),K[v+1]=c;++c;return Object(f.c)(u,p,I,h*w*m,c,G,k,K,1)}e.a=function(a,b,d,e,h,l){h=void 0===h?0:h;l=void 0===l?Object(c.a)(e,1):l;return Object(f.b)(a,b,d,e,h,l,k)};var f=m(22),c=m(20),a,b,d,n,l},function(p,e,m){function k(c,e,k,m,h,p,I,u){var g=h[0],r=h[1],v=h[2];h=m[0];var w=m[1];m=m[2];var t=k[0],z=k[1],H=k[2];H-=z*r;z-=t*g;if(0===g*r*v)return[0,0];k=h*w*m+31;if(void 0===a||a.length<k)a=new Uint32Array(k),b=new Uint32Array(2*k),d=new Uint32Array(2*
k),n=new Uint32Array(k),l=new Uint32Array(k);k=a.subarray(0,k);k.fill(0);for(var q=b,G=d,L=n,K=l,D=0,C=c[e]+1>>>0,B=0,N=0,O=h-g,F=h*w-h*r,y=0;y<v;++y,e+=H,N+=F)for(var M=0;M<r;++M,e+=z,N+=O)for(var R=0;R<g;++R,e+=t){var X=c[e],ba=c[e+1];if(X!==C||ba!==B)C=q[2*D]=X,B=q[2*D+1]=ba,L[D]=D++;k[N++]=D}L.subarray(0,D).sort(function(a,b){var c=q[2*a],d=q[2*b];return q[2*a+1]-q[2*b+1]||c-d});c=-1;g=q[2*L[0]]+1>>>0;for(r=z=0;r<D;++r){v=L[r];H=2*v;t=q[H];H=q[H+1];if(t!==g||H!==z)++c,z=2*c,g=G[z]=t,z=G[z+1]=
H;K[v+1]=c}++c;return Object(f.c)(u,p,I,h*w*m,c,G,k,K,2)}e.a=function(a,b,d,e,h,l){h=void 0===h?0:h;l=void 0===l?Object(c.a)(e,2):l;return Object(f.b)(a,b,d,e,h,l,k)};var f=m(22),c=m(20),a,b,d,n,l},function(p,e,m){m.d(e,"a",function(){return f});var k=function(){function c(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a){a=
void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Uint32Array(a)}k(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Uint32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+
a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(p,e,m){e.a=function(a,b,d){var e=new k.JpegDecoder;e.parse(a);if(e.width*e.height!==b[0]*b[1]*b[2])throw Error("JPEG data does not have the expected dimensions: "+("width="+e.width+", height="+e.height+", ")+("chunkDataSize="+c.m.str(b)));if(e.numComponents!==
d)throw Error("JPEG data does not have the expected number of components: "+("components="+e.numComponents+", expected="+d));if(1===e.numComponents)return e.getData(e.width,e.height,!1);if(3===e.numComponents)return a=e.getData(e.width,e.height,!1),Object(f.c)(a,e.width*e.height,3);throw Error("JPEG data has an unsupported number of components: components="+e.numComponents);};var k=m(100);m.n(k);var f=m(20),c=m(1)},function(p,e,m){function k(c,a){if(0===c.indexOf("data:")){var b=c.indexOf("base64,")+
7;c=atob(c.substring(b));b=new Uint8Array(c.length);for(var d=c.length-1;0<=d;d--)b[d]=c.charCodeAt(d);a(b.buffer)}else{var f=new XMLHttpRequest;f.open("GET",c,!0);f.responseType="arraybuffer";f.onload=function(){a(f.response)};f.send(null)}}e=function(){function c(){this._src=null;this._parser=new f.JpegImage;this.onload=null}c.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},load:function(a){this._src=
a;k(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,b){return this._parser.getData(a,b,!1)},copyToImageData:function(a){if(2===this._parser.numComponents||4<this._parser.numComponents)throw Error("Unsupported amount of components");var b=a.width,c=a.height,f=b*c*4;a=a.data;if(1===this._parser.numComponents){var e=this._parser.getData(b,c,!1);for(c=b=0;b<f;){var g=e[c++];a[b++]=g;a[b++]=g;a[b++]=g;a[b++]=
255}}else for(e=this._parser.getData(b,c,!0),c=b=0;b<f;)a[b++]=e[c++],a[b++]=e[c++],a[b++]=e[c++],a[b++]=255}};return c}();var f;(function(c){function a(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function b(a,b){return a[b]<<8|a[b+1]}function d(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function f(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var e=function(){function a(){}function b(a,b){for(var c=0,d=[],g,f,e=16;0<e&&!a[e-1];)e--;d.push({children:[],
index:0});var h=d[0],k;for(g=0;g<e;g++){for(f=0;f<a[g];f++){h=d.pop();for(h.children[h.index]=b[c];0<h.index;)h=d.pop();h.index++;for(d.push(h);d.length<=g;)d.push(k={children:[],index:0}),h.children[h.index]=k.children,h=k;c++}g+1<e&&(d.push(k={children:[],index:0}),h.children[h.index]=k.children,h=k)}return d[0].children}function c(a,b,c,d,g,e,h,k,l){function q(){if(0<K)return K--,v>>K&1;v=a[b++];if(255===v){var c=a[b++];if(c)throw"unexpected marker: "+(v<<8|c).toString(16);}K=7;return v>>>7}function m(a){for(;;){a=
a[q()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function t(a){for(var b=0;0<a;)b=b<<1|q(),a--;return b}function n(a){if(1===a)return 1===q()?1:-1;var b=t(a);return b>=1<<a-1?b:b+(-1<<a)+1}function y(a,b){var c=m(a.huffmanTableDC);c=0===c?0:n(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var d=m(a.huffmanTableAC),g=d&15;d>>=4;if(0===g){if(15>d)break;c+=16}else c+=d,a.blockData[b+f[c]]=n(g),c++}}function p(a,b){var c=m(a.huffmanTableDC);c=0===c?0:n(c)<<l;
a.blockData[b]=a.pred+=c}function r(a,b){a.blockData[b]|=q()<<l}function L(a,b){if(0<D)D--;else for(var c=e;c<=h;){var d=m(a.huffmanTableAC),g=d&15;d>>=4;if(0===g){if(15>d){D=t(d)+(1<<d)-1;break}c+=16}else c+=d,a.blockData[b+f[c]]=n(g)*(1<<l),c++}}function G(a,b){for(var c=e,d=0,g;c<=h;){g=f[c];switch(w){case 0:d=m(a.huffmanTableAC);g=d&15;d>>=4;if(0===g)15>d?(D=t(d)+(1<<d),w=4):(d=16,w=1);else{if(1!==g)throw"invalid ACn encoding";x=n(g);w=d?2:3}continue;case 1:case 2:a.blockData[b+g]?a.blockData[b+
g]+=q()<<l:(d--,0===d&&(w=2===w?3:0));break;case 3:a.blockData[b+g]?a.blockData[b+g]+=q()<<l:(a.blockData[b+g]=x<<l,w=0);break;case 4:a.blockData[b+g]&&(a.blockData[b+g]+=q()<<l)}c++}4===w&&(D--,0===D&&(w=0))}var z=c.mcusPerLine,u=b,v=0,K=0,D=0,w=0,x,A=d.length,C,H,E,J;k=c.progressive?0===e?0===k?p:r:0===k?L:G:y;var B=0;c=1===A?d[0].blocksPerLine*d[0].blocksPerColumn:z*c.mcusPerColumn;g||(g=c);for(var I,Ja;B<c;){for(C=0;C<A;C++)d[C].pred=0;D=0;if(1===A){var Z=d[0];for(J=0;J<g;J++)k(Z,64*((Z.blocksPerLine+
1)*(B/Z.blocksPerLine|0)+B%Z.blocksPerLine)),B++}else for(J=0;J<g;J++){for(C=0;C<A;C++)for(Z=d[C],I=Z.h,Ja=Z.v,H=0;H<Ja;H++)for(E=0;E<I;E++)k(Z,64*((Z.blocksPerLine+1)*((B/z|0)*Z.v+H)+(B%z*Z.h+E)));B++}K=0;Z=a[b]<<8|a[b+1];if(65280>=Z)throw"marker was not found";if(65488<=Z&&65495>=Z)b+=2;else break}return b-u}function d(a,b){a=b.blocksPerLine;for(var c=b.blocksPerColumn,d=new Int16Array(64),g=0;g<c;g++)for(var f=0;f<a;f++){for(var e,h,k,l,m,t,n,y,p,r,z,u,v=64*((b.blocksPerLine+1)*g+f),P=d,w=b.quantizationTable,
x=b.blockData,A=0;64>A;A+=8)e=x[v+A],y=x[v+A+1],n=x[v+A+2],t=x[v+A+3],m=x[v+A+4],l=x[v+A+5],k=x[v+A+6],h=x[v+A+7],e*=w[A],0===(y|n|t|m|l|k|h)?(e=5793*e+512>>10,P[A]=e,P[A+1]=e,P[A+2]=e,P[A+3]=e,P[A+4]=e,P[A+5]=e,P[A+6]=e,P[A+7]=e):(y*=w[A+1],n*=w[A+2],t*=w[A+3],m*=w[A+4],l*=w[A+5],k*=w[A+6],h*=w[A+7],u=5793*e+128>>8,z=5793*m+128>>8,r=n,p=k,m=2896*(y-h)+128>>8,h=2896*(y+h)+128>>8,t<<=4,l<<=4,u=u+z+1>>1,z=u-z,e=3784*r+1567*p+128>>8,r=1567*r-3784*p+128>>8,p=e,m=m+l+1>>1,l=m-l,h=h+t+1>>1,t=h-t,u=u+p+
1>>1,p=u-p,z=z+r+1>>1,r=z-r,e=2276*m+3406*h+2048>>12,m=3406*m-2276*h+2048>>12,h=e,e=799*t+4017*l+2048>>12,t=4017*t-799*l+2048>>12,l=e,P[A]=u+h,P[A+7]=u-h,P[A+1]=z+l,P[A+6]=z-l,P[A+2]=r+t,P[A+5]=r-t,P[A+3]=p+m,P[A+4]=p-m);for(w=0;8>w;++w)e=P[w],y=P[w+8],n=P[w+16],t=P[w+24],m=P[w+32],l=P[w+40],k=P[w+48],h=P[w+56],0===(y|n|t|m|l|k|h)?(e=5793*e+8192>>14,e=-2040>e?0:2024<=e?255:e+2056>>4,x[v+w]=e,x[v+w+8]=e,x[v+w+16]=e,x[v+w+24]=e,x[v+w+32]=e,x[v+w+40]=e,x[v+w+48]=e,x[v+w+56]=e):(u=5793*e+2048>>12,z=5793*
m+2048>>12,r=n,p=k,m=2896*(y-h)+2048>>12,h=2896*(y+h)+2048>>12,u=(u+z+1>>1)+4112,z=u-z,e=3784*r+1567*p+2048>>12,r=1567*r-3784*p+2048>>12,p=e,m=m+l+1>>1,l=m-l,h=h+t+1>>1,t=h-t,u=u+p+1>>1,p=u-p,z=z+r+1>>1,r=z-r,e=2276*m+3406*h+2048>>12,m=3406*m-2276*h+2048>>12,h=e,e=799*t+4017*l+2048>>12,t=4017*t-799*l+2048>>12,l=e,e=u+h,h=u-h,y=z+l,k=z-l,n=r+t,l=r-t,t=p+m,m=p-m,e=16>e?0:4080<=e?255:e>>4,y=16>y?0:4080<=y?255:y>>4,n=16>n?0:4080<=n?255:n>>4,t=16>t?0:4080<=t?255:t>>4,m=16>m?0:4080<=m?255:m>>4,l=16>l?0:
4080<=l?255:l>>4,k=16>k?0:4080<=k?255:k>>4,h=16>h?0:4080<=h?255:h>>4,x[v+w]=e,x[v+w+8]=y,x[v+w+16]=n,x[v+w+24]=t,x[v+w+32]=m,x[v+w+40]=l,x[v+w+48]=k,x[v+w+56]=h)}return b.blockData}function g(a){return 0>=a?0:255<=a?255:a}var f=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function g(){var b=a[l]<<8|a[l+1];l+=2;return b}
function e(){var b=g();b=a.subarray(l,l+b-2);l+=b.length;return b}function h(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){P=a.components[d];var g=Math.ceil(Math.ceil(a.samplesPerLine/8)*P.h/a.maxH),e=Math.ceil(Math.ceil(a.scanLines/8)*P.v/a.maxV);P.blockData=new Int16Array(64*c*P.v*(b*P.h+1));P.blocksPerLine=g;P.blocksPerColumn=e}a.mcusPerLine=b;a.mcusPerColumn=c}var l=0,k=null,m=null,t=[],n=[],p=[];var r=g();if(65496!==r)throw"SOI not found";
for(r=g();65497!==r;){switch(r){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var u=e();65504===r&&74===u[0]&&70===u[1]&&73===u[2]&&70===u[3]&&0===u[4]&&(k={version:{major:u[5],minor:u[6]},densityUnits:u[7],xDensity:u[8]<<8|u[9],yDensity:u[10]<<8|u[11],thumbWidth:u[12],thumbHeight:u[13],thumbData:u.subarray(14,14+3*u[12]*u[13])});65518===r&&65===u[0]&&100===
u[1]&&111===u[2]&&98===u[3]&&101===u[4]&&0===u[5]&&(m={version:u[6],flags0:u[7]<<8|u[8],flags1:u[9]<<8|u[10],transformCode:u[11]});break;case 65499:r=g()+l-2;for(var v;l<r;){var y=a[l++],M=new Uint16Array(64);if(0===y>>4)for(u=0;64>u;u++)v=f[u],M[v]=a[l++];else if(1===y>>4)for(u=0;64>u;u++)v=f[u],M[v]=g();else throw"DQT: invalid table spec";t[y&15]=M}break;case 65472:case 65473:case 65474:if(w)throw"Only single frame JPEGs supported";g();var w={};w.extended=65473===r;w.progressive=65474===r;w.precision=
a[l++];w.scanLines=g();w.samplesPerLine=g();w.components=[];w.componentIds={};u=a[l++];for(r=M=y=0;r<u;r++){v=a[l];var X=a[l+1]>>4;var ba=a[l+1]&15;y<X&&(y=X);M<ba&&(M=ba);X=w.components.push({h:X,v:ba,quantizationTable:t[a[l+2]]});w.componentIds[v]=X-1;l+=3}w.maxH=y;w.maxV=M;h(w);break;case 65476:v=g();for(r=2;r<v;){y=a[l++];M=new Uint8Array(16);for(u=X=0;16>u;u++,l++)X+=M[u]=a[l];ba=new Uint8Array(X);for(u=0;u<X;u++,l++)ba[u]=a[l];r+=17+X;(0===y>>4?p:n)[y&15]=b(M,ba)}break;case 65501:g();var A=
g();break;case 65498:g();v=a[l++];u=[];for(r=0;r<v;r++){y=w.componentIds[a[l++]];var P=w.components[y];y=a[l++];P.huffmanTableDC=p[y>>4];P.huffmanTableAC=n[y&15];u.push(P)}r=a[l++];v=a[l++];y=a[l++];r=c(a,l,w,u,A,r,v,y>>4,y&15);l+=r;break;case 65535:255!==a[l]&&l--;break;default:if(255===a[l-3]&&192<=a[l-2]&&254>=a[l-2])l-=3;else throw"unknown JPEG marker "+r.toString(16);}r=g()}this.width=w.samplesPerLine;this.height=w.scanLines;this.jfif=k;this.adobe=m;this.components=[];for(r=0;r<w.components.length;r++)P=
w.components[r],this.components.push({output:d(w,P),scaleX:P.h/w.maxH,scaleY:P.v/w.maxV,blocksPerLine:P.blocksPerLine,blocksPerColumn:P.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,b){var c=this.width/a,d=this.height/b,g,e,f=this.components.length,h=a*b*f,l=new Uint8Array(h),k=new Uint32Array(a);for(e=0;e<f;e++){var m=this.components[e];var t=m.scaleX*c;var n=m.scaleY*d;var y=e;var p=m.output;var r=m.blocksPerLine+1<<3;for(g=0;g<a;g++)m=0|g*t,k[g]=
(m&4294967288)<<3|m&7;for(t=0;t<b;t++)for(m=0|t*n,m=r*(m&4294967288)|(m&7)<<3,g=0;g<a;g++)l[y]=p[m+k[g]],y+=f}if(b=this.decodeTransform)for(e=0;e<h;)for(a=m=0;m<f;m++,e++,a+=2)l[e]=(l[e]*b[a]>>8)+b[a+1];return l},_isColorConversionNeeded:function(){return this.adobe&&this.adobe.transformCode?!0:3===this.numComponents?!0:!1},_convertYccToRgb:function(a){for(var b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],a[e]=g(b-179.456+1.402*d),a[e+1]=g(b+135.459-.344*c-.714*d),a[e+2]=g(b-226.816+1.772*
c);return a},_convertYcckToRgb:function(a){for(var b,c,d,e,f=0,h=0,l=a.length;h<l;h+=4){b=a[h];c=a[h+1];d=a[h+2];e=a[h+3];var k=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*d-5.4080610064599E-5*b+4.8449797120281E-4*e-.154362151871126)+d*(-9.57964378445773E-4*d+8.17076911346625E-4*b-.00477271405408747*e+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*e+.48357088451265)+e*(-3.36197177618394E-4*e+.484791561490776),m=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*
d+6.59397001245577E-4*b+4.26105652938837E-4*e-.176491792462875)+d*(-7.78269941513683E-4*d+.00130872261408275*b+7.70482631801132E-4*e-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*e+.25802910206845)+e*(-3.18913117588328E-4*e-.213742400323665);b=-20.810012546947+c*(-5.70115196973677E-4*c-2.63409051004589E-5*d+.0020741088115012*b-.00288260236853442*e+.814272968359295)+d*(-1.53496057440975E-5*d-1.32689043961446E-4*b+5.60833691242812E-4*e-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*
e+.116935020465145)+e*(-3.43531996510555E-4*e+.24165260232407);a[f++]=g(k);a[f++]=g(m);a[f++]=g(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,d,e=0,f=a.length;e<f;e+=4)b=a[e],c=a[e+1],d=a[e+2],a[e]=g(434.456-b-1.402*d),a[e+1]=g(119.541-b+.344*c+.714*d),a[e+2]=g(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,c,d,g,e=0,f=1/255/255,h=0,l=a.length;h<l;h+=4){b=a[h];c=a[h+1];d=a[h+2];g=a[h+3];var k=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*d+212.25662451639585*
g-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*d-17.873870861415444*g-1401.7366389350734)+d*(-2.5217340131683033*d-21.248923337353073*g+4465.541406466231)-g*(21.86122147463605*g+48317.86113160301),m=b*(8.841041422036149*b+60.118027045597366*c+6.871425592049007*d+31.159100130055922*g-20220.756542821975)+c*(-15.310361306967817*c+17.575251261109482*d+131.35250912493976*g-48691.05921601825)+d*(4.444339102852739*d+9.8632861493405*g-6341.191035517494)-g*(20.737325471181034*g+47890.15695978492);
b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*d-.23883238689178934*g-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*d+50.606957656360734*g-28620.90484698408)+d*(.03296041114873217*d+115.60384449646641*g-49363.43385999684)-g*(22.33816807309886*g+45932.16563550634);a[e++]=0<=k?255:-16581375>=k?0:255+k*f|0;a[e++]=0<=m?255:-16581375>=m?0:255+m*f|0;a[e++]=0<=b?255:-16581375>=b?0:255+b*f|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";
a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};return a}();"use strict";var g=function(){function a(a,b,c){this.data=a;this.bp=b;this.dataEnd=c;this.chigh=a[b];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=
32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},
{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,
switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,
switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<
8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var d=a[c]>>1,g=a[c]&1;d=b[d];var e=d.qe,f=this.a-e;if(this.chigh<e)f<e?(f=e,e=g,d=d.nmps):(f=e,e=1^g,1===d.switchFlag&&(g=e),d=d.nlps);else{this.chigh-=e;if(0!==(f&32768))return this.a=f,g;f<e?(e=1^g,1===d.switchFlag&&(g=e),d=d.nlps):(e=g,d=d.nmps)}do 0===this.ct&&this.byteIn(),f<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(f&32768));
this.a=f;a[c]=d<<1|g;return e}};return a}();"use strict";var k=function(){function c(){this.failOnCorruptedImage=!1}function e(a,b,c){a=c.xcb_;c=c.ycb_;var d=1<<a,g=1<<c,e=b.tbx0>>a,f=b.tby0>>c,h=b.tbx1+d-1>>a,l=b.tby1+g-1>>c,k=b.resolution.precinctParameters,q=[],m=[],n,y;for(y=f;y<l;y++)for(n=e;n<h;n++){var t={cbx:n,cby:y,tbx0:d*n,tby0:g*y,tbx1:d*(n+1),tby1:g*(y+1)};t.tbx0_=Math.max(b.tbx0,t.tbx0);t.tby0_=Math.max(b.tby0,t.tby0);t.tbx1_=Math.min(b.tbx1,t.tbx1);t.tby1_=Math.min(b.tby1,t.tby1);var p=
Math.floor((t.tbx0_-b.tbx0)/k.precinctWidthInSubband)+Math.floor((t.tby0_-b.tby0)/k.precinctHeightInSubband)*k.numprecinctswide;t.precinctNumber=p;t.subbandType=b.type;t.Lblock=3;if(!(t.tbx1_<=t.tbx0_||t.tby1_<=t.tby0_)){q.push(t);var r=m[p];void 0!==r?(n<r.cbxMin?r.cbxMin=n:n>r.cbxMax&&(r.cbxMax=n),y<r.cbyMin?r.cbxMin=y:y>r.cbyMax&&(r.cbyMax=y)):m[p]=r={cbxMin:n,cbyMin:y,cbxMax:n,cbyMax:y};t.precinct=r}}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:h-e+1,numcodeblockhigh:l-
f+1};b.codeblocks=q;b.precincts=m}function f(a,b,c){var d=[];a=a.subbands;for(var g=0,e=a.length;g<e;g++)for(var f=a[g].codeblocks,h=0,l=f.length;h<l;h++){var k=f[h];k.precinctNumber===b&&d.push(k)}return{layerNumber:c,codeblocks:d}}function l(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,g=0;for(a=0;a<d;a++)g=Math.max(g,b.components[a].codingStyleParameters.decompositionLevelsCount);var e=0,h=0,l=0,k=0;this.nextPacket=function(){for(;e<c;e++){for(;h<=
g;h++){for(;l<d;l++){var a=b.components[l];if(!(h>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[h];for(var q=a.precinctParameters.numprecincts;k<q;)return a=f(a,k,e),k++,a;k=0}}l=0}h=0}throw Error("JPX Error: Out of packets");}}function k(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,g=0;for(a=0;a<d;a++)g=Math.max(g,b.components[a].codingStyleParameters.decompositionLevelsCount);var e=0,h=0,l=0,k=0;this.nextPacket=function(){for(;e<=
g;e++){for(;h<c;h++){for(;l<d;l++){var a=b.components[l];if(!(e>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[e];for(var q=a.precinctParameters.numprecincts;k<q;)return a=f(a,k,h),k++,a;k=0}}l=0}h=0}throw Error("JPX Error: Out of packets");}}function m(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,g,e,h,l=0;for(h=0;h<d;h++)l=Math.max(l,b.components[h].codingStyleParameters.decompositionLevelsCount);var k=new Int32Array(l+1);for(e=
0;e<=l;++e){for(h=a=0;h<d;++h){var q=b.components[h].resolutions;e<q.length&&(a=Math.max(a,q[e].precinctParameters.numprecincts))}k[e]=a}var m=h=e=g=0;this.nextPacket=function(){for(;e<=l;e++){for(;m<k[e];m++){for(;h<d;h++){var a=b.components[h];if(!(e>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[e],m>=a.precinctParameters.numprecincts))){for(;g<c;)return a=f(a,m,g),g++,a;g=0}}h=0}m=0}throw Error("JPX Error: Out of packets");}}function n(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,g=q(b),e=0,h=0,l=0,k=0,m=0;this.nextPacket=function(){for(;m<g.maxNumHigh;m++){for(;k<g.maxNumWide;k++){for(;l<d;l++){for(var a=b.components[l],q=a.codingStyleParameters.decompositionLevelsCount;h<=q;h++){var n=a.resolutions[h],t=r(k,m,g.components[l].resolutions[h],g,n);if(null!==t){for(;e<c;)return a=f(n,t,e),e++,a;e=0}}h=0}l=0}k=0}throw Error("JPX Error: Out of packets");}}function p(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,
d=a.SIZ.Csiz,g=q(b),e=0,h=0,l=0,k=0,m=0;this.nextPacket=function(){for(;l<d;++l){for(var a=b.components[l],q=g.components[l],n=a.codingStyleParameters.decompositionLevelsCount;m<q.maxNumHigh;m++){for(;k<q.maxNumWide;k++){for(;h<=n;h++){var t=a.resolutions[h],y=r(k,m,q.resolutions[h],q,t);if(null!==y){for(;e<c;)return a=f(t,y,e),e++,a;e=0}}h=0}k=0}m=0}throw Error("JPX Error: Out of packets");}}function r(a,b,c,d,g){a*=d.minWidth;b*=d.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/
c.width*g.precinctParameters.numprecinctswide}function q(a){for(var b=a.components.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,g=0,e=0,f=Array(b),h=0;h<b;h++){for(var l=a.components[h],k=l.codingStyleParameters.decompositionLevelsCount,q=Array(k+1),m=Number.MAX_VALUE,n=Number.MAX_VALUE,t=0,p=0,r=1;0<=k;--k){var u=l.resolutions[k],L=r*u.precinctParameters.precinctWidth,w=r*u.precinctParameters.precinctHeight;m=Math.min(m,L);n=Math.min(n,w);t=Math.max(t,u.precinctParameters.numprecinctswide);p=Math.max(p,
u.precinctParameters.numprecinctshigh);q[k]={width:L,height:w};r<<=1}c=Math.min(c,m);d=Math.min(d,n);g=Math.max(g,t);e=Math.max(e,p);f[h]={resolutions:q,minWidth:m,minHeight:n,maxNumWide:t,maxNumHigh:p}}return{components:f,minWidth:c,minHeight:d,maxNumWide:g,maxNumHigh:e}}function w(b,c,d,g){function e(a){for(;q<a;){var b=c[d+l];l++;m?(k=k<<7|b,q+=7,m=!1):(k=k<<8|b,q+=8);255===b&&(m=!0)}q-=a;return k>>>q&(1<<a)-1}function f(a){return 255===c[d+l-1]&&c[d+l]===a?(l+=1,!0):255===c[d+l]&&c[d+l+1]===a?
(l+=2,!0):!1}function h(){if(0===e(1))return 1;if(0===e(1))return 2;var a=e(2);if(3>a)return a+3;a=e(5);if(31>a)return a+6;a=e(7);return a+37}var l=0,k,q=0,m=!1,n=b.COD.sopMarkerUsed,t=b.COD.ephMarkerUsed;for(b=b.tiles[b.currentTile.index].packetsIterator;l<g;){q=0;m&&(l++,m=!1);n&&f(145)&&(l+=4);var y=b.nextPacket();if(e(1)){for(var p=y.layerNumber,r=[],u,L=0,w=y.codeblocks.length;L<w;L++){u=y.codeblocks[L];var M=u.precinct,v=u.cbx-M.cbxMin,z=u.cby-M.cbyMin,G=!1,A=!1;if(void 0!==u.included)G=!!e(1);
else{M=u.precinct;if(void 0!==M.inclusionTree)var x=M.inclusionTree;else{var F=M.cbxMax-M.cbxMin+1;var R=M.cbyMax-M.cbyMin+1;x=new D(F,R,p);F=new C(F,R);M.inclusionTree=x;M.zeroBitPlanesTree=F}if(x.reset(v,z,p))for(;;)if(e(1)){if(R=!x.nextLevel()){G=A=u.included=!0;break}}else{x.incrementValue(p);break}}if(G){if(A){F=M.zeroBitPlanesTree;for(F.reset(v,z);;)if(e(1)){if(R=!F.nextLevel())break}else F.incrementValue();u.zeroBitPlanes=F.value}for(M=h();e(1);)u.Lblock++;v=a(M);v=e((M<1<<v?v-1:v)+u.Lblock);
r.push({codeblock:u,codingpasses:M,dataLength:v})}}q=0;m&&(l++,m=!1);for(t&&f(146);0<r.length;)y=r.shift(),u=y.codeblock,void 0===u.data&&(u.data=[]),u.data.push({data:c,start:d+l,end:d+l+y.dataLength,codingpasses:y.codingpasses}),l+=y.dataLength}}return l}var L={LL:0,LH:1,HL:1,HH:2};c.prototype={parse:function(a){if(65359===b(a,0))this.parseCodestream(a,0,a.length);else for(var c=0,e=a.length;c<e;){var g=8,f=d(a,c),l=d(a,c+4);c+=g;1===f&&(f=4294967296*d(a,c)+d(a,c+4),c+=8,g+=8);0===f&&(f=e-c+g);
if(f<g)throw Error("JPX Error: Invalid box field size");g=f-g;f=!0;switch(l){case 1785737832:f=!1;break;case 1668246642:l=a[c];if(1===l)switch(l=d(a,c+3),l){case 16:case 17:case 18:break;default:h("Unknown colorspace "+l)}else 2===l&&B("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,c,c+g);break;case 1783636E3:218793738!==d(a,c)&&h("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var k=String.fromCharCode(l>>
24&255,l>>16&255,l>>8&255,l&255);h("Unsupported header type "+l+" ("+k+")")}f&&(c+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b;b=a.getByte();if(65361===(c<<8|b)){a.skip(4);b=a.getInt32()>>>0;c=a.getInt32()>>>0;var d=a.getInt32()>>>0,g=a.getInt32()>>>0;a.skip(16);a=a.getUint16();this.width=b-d;this.height=c-g;this.componentsCount=a;this.bitsPerComponent=8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,c,f){var q={};try{var t=
!1;for(var y=c;y+1<f;){var r=b(a,y);y+=2;var u=0,v;switch(r){case 65359:q.mainHeader=!0;break;case 65497:break;case 65361:u=b(a,y);var M={};M.Xsiz=d(a,y+4);M.Ysiz=d(a,y+8);M.XOsiz=d(a,y+12);M.YOsiz=d(a,y+16);M.XTsiz=d(a,y+20);M.YTsiz=d(a,y+24);M.XTOsiz=d(a,y+28);M.YTOsiz=d(a,y+32);var z=b(a,y+36);M.Csiz=z;var G=[];var A=y+38;for(var x=0;x<z;x++){var D={precision:(a[A]&127)+1,isSigned:!!(a[A]&128),XRsiz:a[A+1],YRsiz:a[A+1]},C=D,K=M;C.x0=Math.ceil(K.XOsiz/C.XRsiz);C.x1=Math.ceil(K.Xsiz/C.XRsiz);C.y0=
Math.ceil(K.YOsiz/C.YRsiz);C.y1=Math.ceil(K.Ysiz/C.YRsiz);C.width=C.x1-C.x0;C.height=C.y1-C.y0;G.push(D)}q.SIZ=M;q.components=G;for(var B=void 0,J=q,H=G,F=J.SIZ,I=[],Q=Math.ceil((F.Xsiz-F.XTOsiz)/F.XTsiz),pc=Math.ceil((F.Ysiz-F.YTOsiz)/F.YTsiz),Ya=0;Ya<pc;Ya++)for(var Za=0;Za<Q;Za++)B={},B.tx0=Math.max(F.XTOsiz+Za*F.XTsiz,F.XOsiz),B.ty0=Math.max(F.YTOsiz+Ya*F.YTsiz,F.YOsiz),B.tx1=Math.min(F.XTOsiz+(Za+1)*F.XTsiz,F.Xsiz),B.ty1=Math.min(F.YTOsiz+(Ya+1)*F.YTsiz,F.Ysiz),B.width=B.tx1-B.tx0,B.height=B.ty1-
B.ty0,B.components=[],I.push(B);J.tiles=I;for(var $a=0,qc=F.Csiz;$a<qc;$a++)for(var ab=H[$a],lb=0,rc=I.length;lb<rc;lb++){var ia={};B=I[lb];ia.tcx0=Math.ceil(B.tx0/ab.XRsiz);ia.tcy0=Math.ceil(B.ty0/ab.YRsiz);ia.tcx1=Math.ceil(B.tx1/ab.XRsiz);ia.tcy1=Math.ceil(B.ty1/ab.YRsiz);ia.width=ia.tcx1-ia.tcx0;ia.height=ia.tcy1-ia.tcy0;B.components[$a]=ia}q.QCC=[];q.COC=[];break;case 65372:u=b(a,y);var Ka={};A=y+2;var va=a[A++];switch(va&31){case 0:var na=8;var wa=!0;break;case 1:na=16;wa=!1;break;case 2:na=
16;wa=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+va);}Ka.noQuantization=8===na;Ka.scalarExpounded=wa;Ka.guardBits=va>>5;for(v=[];A<u+y;){var ja={};8===na?(ja.epsilon=a[A++]>>3,ja.mu=0):(ja.epsilon=a[A]>>3,ja.mu=(a[A]&7)<<8|a[A+1],A+=2);v.push(ja)}Ka.SPqcds=v;q.mainHeader?q.QCD=Ka:(q.currentTile.QCD=Ka,q.currentTile.QCC=[]);break;case 65373:u=b(a,y);var La={};A=y+2;if(257>q.SIZ.Csiz)var mb=a[A++];else mb=b(a,A),A+=2;va=a[A++];switch(va&31){case 0:na=8;wa=!0;break;case 1:na=16;wa=
!1;break;case 2:na=16;wa=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+va);}La.noQuantization=8===na;La.scalarExpounded=wa;La.guardBits=va>>5;for(v=[];A<u+y;)ja={},8===na?(ja.epsilon=a[A++]>>3,ja.mu=0):(ja.epsilon=a[A]>>3,ja.mu=(a[A]&7)<<8|a[A+1],A+=2),v.push(ja);La.SPqcds=v;q.mainHeader?q.QCC[mb]=La:q.currentTile.QCC[mb]=La;break;case 65362:u=b(a,y);var T={};A=y+2;var nb=a[A++];T.entropyCoderWithCustomPrecincts=!!(nb&1);T.sopMarkerUsed=!!(nb&2);T.ephMarkerUsed=!!(nb&4);T.progressionOrder=
a[A++];T.layersCount=b(a,A);A+=2;T.multipleComponentTransform=a[A++];T.decompositionLevelsCount=a[A++];T.xcb=(a[A++]&15)+2;T.ycb=(a[A++]&15)+2;var Ma=a[A++];T.selectiveArithmeticCodingBypass=!!(Ma&1);T.resetContextProbabilities=!!(Ma&2);T.terminationOnEachCodingPass=!!(Ma&4);T.verticalyStripe=!!(Ma&8);T.predictableTermination=!!(Ma&16);T.segmentationSymbolUsed=!!(Ma&32);T.reversibleTransformation=a[A++];if(T.entropyCoderWithCustomPrecincts){for(var Mb=[];A<u+y;){var Nb=a[A++];Mb.push({PPx:Nb&15,PPy:Nb>>
4})}T.precinctsSizes=Mb}var xa=[];T.selectiveArithmeticCodingBypass&&xa.push("selectiveArithmeticCodingBypass");T.resetContextProbabilities&&xa.push("resetContextProbabilities");T.terminationOnEachCodingPass&&xa.push("terminationOnEachCodingPass");T.verticalyStripe&&xa.push("verticalyStripe");T.predictableTermination&&xa.push("predictableTermination");if(0<xa.length)throw t=!0,Error("JPX Error: Unsupported COD options ("+xa.join(", ")+")");q.mainHeader?q.COD=T:(q.currentTile.COD=T,q.currentTile.COC=
[]);break;case 65424:u=b(a,y);var Y={};Y.index=b(a,y+2);Y.length=d(a,y+4);Y.dataEnd=Y.length+y-2;Y.partIndex=a[y+8];Y.partsCount=a[y+9];q.mainHeader=!1;0===Y.partIndex&&(Y.COD=q.COD,Y.COC=q.COC.slice(0),Y.QCD=q.QCD,Y.QCC=q.QCC.slice(0));q.currentTile=Y;break;case 65427:Y=q.currentTile;if(0===Y.partIndex){for(var oa=q,sc=oa.SIZ.Csiz,Ob=oa.tiles[Y.index],ya=0;ya<sc;ya++){var Pb=Ob.components[ya];Pb.quantizationParameters=void 0!==oa.currentTile.QCC[ya]?oa.currentTile.QCC[ya]:oa.currentTile.QCD;Pb.codingStyleParameters=
void 0!==oa.currentTile.COC[ya]?oa.currentTile.COC[ya]:oa.currentTile.COD}Ob.codingStyleDefaultParameters=oa.currentTile.COD;for(var ea=q,za=ea.tiles[ea.currentTile.index],tc=ea.SIZ.Csiz,ob=0;ob<tc;ob++){for(var U=za.components[ob],pb=U.codingStyleParameters.decompositionLevelsCount,Qb=[],Pa=[],Aa=0;Aa<=pb;Aa++){var bb=Aa,Ba=U.codingStyleParameters,ka={};Ba.entropyCoderWithCustomPrecincts?(ka.PPx=Ba.precinctsSizes[bb].PPx,ka.PPy=Ba.precinctsSizes[bb].PPy):(ka.PPx=15,ka.PPy=15);ka.xcb_=0<bb?Math.min(Ba.xcb,
ka.PPx-1):Math.min(Ba.xcb,ka.PPx);ka.ycb_=0<bb?Math.min(Ba.ycb,ka.PPy-1):Math.min(Ba.ycb,ka.PPy);var ra=ka;var V={},sa=1<<pb-Aa;V.trx0=Math.ceil(U.tcx0/sa);V.try0=Math.ceil(U.tcy0/sa);V.trx1=Math.ceil(U.tcx1/sa);V.try1=Math.ceil(U.tcy1/sa);V.resLevel=Aa;var qb=1<<ra.PPx,rb=1<<ra.PPy,Rb=0===V.resLevel,Sb=V.trx1>V.trx0?Math.ceil(V.trx1/qb)-Math.floor(V.trx0/qb):0,Tb=V.try1>V.try0?Math.ceil(V.try1/rb)-Math.floor(V.try0/rb):0;V.precinctParameters={precinctWidth:qb,precinctHeight:rb,numprecinctswide:Sb,
numprecinctshigh:Tb,numprecincts:Sb*Tb,precinctWidthInSubband:1<<ra.PPx+(Rb?0:-1),precinctHeightInSubband:1<<ra.PPy+(Rb?0:-1)};Qb.push(V);if(0===Aa){var S={type:"LL"};S.tbx0=Math.ceil(U.tcx0/sa);S.tby0=Math.ceil(U.tcy0/sa);S.tbx1=Math.ceil(U.tcx1/sa);S.tby1=Math.ceil(U.tcy1/sa);S.resolution=V;e(ea,S,ra);Pa.push(S);V.subbands=[S]}else{var fa=1<<pb-Aa+1,cb=[];S={type:"HL"};S.tbx0=Math.ceil(U.tcx0/fa-.5);S.tby0=Math.ceil(U.tcy0/fa);S.tbx1=Math.ceil(U.tcx1/fa-.5);S.tby1=Math.ceil(U.tcy1/fa);S.resolution=
V;e(ea,S,ra);Pa.push(S);cb.push(S);S={type:"LH"};S.tbx0=Math.ceil(U.tcx0/fa);S.tby0=Math.ceil(U.tcy0/fa-.5);S.tbx1=Math.ceil(U.tcx1/fa);S.tby1=Math.ceil(U.tcy1/fa-.5);S.resolution=V;e(ea,S,ra);Pa.push(S);cb.push(S);S={type:"HH"};S.tbx0=Math.ceil(U.tcx0/fa-.5);S.tby0=Math.ceil(U.tcy0/fa-.5);S.tbx1=Math.ceil(U.tcx1/fa-.5);S.tby1=Math.ceil(U.tcy1/fa-.5);S.resolution=V;e(ea,S,ra);Pa.push(S);cb.push(S);V.subbands=cb}}U.resolutions=Qb;U.subbands=Pa}var Ub=za.codingStyleDefaultParameters.progressionOrder;
switch(Ub){case 0:za.packetsIterator=new l(ea);break;case 1:za.packetsIterator=new k(ea);break;case 2:za.packetsIterator=new m(ea);break;case 3:za.packetsIterator=new n(ea);break;case 4:za.packetsIterator=new p(ea);break;default:throw Error("JPX Error: Unsupported progression order "+Ub);}}u=Y.dataEnd-y;w(q,a,y,u);break;case 65365:case 65367:case 65368:case 65380:u=b(a,y);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+
r.toString(16));}y+=u}}catch(Vb){if(t||this.failOnCorruptedImage)throw Vb;h("Trying to recover from "+Vb.message)}for(var Wb=q.components,Na=q.SIZ.Csiz,Xb=[],sb=0,uc=q.tiles.length;sb<uc;sb++){var tb=q.tiles[sb],Ca=[],ha;for(ha=0;ha<Na;ha++){for(var vc=Ca,wc=ha,Da=tb.components[ha],ub=Da.codingStyleParameters,vb=Da.quantizationParameters,xc=ub.decompositionLevelsCount,db=vb.SPqcds,yc=vb.scalarExpounded,zc=vb.guardBits,Ac=ub.segmentationSymbolUsed,Bc=q.components[ha].precision,wb=ub.reversibleTransformation,
Cc=wb?new O:new N,Yb=[],xb=0,Qa=0;Qa<=xc;Qa++){for(var Oa=Da.resolutions[Qa],yb=Oa.trx1-Oa.trx0,Zb=Oa.try1-Oa.try0,$b=new Float32Array(yb*Zb),zb=0,Dc=Oa.subbands.length;zb<Dc;zb++){if(yc){var ac=db[xb].mu;var Ab=db[xb].epsilon;xb++}else ac=db[0].mu,Ab=db[0].epsilon+(0<Qa?1-Qa:0);for(var bc=Oa.subbands[zb],Ec=L[bc.type],Fc=$b,cc=yb,ta=bc,Gc=wb?1:Math.pow(2,Bc+Ec-Ab)*(1+ac/2048),Bb=zc+Ab-1,dc=wb,Hc=Ac,Ic=ta.tbx0,Jc=ta.tby0,eb=ta.tbx1-ta.tbx0,ec=ta.codeblocks,Kc="H"===ta.type.charAt(0)?1:0,Lc="H"===
ta.type.charAt(1)?cc:0,Cb=0,Mc=ec.length;Cb<Mc;++Cb){var la=ec[Cb],fb=la.tbx1_-la.tbx0_,Db=la.tby1_-la.tby0_;if(0!==fb&&0!==Db&&void 0!==la.data){var ua=new E(fb,Db,la.subbandType,la.zeroBitPlanes,Bb);var Eb=2;var gb=la.data,Fb=0,fc=0,hb;var ca=0;for(hb=gb.length;ca<hb;ca++){var Ea=gb[ca];Fb+=Ea.end-Ea.start;fc+=Ea.codingpasses}var gc=new Uint8Array(Fb),Fa=0;ca=0;for(hb=gb.length;ca<hb;ca++){Ea=gb[ca];var hc=Ea.data.subarray(Ea.start,Ea.end);gc.set(hc,Fa);Fa+=hc.length}var Nc=new g(gc,0,Fb);ua.setDecoder(Nc);
for(ca=0;ca<fc;ca++){switch(Eb){case 0:ua.runSignificancePropogationPass();break;case 1:ua.runMagnitudeRefinementPass();break;case 2:ua.runCleanupPass(),Hc&&ua.checkSegmentationSymbol()}Eb=(Eb+1)%3}var Ra=la.tbx0_-Ic+(la.tby0_-Jc)*eb,Oc=ua.coefficentsSign,Pc=ua.coefficentsMagnitude,Qc=ua.bitsDecoded,Rc=dc?0:.5,Gb;Fa=0;var Sc="LL"!==ta.type;for(ca=0;ca<Db;ca++){var Tc=2*(Ra/eb|0)*(cc-eb)+Kc+Lc;for(Gb=0;Gb<fb;Gb++){var Ga=Pc[Fa];if(0!==Ga){Ga=(Ga+Rc)*Gc;0!==Oc[Fa]&&(Ga=-Ga);var ic=Qc[Fa];Fc[Sc?Tc+(Ra<<
1):Ra]=dc&&ic>=Bb?Ga:Ga*(1<<Bb-ic)}Ra++;Fa++}Ra+=eb-fb}}}}Yb.push({width:yb,height:Zb,items:$b})}var Hb=Cc.calculate(Yb,Da.tcx0,Da.tcy0);vc[wc]={left:Da.tcx0,top:Da.tcy0,width:Hb.width,height:Hb.height,items:Hb.items}}var Sa=Ca[0],pa=new Uint8Array(Sa.items.length*Na),Uc={left:Sa.left,top:Sa.top,width:Sa.width,height:Sa.height,items:pa},aa=0,W;if(tb.codingStyleDefaultParameters.multipleComponentTransform){var jc=4===Na,Ib=Ca[0].items,kc=Ca[1].items,lc=Ca[2].items,Vc=jc?Ca[3].items:null;var da=Wb[0].precision-
8;var Ta=(128<<da)+.5;var ma=255*(1<<da);var mc=.5*ma;var Jb=-mc;var Wc=tb.components[0],nc=Na-3;var Ua=Ib.length;if(Wc.codingStyleParameters.reversibleTransformation)for(W=0;W<Ua;W++,aa+=nc){var Va=Ib[W]+Ta;var Wa=kc[W];var Xa=lc[W];var qa=Va-(Xa+Wa>>2);var Ha=qa+Xa;var Ia=qa+Wa;pa[aa++]=0>=Ha?0:Ha>=ma?255:Ha>>da;pa[aa++]=0>=qa?0:qa>=ma?255:qa>>da;pa[aa++]=0>=Ia?0:Ia>=ma?255:Ia>>da}else for(W=0;W<Ua;W++,aa+=nc)Va=Ib[W]+Ta,Wa=kc[W],Xa=lc[W],Ha=Va+1.402*Xa,qa=Va-.34413*Wa-.71414*Xa,Ia=Va+1.772*Wa,
pa[aa++]=0>=Ha?0:Ha>=ma?255:Ha>>da,pa[aa++]=0>=qa?0:qa>=ma?255:qa>>da,pa[aa++]=0>=Ia?0:Ia>=ma?255:Ia>>da;if(jc)for(W=0,aa=3;W<Ua;W++,aa+=4){var Kb=Vc[W];pa[aa]=Kb<=Jb?0:Kb>=mc?255:Kb+Ta>>da}}else for(ha=0;ha<Na;ha++){var oc=Ca[ha].items;da=Wb[ha].precision-8;Ta=(128<<da)+.5;ma=127.5*(1<<da);Jb=-ma;aa=ha;W=0;for(Ua=oc.length;W<Ua;W++){var Lb=oc[W];pa[aa]=Lb<=Jb?0:Lb>=ma?255:Lb+Ta>>da;aa+=Na}}Xb.push(Uc)}this.tiles=Xb;this.width=q.SIZ.Xsiz-q.SIZ.XOsiz;this.height=q.SIZ.Ysiz-q.SIZ.YOsiz;this.componentsCount=
q.SIZ.Csiz}};var C=function(){function b(b,c){var d=a(Math.max(b,c))+1;this.levels=[];for(var g=0;g<d;g++)this.levels.push({width:b,height:c,items:[]}),b=Math.ceil(b/2),c=Math.ceil(c/2)}b.prototype={reset:function(a,b){for(var c=0,d=0,g;c<this.levels.length;){g=this.levels[c];var e=a+b*g.width;if(void 0!==g.items[e]){d=g.items[e];break}g.index=e;a>>=1;b>>=1;c++}c--;g=this.levels[c];g.items[g.index]=d;this.currentLevel=c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];
a.items[a.index]++},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),D=function(){function b(b,c,d){var g=a(Math.max(b,c))+1;this.levels=[];for(var e=0;e<g;e++){for(var f=new Uint8Array(b*c),h=0,l=f.length;h<l;h++)f[h]=d;this.levels.push({width:b,height:c,items:f});b=Math.ceil(b/2);c=Math.ceil(c/2)}}b.prototype={reset:function(a,b,c){for(var d=0;d<this.levels.length;){var g=
this.levels[d],e=a+b*g.width;g.index=e;g=g.items[e];if(255===g)break;if(g>c)return this.currentLevel=d,this.propagateValues(),!1;a>>=1;b>>=1;d++}this.currentLevel=d-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];
b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),E=function(){function a(a,g,e,f,h){this.width=a;this.height=g;this.contextLabelTable="HH"===e?d:"HL"===e?c:b;a*=g;this.neighborsSignificance=new Uint8Array(a);this.coefficentsSign=new Uint8Array(a);this.coefficentsMagnitude=14<h?new Uint32Array(a):6<h?new Uint16Array(a):new Uint8Array(a);this.processingFlags=new Uint8Array(a);h=new Uint8Array(a);if(0!==f)for(g=0;g<a;g++)h[g]=f;this.bitsDecoded=
h;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),d=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,
0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var d=this.neighborsSignificance,g=this.width,e=this.height,f=0<b;b=b+1<g;if(0<a){var h=c-g;f&&(d[h-1]+=16);b&&(d[h+1]+=16);d[h]+=4}a+1<e&&(h=c+g,f&&(d[h-1]+=16),b&&(d[h+1]+=16),d[h]+=4);f&&(d[c-1]+=1);b&&(d[c+1]+=1);d[c]|=128},runSignificancePropogationPass:function(){for(var a=
this.decoder,b=this.width,c=this.height,d=this.coefficentsMagnitude,g=this.coefficentsSign,e=this.neighborsSignificance,f=this.processingFlags,h=this.contexts,l=this.contextLabelTable,k=this.bitsDecoded,q=0;q<c;q+=4)for(var m=0;m<b;m++)for(var n=q*b+m,t=0;4>t;t++,n+=b){var y=q+t;if(y>=c)break;f[n]&=-2;if(!d[n]&&e[n]){if(a.readBit(h,l[e[n]])){var p=this.decodeSignBit(y,m,n);g[n]=p;d[n]=1;this.setNeighborsSignificance(y,m,n);f[n]|=2}k[n]++;f[n]|=1}}},decodeSignBit:function(a,b,c){var d=this.width,g=
this.height,e=this.coefficentsMagnitude,f=this.coefficentsSign;var h=0<b&&0!==e[c-1];b+1<d&&0!==e[c+1]?(b=f[c+1],h?(h=f[c-1],b=1-b-h):b=1-b-b):h?(h=f[c-1],b=1-h-h):b=0;var l=3*b;h=0<a&&0!==e[c-d];a+1<g&&0!==e[c+d]?(b=f[c+d],h?(h=f[c-d],b=1-b-h+l):b=1-b-b+l):h?(h=f[c-d],b=1-h-h+l):b=l;return 0<=b?this.decoder.readBit(this.contexts,9+b):this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=this.decoder,b=this.width,c=this.coefficentsMagnitude,d=this.neighborsSignificance,
g=this.contexts,e=this.bitsDecoded,f=this.processingFlags,h=b*this.height,l=4*b,k=0,q;k<h;k=q){q=Math.min(h,k+l);for(var m=0;m<b;m++)for(var n=k+m;n<q;n+=b)if(c[n]&&0===(f[n]&1)){var t=16;0!==(f[n]&2)&&(f[n]^=2,t=0===(d[n]&127)?15:14);t=a.readBit(g,t);c[n]=c[n]<<1|t;e[n]++;f[n]|=1}}},runCleanupPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.neighborsSignificance,g=this.coefficentsMagnitude,e=this.coefficentsSign,f=this.contexts,h=this.contextLabelTable,l=this.bitsDecoded,
k=this.processingFlags,q=2*b,m=3*b,n,t=0;t<c;t=n){n=Math.min(t+4,c);for(var y=t*b,p=t+3<c,r=0;r<b;r++){var u=y+r,L=0,v=u,w=t;if(p&&0===k[u]&&0===k[u+b]&&0===k[u+q]&&0===k[u+m]&&0===d[u]&&0===d[u+b]&&0===d[u+q]&&0===d[u+m]){if(!a.readBit(f,18)){l[u]++;l[u+b]++;l[u+q]++;l[u+m]++;continue}L=a.readBit(f,17)<<1|a.readBit(f,17);0!==L&&(w=t+L,v+=L*b);var z=this.decodeSignBit(w,r,v);e[v]=z;g[v]=1;this.setNeighborsSignificance(w,r,v);k[v]|=2;v=u;for(u=t;u<=w;u++,v+=b)l[v]++;L++}for(w=t+L;w<n;w++,v+=b)g[v]||
0!==(k[v]&1)||(1===a.readBit(f,h[d[v]])&&(z=this.decodeSignBit(w,r,v),e[v]=z,g[v]=1,this.setNeighborsSignificance(w,r,v),k[v]|=2),l[v]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");}};return a}(),Q=function(){function a(){}a.prototype.calculate=function(a,b,c){for(var d=a[0],g=1,e=a.length;g<e;g++)d=this.iterate(d,a[g],b,c);return d};
a.prototype.extend=function(a,b,c){var d=b-1,g=b+1,e=b+c-2;b+=c;a[d--]=a[g++];a[b++]=a[e--];a[d--]=a[g++];a[b++]=a[e--];a[d--]=a[g++];a[b++]=a[e--];a[d]=a[g];a[b]=a[e]};a.prototype.iterate=function(a,b,c,d){var g=a.width,e=a.height,f=a.items,h=b.width,l=b.height;b=b.items;var k,q,m;for(k=m=0;k<e;k++){var n=2*k*h;for(q=0;q<g;q++,m++,n+=2)b[n]=f[m]}a.items=null;a=new Float32Array(h+8);if(1===h){if(0!==(c&1))for(m=n=0;n<l;n++,m+=h)b[m]*=.5}else for(m=n=0;n<l;n++,m+=h)a.set(b.subarray(m,m+h),4),this.extend(a,
4,h),this.filter(a,4,h),b.set(a.subarray(4,4+h),m);c=16;g=[];for(k=0;k<c;k++)g.push(new Float32Array(l+8));k=0;a=4+l;if(1===l){if(0!==(d&1))for(d=0;d<h;d++)b[d]*=.5}else for(d=0;d<h;d++){if(0===k){c=Math.min(h-d,c);m=d;for(n=4;n<a;m+=h,n++)for(e=0;e<c;e++)g[e][n]=b[m+e];k=c}k--;m=g[k];this.extend(m,4,l);this.filter(m,4,l);if(0===k)for(m=d-c+1,n=4;n<a;m+=h,n++)for(e=0;e<c;e++)b[m+e]=g[e][n]}return{width:h,height:l,items:b}};return a}(),N=function(){function a(){Q.call(this)}a.prototype=Object.create(Q.prototype);
a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var g=b-3;for(d=c+4;d--;g+=2)a[g]*=.8128930661159609;g=b-2;var e=.443506852043971*a[g-1];for(d=c+3;d--;g+=2){var f=.443506852043971*a[g+1];a[g]=1.230174104914001*a[g]-e-f;if(d--)g+=2,e=.443506852043971*a[g+1],a[g]=1.230174104914001*a[g]-e-f;else break}g=b-1;e=.882911075530934*a[g-1];for(d=c+2;d--;g+=2)if(f=.882911075530934*a[g+1],a[g]-=e+f,d--)g+=2,e=.882911075530934*a[g+1],a[g]-=e+f;else break;g=b;e=-.052980118572961*a[g-1];for(d=c+1;d--;g+=2)if(f=
-.052980118572961*a[g+1],a[g]-=e+f,d--)g+=2,e=-.052980118572961*a[g+1],a[g]-=e+f;else break;if(0!==c)for(g=b+1,e=-1.586134342059924*a[g-1],d=c;d--;g+=2)if(f=-1.586134342059924*a[g+1],a[g]-=e+f,d--)g+=2,e=-1.586134342059924*a[g+1],a[g]-=e+f;else break};return a}(),O=function(){function a(){Q.call(this)}a.prototype=Object.create(Q.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var g=b;for(d=c+1;d--;g+=2)a[g]-=a[g-1]+a[g+1]+2>>2;g=b+1;for(d=c;d--;g+=2)a[g]+=a[g-1]+a[g+1]>>1};return a}();
return c}();"use strict";var m=function(){function c(){}function e(a,b,c){this.data=a;this.start=b;this.end=c}function h(a,b,c){function d(a){for(var b=0,d=0;d<a;d++){var f=c.readBit(g,e);e=256>e?e<<1|f:(e<<1|f)&511|256;b=b<<1|f}return b>>>0}var g=a.getContexts(b),e=1;a=d(1);b=d(1)?d(1)?d(1)?d(1)?d(1)?d(32)+4436:d(12)+340:d(8)+84:d(6)+20:d(4)+4:d(2);return 0===a?b:0<b?-b:null}function l(a,b,c){a=a.getContexts("IAID");for(var d=1,g=0;g<c;g++){var e=b.readBit(a,d);d=d<<1|e}return 31>c?d&(1<<c)-1:d&
2147483647}function k(a,b,c){var d=c.decoder;c=c.contextCache.getContexts("GB");var g,e,f,h=[];for(g=0;g<b;g++){var l=h[g]=new Uint8Array(a);var k=1>g?l:h[g-1];var q=2>g?l:h[g-2];var m=q[0]<<13|q[1]<<12|q[2]<<11|k[0]<<7|k[1]<<6|k[2]<<5|k[3]<<4;for(e=0;e<a;e++)l[e]=f=d.readBit(c,m),m=(m&31735)<<1|(e+3<a?q[e+3]<<11:0)|(e+4<a?k[e+4]<<4:0)|f}return h}function m(a,b,c,d,g,e,f,h){a&&p("JBIG2 error: MMR encoding is not supported");if(0===d&&!e&&!g&&4===f.length&&3===f[0].x&&-1===f[0].y&&-3===f[1].x&&-1===
f[1].y&&2===f[2].x&&-2===f[2].y&&-2===f[3].x&&-2===f[3].y)return k(b,c,h);a=!!e;var l=C[d].concat(f);l.sort(function(a,b){return a.y-b.y||a.x-b.x});f=l.length;var q=new Int8Array(f),m=new Int8Array(f),n=[],t=0,r=0,y=0,u=0,L,v;for(v=0;v<f;v++)q[v]=l[v].x,m[v]=l[v].y,r=Math.min(r,l[v].x),y=Math.max(y,l[v].x),u=Math.min(u,l[v].y),v<f-1&&l[v].y===l[v+1].y&&l[v].x===l[v+1].x-1?t|=1<<f-1-v:n.push(v);var w=n.length,z=new Int8Array(w),A=new Int8Array(w),G=new Uint16Array(w);for(L=0;L<w;L++)v=n[L],z[L]=l[v].x,
A[L]=l[v].y,G[L]=1<<f-1-v;l=-r;u=-u;y=b-y;d=B[d];n=new Uint8Array(b);r=[];L=h.decoder;h=h.contextCache.getContexts("GB");for(var D=0,x,M,K,N=0,J,H=0;H<c;H++){if(g&&(v=L.readBit(h,d),D^=v)){r.push(n);continue}n=new Uint8Array(n);r.push(n);for(x=0;x<b;x++)if(a&&e[H][x])n[x]=0;else{if(x>=l&&x<y&&H>=u)for(N=N<<1&t,v=0;v<w;v++){if(M=H+A[v],K=x+z[v],M=r[M][K])M=G[v],N|=M}else for(N=0,J=f-1,v=0;v<f;v++,J--)K=x+q[v],0<=K&&K<b&&(M=H+m[v],0<=M&&(M=r[M][K])&&(N|=M<<J));v=L.readBit(h,N);n[x]=v}}return r}function n(a,
b,c,d,g,e,f,h,l){var k=D[c].coding;0===c&&(k=k.concat([h[0]]));var q=k.length,m=new Int32Array(q),n=new Int32Array(q),t;for(t=0;t<q;t++)m[t]=k[t].x,n[t]=k[t].y;var r=D[c].reference;0===c&&(r=r.concat([h[1]]));h=r.length;k=new Int32Array(h);var y=new Int32Array(h);for(t=0;t<h;t++)k[t]=r[t].x,y[t]=r[t].y;r=d[0].length;var u=d.length;c=Q[c];var L=[],v=l.decoder;l=l.contextCache.getContexts("GR");for(var w=0,z=0;z<b;z++){f&&(t=v.readBit(l,c),(w^=t)&&p("JBIG2 error: prediction is not supported"));var A=
new Uint8Array(a);L.push(A);for(var G=0;G<a;G++){var x=0;for(t=0;t<q;t++){var M=z+n[t];var C=G+m[t];x=0>M||0>C||C>=a?x<<1:x<<1|L[M][C]}for(t=0;t<h;t++)M=z+y[t]+e,C=G+k[t]+g,x=0>M||M>=u||0>C||C>=r?x<<1:x<<1|d[M][C];t=v.readBit(l,x);A[G]=t}}return L}function r(a,b,c,d,g,e,f,k,q,m,t,r,u,L,v,w,z){a&&p("JBIG2 error: huffman is not supported");a=[];for(L=0;L<d;L++){var y=new Uint8Array(c);if(g)for(var A=0;A<c;A++)y[A]=g;a.push(y)}d=z.decoder;g=z.contextCache;A=-h(g,"IADT",d);var G=0;for(L=0;L<e;){var x=
h(g,"IADT",d);A+=x;x=h(g,"IAFS",d);x=G+=x;do{var C=1===f?0:h(g,"IAIT",d);y=f*A+C;C=l(g,d,q);var D=b&&h(g,"IARI",d);C=k[C];var M=C[0].length,K=C.length;if(D){D=h(g,"IARDW",d);var B=h(g,"IARDH",d),N=h(g,"IARDX",d),H=h(g,"IARDY",d);M+=D;K+=B;C=n(M,K,v,C,(D>>1)+N,(B>>1)+H,!1,w,z)}D=y-(r&1?0:K);B=x-(r&2?M:0);if(m){for(N=0;N<K;N++)if(y=a[B+N]){var J=C[N];var E=Math.min(c-D,M);switch(u){case 0:for(H=0;H<E;H++)y[D+H]|=J[H];break;case 2:for(H=0;H<E;H++)y[D+H]^=J[H];break;default:p("JBIG2 error: operator "+
u+" is not supported")}}x+=K-1}else{for(H=0;H<K;H++)if(y=a[D+H])switch(J=C[H],u){case 0:for(N=0;N<M;N++)y[B+N]|=J[N];break;case 2:for(N=0;N<M;N++)y[B+N]^=J[N];break;default:p("JBIG2 error: operator "+u+" is not supported")}x+=M-1}L++;C=h(g,"IADS",d);if(null===C)break;x+=C+t}while(1)}return a}function w(a,b){return{width:d(a,b),height:d(a,b+4),x:d(a,b+8),y:d(a,b+12),combinationOperator:a[b+16]&7}}function q(){}function G(){}c.prototype={getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};
e.prototype={get decoder(){var a=new g(this.data,this.start,this.end);return f(this,"decoder",a)},get contextCache(){var a=new c;return f(this,"contextCache",a)}};var L=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,
null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],C=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,
y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],D=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,
y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],B=[39717,1941,229,405],Q=[32,8];q.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=b},drawBitmap:function(a,b){var c=this.currentPageInfo,d=a.width,g=a.height,e=c.width+7>>3,f=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator;
c=this.buffer;var h=128>>(a.x&7);a=a.y*e+(a.x>>3);var l;switch(f){case 0:for(f=0;f<g;f++){var k=h;var q=a;for(l=0;l<d;l++)b[f][l]&&(c[q]|=k),k>>=1,k||(k=128,q++);a+=e}break;case 2:for(f=0;f<g;f++){k=h;q=a;for(l=0;l<d;l++)b[f][l]&&(c[q]^=k),k>>=1,k||(k=128,q++);a+=e}break;default:p("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(a,b,c,d){var g=a.info;b=new e(b,c,d);a=m(a.mmr,g.width,g.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(g,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,
arguments)},onSymbolDictionary:function(b,c,d,g,f,k){b.huffman&&p("JBIG2 error: huffman is not supported");var q=this.symbols;q||(this.symbols=q={});for(var t=[],y=0,u=d.length;y<u;y++)t=t.concat(q[d[y]]);k=new e(g,f,k);y=b.huffman;u=b.refinement;d=t;t=b.numberOfNewSymbols;var L=b.template,v=b.at,w=b.refinementTemplate,z=b.refinementAt;y&&p("JBIG2 error: huffman is not supported");b=[];var A=0,G=a(d.length+t);g=k.decoder;for(f=k.contextCache;b.length<t;){var C=h(f,"IADH",g);A+=C;for(C=0;;){var x=
h(f,"IADW",g);if(null===x)break;C+=x;if(u)if(x=h(f,"IAAI",g),1<x)x=r(y,u,C,A,0,x,1,d.concat(b),G,0,0,1,0,void 0,w,z,k);else{x=l(f,g,G);var D=h(f,"IARDX",g),K=h(f,"IARDY",g);x=n(C,A,w,x<d.length?d[x]:b[x-d.length],D,K,!1,z,k)}else x=m(!1,C,A,L,!1,null,v,k);b.push(x)}}k=[];y=[];u=!1;for(L=d.length+t;y.length<L;){for(v=h(f,"IAEX",g);v--;)y.push(u);u=!u}g=0;for(f=d.length;g<f;g++)y[g]&&k.push(d[g]);for(d=0;d<t;g++,d++)y[g]&&k.push(b[d]);q[c]=k},onImmediateTextRegion:function(b,c,d,g,f){for(var h=b.info,
l=this.symbols,k=[],q=0,m=c.length;q<m;q++)k=k.concat(l[c[q]]);c=a(k.length);d=new e(d,g,f);b=r(b.huffman,b.refinement,h.width,h.height,b.defaultPixelValue,b.numberOfSymbolInstances,b.stripSize,k,c,b.transposed,b.dsOffset,b.referenceCorner,b.combinationOperator,void 0,b.refinementTemplate,b.refinementAt,d);this.drawBitmap(h,b)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}};G.prototype={parseChunks:function(a){for(var c=new q,g=0,e=a.length;g<e;g++){for(var f=
a[g],h={},l=f.data,k=f.end,m=[],n=f.start;n<k;){f=l;var t=n;n={};n.number=d(f,t);var r=f[t+4];var u=r&63;L[u]||p("JBIG2 error: invalid segment type: "+u);n.type=u;n.typeName=L[u];n.deferredNonRetain=!!(r&128);r=!!(r&64);var v=f[t+5],z=v>>5&7;var A=[v&31];t+=6;if(7===v)for(z=d(f,t-1)&536870911,t+=3,v=z+7>>3,A[0]=f[t++];0<--v;)A.push(f[t++]);else 5!==v&&6!==v||p("JBIG2 error: invalid referred-to flags");n.retainBits=A;v=256>=n.number?1:65536>=n.number?2:4;var G=[];for(A=0;A<z;A++){var x=1===v?f[t]:
2===v?b(f,t):d(f,t);G.push(x);t+=v}n.referredTo=G;r?(n.pageAssociation=d(f,t),t+=4):n.pageAssociation=f[t++];n.length=d(f,t);t+=4;if(4294967295===n.length)if(38===u){r=w(f,t);z=!!(f[t+17]&1);u=new Uint8Array(6);z||(u[0]=255,u[1]=172);u[2]=r.height>>>24&255;u[3]=r.height>>16&255;u[4]=r.height>>8&255;u[5]=r.height&255;A=t;for(r=f.length;A<r;A++){for(z=0;6>z&&u[z]===f[A+z];)z++;if(6===z){n.length=A+6;break}}4294967295===n.length&&p("JBIG2 error: segment end was not found")}else p("JBIG2 error: invalid unknown segment length");
n.headerEnd=t;f=n;n=f.headerEnd;t={header:f,data:l};h.randomAccess||(t.start=n,n+=f.length,t.end=n);m.push(t);if(51===f.type)break}if(h.randomAccess)for(h=0,l=m.length;h<l;h++)m[h].start=n,n+=m[h].header.length,m[h].end=n;h=c;l=0;for(k=m.length;l<k;l++){z=void 0;r=m[l];f=h;n=r.header;t=r.data;u=r.start;r=r.end;switch(n.type){case 0:G={};z=b(t,u);G.huffman=!!(z&1);G.refinement=!!(z&2);G.huffmanDHSelector=z>>2&3;G.huffmanDWSelector=z>>4&3;G.bitmapSizeSelector=z>>6&1;G.aggregationInstancesSelector=z>>
7&1;G.bitmapCodingContextUsed=!!(z&256);G.bitmapCodingContextRetained=!!(z&512);G.template=z>>10&3;G.refinementTemplate=z>>12&1;u+=2;if(!G.huffman){v=0===G.template?4:1;A=[];for(z=0;z<v;z++)A.push({x:t[u]<<24>>24,y:t[u+1]<<24>>24}),u+=2;G.at=A}if(G.refinement&&!G.refinementTemplate){A=[];for(z=0;2>z;z++)A.push({x:t[u]<<24>>24,y:t[u+1]<<24>>24}),u+=2;G.refinementAt=A}G.numberOfExportedSymbols=d(t,u);u+=4;G.numberOfNewSymbols=d(t,u);z=[G,n.number,n.referredTo,t,u+4,r];break;case 6:case 7:v={};v.info=
w(t,u);u+=17;z=b(t,u);u+=2;v.huffman=!!(z&1);v.refinement=!!(z&2);v.stripSize=1<<(z>>2&3);v.referenceCorner=z>>4&3;v.transposed=!!(z&64);v.combinationOperator=z>>7&3;v.defaultPixelValue=z>>9&1;v.dsOffset=z<<17>>27;v.refinementTemplate=z>>15&1;v.huffman&&(z=b(t,u),u+=2,v.huffmanFS=z&3,v.huffmanDS=z>>2&3,v.huffmanDT=z>>4&3,v.huffmanRefinementDW=z>>6&3,v.huffmanRefinementDH=z>>8&3,v.huffmanRefinementDX=z>>10&3,v.huffmanRefinementDY=z>>12&3,v.huffmanRefinementSizeSelector=!!(z&14));if(v.refinement&&!v.refinementTemplate){A=
[];for(z=0;2>z;z++)A.push({x:t[u]<<24>>24,y:t[u+1]<<24>>24}),u+=2;v.refinementAt=A}v.numberOfSymbolInstances=d(t,u);u+=4;v.huffman&&p("JBIG2 error: huffman is not supported");z=[v,n.referredTo,t,u,r];break;case 38:case 39:G={};G.info=w(t,u);u+=17;z=t[u++];G.mmr=!!(z&1);G.template=z>>1&3;G.prediction=!!(z&8);if(!G.mmr){v=0===G.template?4:1;A=[];for(z=0;z<v;z++)A.push({x:t[u]<<24>>24,y:t[u+1]<<24>>24}),u+=2;G.at=A}z=[G,t,u,r];break;case 48:r={width:d(t,u),height:d(t,u+4),resolutionX:d(t,u+8),resolutionY:d(t,
u+12)};4294967295===r.height&&delete r.height;z=t[u+16];b(t,u+17);r.lossless=!!(z&1);r.refinement=!!(z&2);r.defaultPixelValue=z>>2&1;r.combinationOperator=z>>3&3;r.requiresBuffer=!!(z&32);r.combinationOperatorOverride=!!(z&64);z=[r];break;case 49:break;case 50:break;case 51:break;case 62:break;default:p("JBIG2 error: segment type "+n.typeName+"("+n.type+") is not implemented")}n="on"+n.typeName;n in f&&f[n].apply(f,z)}}return c}};return G}(),p=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+
arguments[0]);},h=function(){console.warn.apply(console,arguments)},B=function(){console.info.apply(console,arguments)};m.prototype.parse=function(a){var b=0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||p("JBIG2 error: invalid header");b+=8;a[b++]&2||(d(a,b),b+=4);a=this.parseChunks([{data:a,start:b,end:c}]);b=a.currentPageInfo.width;c=a.currentPageInfo.height;var g=a.buffer;a=new Uint8Array(b*c);for(var e=0,f=0,h=0;h<c;h++)for(var l=
0,k,q=0;q<b;q++)l||(l=128,k=g[f++]),a[e++]=k&l?0:255,l>>=1;this.width=b;this.height=c;this.data=a};c.JpegImage=e;c.JpxImage=k;c.Jbig2Image=m})(f||(f={}));p.exports={JpegImage:e,JpegDecoder:f.JpegImage,JpxDecoder:f.JpxImage,Jbig2Decoder:f.Jbig2Image}},function(p,e,m){m.d(e,"a",function(){return k});var k=function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");};k.RPC_ID="ndstore/VolumeChunkSource"},function(p,e,m){e.a=function(d,e){e=Object(a.a)(Object(b.inflate)(new Uint8Array(e)));
var l=d.chunkDataSize,g=d.source,m=g.spec.numChannels,n=e.shape;if(4!==n.length||n[0]!==m||n[1]!==l[2]||n[2]!==l[1]||n[3]!==l[0])throw Error("Shape "+JSON.stringify(n)+" does not match chunkDataSize "+Object(c.n)(l));l=e.dataType.dataType;g=g.spec;if(l!==g.dataType)throw Error("Data type "+f.a[l]+" does not match "+("expected data type "+f.a[g.dataType]));Object(k.a)(d,e.data)};var k=m(26),f=m(9),c=m(1),a=m(103),b=m(27);m.n(b)},function(p,e,m){e.a=function(a){if(147!==a[0]||78!==a[1]||85!==a[2]||
77!==a[3]||80!==a[4]||89!==a[5])throw Error("Data does not match npy format.");var b=a[6],d=a[7];if(1!==b||0!==d)throw Error("Unsupported npy version "+b+"."+d);b=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(8,!0);d=(new TextDecoder("utf-8")).decode(a.subarray(10,b+10));b+=10;try{var e=Object(f.d)(d)}catch(u){throw Error("Failed to parse npy header: "+u);}var l=e.descr;d=e.shape;var h=1;if(!Array.isArray(d))throw Error("Invalid shape ${JSON.stringify(shape)}");for(var k=$jscomp.makeIterator(d),
m=k.next();!m.done;m=k.next()){m=m.value;if("number"!==typeof m)throw Error("Invalid shape ${JSON.stringify(shape)}");h*=m}k=c.get(l);if(void 0===k)throw Error("Unsupported numpy data type "+JSON.stringify(l));l=k.arrayConstructor;h*=k.javascriptElementsPerArrayElement;if(l.BYTES_PER_ELEMENT*h+b!==a.byteLength)throw Error("Expected length does not match length of data");a=new l(a.buffer,a.byteOffset+b,h);k.fixEndianness(a);return new n(a,d,k,!0===e.fortran_order)};p=m(14);var k=m(11),f=m(3),c=new Map;
c.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:p.b.UINT8});c.set("|i1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:p.b.UINT8});m={};e=$jscomp.makeIterator([["<",k.b.LITTLE],[">",k.b.BIG]]);for(var a=e.next();!a.done;m={endianness:m.endianness},a=e.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;m.endianness=b.next().value;b=$jscomp.makeIterator(["u",
"i"]);for(var d=b.next();!d.done;d=b.next())d=d.value,c.set(""+a+d+"2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(a){return function(b){Object(k.c)(b,a.endianness)}}(m),javascriptElementsPerArrayElement:1,dataType:p.b.UINT16}),c.set(""+a+d+"4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(k.d)(b,a.endianness)}}(m),javascriptElementsPerArrayElement:1,dataType:p.b.UINT32}),c.set(""+a+d+"8",{arrayConstructor:Uint32Array,elementBytes:8,
fixEndianness:function(a){return function(b){Object(k.d)(b,a.endianness)}}(m),javascriptElementsPerArrayElement:2,dataType:p.b.UINT64});c.set(a+"f4",{arrayConstructor:Float32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(k.d)(b,a.endianness)}}(m),javascriptElementsPerArrayElement:1,dataType:p.b.FLOAT32})}var n=function g(a,b,c,d){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this.data=a;this.shape=b;this.dataType=c;this.fortranOrder=d}},
function(p,e,m){function k(g){if(!(this instanceof k))return new k(g);g=this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},g||{});g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&16>g.windowBits&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new n;this.strm.avail_out=0;var e=c.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(0!==e)throw Error(d[e]);g.header&&c.deflateSetHeader(this.strm,
g.header);if(g.dictionary){g="string"===typeof g.dictionary?b.string2buf(g.dictionary):"[object ArrayBuffer]"===l.call(g.dictionary)?new Uint8Array(g.dictionary):g.dictionary;e=c.deflateSetDictionary(this.strm,g);if(0!==e)throw Error(d[e]);this._dict_set=!0}}function f(a,b){b=new k(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}var c=m(105),a=m(6),b=m(48),d=m(28),n=m(49),l=Object.prototype.toString;k.prototype.push=function(d,e){var g=this.strm,f=this.options.chunkSize;if(this.ended)return!1;
e=e===~~e?e:!0===e?4:0;"string"===typeof d?g.input=b.string2buf(d):"[object ArrayBuffer]"===l.call(d)?g.input=new Uint8Array(d):g.input=d;g.next_in=0;g.avail_in=g.input.length;do{0===g.avail_out&&(g.output=new a.Buf8(f),g.next_out=0,g.avail_out=f);d=c.deflate(g,e);if(1!==d&&0!==d)return this.onEnd(d),this.ended=!0,!1;if(0===g.avail_out||0===g.avail_in&&(4===e||2===e))if("string"===this.options.to)this.onData(b.buf2binstring(a.shrinkBuf(g.output,g.next_out)));else this.onData(a.shrinkBuf(g.output,
g.next_out))}while((0<g.avail_in||0===g.avail_out)&&1!==d);if(4===e)return d=c.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,0===d;2===e&&(this.onEnd(0),g.avail_out=0);return!0};k.prototype.onData=function(a){this.chunks.push(a)};k.prototype.onEnd=function(b){0===b&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};e.Deflate=k;e.deflate=f;e.deflateRaw=function(a,b){b=b||{};b.raw=!0;return f(a,b)};e.gzip=
function(a,b){b=b||{};b.gzip=!0;return f(a,b)}},function(p,e,m){function k(a,b){a.msg=z[b];return b}function f(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(J.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function a(a,b){v._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=
a.strstart;c(a.strm)}function b(a,b){a.pending_buf[a.pending++]=b}function d(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function n(a,b){var c=a.max_chain_length,d=a.strstart,g=a.prev_length,e=a.nice_match,f=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,h=a.window,l=a.w_mask,k=a.prev,m=a.strstart+258,q=h[d+g-1],t=h[d+g];a.prev_length>=a.good_match&&(c>>=2);e>a.lookahead&&(e=a.lookahead);do{var n=b;if(h[n+g]===t&&h[n+g-1]===q&&h[n]===h[d]&&h[++n]===h[d+1]){d+=2;
for(n++;h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&h[++d]===h[++n]&&d<m;);n=258-(m-d);d=m-258;if(n>g){a.match_start=b;g=n;if(n>=e)break;q=h[d+g-1];t=h[d+g]}}}while((b=k[b&l])>f&&0!==--c);return g<=a.lookahead?g:a.lookahead}function l(a){var b=a.w_size,c;do{var d=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){J.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;var g=c=a.hash_size;
do{var e=a.head[--g];a.head[g]=e>=b?e-b:0}while(--c);g=c=b;do e=a.prev[--g],a.prev[g]=e>=b?e-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;g=a.strm;c=a.window;e=a.strstart+a.lookahead;var f=g.avail_in;f>d&&(f=d);0===f?c=0:(g.avail_in-=f,J.arraySet(c,g.input,g.next_in,f,e),1===g.state.wrap?g.adler=A(g.adler,c,f,e):2===g.state.wrap&&(g.adler=t(g.adler,c,f,e)),g.next_in+=f,g.total_in+=f,c=f);a.lookahead+=c;if(3<=a.lookahead+a.insert)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<
a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function g(b,c){for(var d;;){if(262>b.lookahead){l(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],
b.head[b.ins_h]=b.strstart);0!==d&&b.strstart-d<=b.w_size-262&&(b.match_length=n(b,d));if(3<=b.match_length)if(d=v._tr_tally(b,b.strstart-b.match_start,b.match_length-3),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&3<=b.lookahead){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(0!==--b.match_length);b.strstart++}else b.strstart+=b.match_length,b.match_length=
0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else d=v._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function r(b,c){for(var d,g;;){if(262>b.lookahead){l(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<
b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);b.prev_length=b.match_length;b.prev_match=b.match_start;b.match_length=2;0!==d&&b.prev_length<b.max_lazy_match&&b.strstart-d<=b.w_size-262&&(b.match_length=n(b,d),5>=b.match_length&&(1===b.strategy||3===b.match_length&&4096<b.strstart-b.match_start)&&(b.match_length=2));if(3<=b.prev_length&&b.match_length<=b.prev_length){g=b.strstart+b.lookahead-3;d=v._tr_tally(b,b.strstart-
1-b.prev_match,b.prev_length-3);b.lookahead-=b.prev_length-1;b.prev_length-=2;do++b.strstart<=g&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(0!==--b.prev_length);b.match_available=0;b.match_length=2;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}else if(b.match_available){if((d=v._tr_tally(b,0,b.window[b.strstart-1]))&&a(b,!1),b.strstart++,b.lookahead--,0===b.strm.avail_out)return 1}else b.match_available=
1,b.strstart++,b.lookahead--}b.match_available&&(v._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0);b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function C(b,c){for(var d,g,e,f=b.window;;){if(258>=b.lookahead){l(b);if(258>=b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.match_length=0;if(3<=b.lookahead&&0<b.strstart&&(g=b.strstart-1,d=f[g],d===f[++g]&&d===f[++g]&&d===f[++g])){for(e=b.strstart+258;d===
f[++g]&&d===f[++g]&&d===f[++g]&&d===f[++g]&&d===f[++g]&&d===f[++g]&&d===f[++g]&&d===f[++g]&&g<e;);b.match_length=258-(e-g);b.match_length>b.lookahead&&(b.match_length=b.lookahead)}3<=b.match_length?(d=v._tr_tally(b,1,b.match_length-3),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(d=v._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++);if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),
0===b.strm.avail_out)?1:2}function w(b,c){for(var d;;){if(0===b.lookahead&&(l(b),0===b.lookahead)){if(0===c)return 1;break}b.match_length=0;d=v._tr_tally(b,0,b.window[b.strstart]);b.lookahead--;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function h(a,b,c,d,g){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=g}function B(){this.strm=null;this.status=
0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=
this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new J.Buf16(1146);this.dyn_dtree=new J.Buf16(122);this.bl_tree=new J.Buf16(78);f(this.dyn_ltree);f(this.dyn_dtree);f(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new J.Buf16(16);this.heap=new J.Buf16(573);f(this.heap);this.heap_max=this.heap_len=0;this.depth=new J.Buf16(573);f(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=
this.l_buf=0}function I(a){if(!a||!a.state)return k(a,-2);a.total_in=a.total_out=0;a.data_type=2;var b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;v._tr_init(b);return 0}function u(a){var b=I(a);0===b&&(a=a.state,a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=H[a.level].max_lazy,a.good_match=H[a.level].good_length,a.nice_match=H[a.level].nice_length,a.max_chain_length=H[a.level].max_chain,a.strstart=0,a.block_start=
0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function x(a,b,c,d,g,e){if(!a)return-2;var f=1;-1===b&&(b=6);0>d?(f=0,d=-d):15<d&&(f=2,d-=16);if(1>g||9<g||8!==c||8>d||15<d||0>b||9<b||0>e||4<e)return k(a,-2);8===d&&(d=9);var h=new B;a.state=h;h.strm=a;h.wrap=f;h.gzhead=null;h.w_bits=d;h.w_size=1<<h.w_bits;h.w_mask=h.w_size-1;h.hash_bits=g+7;h.hash_size=1<<h.hash_bits;h.hash_mask=h.hash_size-1;h.hash_shift=~~((h.hash_bits+3-1)/3);h.window=new J.Buf8(2*
h.w_size);h.head=new J.Buf16(h.hash_size);h.prev=new J.Buf16(h.w_size);h.lit_bufsize=1<<g+6;h.pending_buf_size=4*h.lit_bufsize;h.pending_buf=new J.Buf8(h.pending_buf_size);h.d_buf=1*h.lit_bufsize;h.l_buf=3*h.lit_bufsize;h.level=b;h.strategy=e;h.method=c;return u(a)}var J=m(6),v=m(106),A=m(46),t=m(47),z=m(28);var H=[new h(0,0,0,0,function(b,c){var d=65535;for(d>b.pending_buf_size-5&&(d=b.pending_buf_size-5);;){if(1>=b.lookahead){l(b);if(0===b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.strstart+=
b.lookahead;b.lookahead=0;var g=b.block_start+d;if(0===b.strstart||b.strstart>=g)if(b.lookahead=b.strstart-g,b.strstart=g,a(b,!1),0===b.strm.avail_out)return 1;if(b.strstart-b.block_start>=b.w_size-262&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;if(4===c)return a(b,!0),0===b.strm.avail_out?3:4;b.strstart>b.block_start&&a(b,!1);return 1}),new h(4,4,8,4,g),new h(4,5,16,8,g),new h(4,6,32,32,g),new h(4,4,16,16,r),new h(8,16,32,32,r),new h(8,16,128,128,r),new h(8,32,128,256,r),new h(32,128,258,
1024,r),new h(32,258,258,4096,r)];e.deflateInit=function(a,b){return x(a,b,8,15,8,0)};e.deflateInit2=x;e.deflateReset=u;e.deflateResetKeep=I;e.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};e.deflate=function(a,g){if(!a||!a.state||5<g||0>g)return a?k(a,-2):-2;var e=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===e.status&&4!==g)return k(a,0===a.avail_out?-5:-2);e.strm=a;var h=e.last_flush;e.last_flush=g;if(42===e.status)if(2===e.wrap)a.adler=
0,b(e,31),b(e,139),b(e,8),e.gzhead?(b(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),b(e,e.gzhead.time&255),b(e,e.gzhead.time>>8&255),b(e,e.gzhead.time>>16&255),b(e,e.gzhead.time>>24&255),b(e,9===e.level?2:2<=e.strategy||2>e.level?4:0),b(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(b(e,e.gzhead.extra.length&255),b(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(a.adler=t(a.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=
69):(b(e,0),b(e,0),b(e,0),b(e,0),b(e,0),b(e,9===e.level?2:2<=e.strategy||2>e.level?4:0),b(e,3),e.status=113);else{var l=8+(e.w_bits-8<<4)<<8;l|=(2<=e.strategy||2>e.level?0:6>e.level?1:6===e.level?2:3)<<6;0!==e.strstart&&(l|=32);e.status=113;d(e,l+(31-l%31));0!==e.strstart&&(d(e,a.adler>>>16),d(e,a.adler&65535));a.adler=1}if(69===e.status)if(e.gzhead.extra){for(l=e.pending;e.gzindex<(e.gzhead.extra.length&65535)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,
e.pending-l,l)),c(a),l=e.pending,e.pending!==e.pending_buf_size));)b(e,e.gzhead.extra[e.gzindex]&255),e.gzindex++;e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,e.pending-l,l));e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){l=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,e.pending-l,l)),c(a),l=e.pending,e.pending===e.pending_buf_size)){var m=1;break}m=e.gzindex<
e.gzhead.name.length?e.gzhead.name.charCodeAt(e.gzindex++)&255:0;b(e,m)}while(0!==m);e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,e.pending-l,l));0===m&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){l=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,e.pending-l,l)),c(a),l=e.pending,e.pending===e.pending_buf_size)){m=1;break}m=e.gzindex<e.gzhead.comment.length?e.gzhead.comment.charCodeAt(e.gzindex++)&
255:0;b(e,m)}while(0!==m);e.gzhead.hcrc&&e.pending>l&&(a.adler=t(a.adler,e.pending_buf,e.pending-l,l));0===m&&(e.status=103)}else e.status=103;103===e.status&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&c(a),e.pending+2<=e.pending_buf_size&&(b(e,a.adler&255),b(e,a.adler>>8&255),a.adler=0,e.status=113)):e.status=113);if(0!==e.pending){if(c(a),0===a.avail_out)return e.last_flush=-1,0}else if(0===a.avail_in&&(g<<1)-(4<g?9:0)<=(h<<1)-(4<h?9:0)&&4!==g)return k(a,-5);if(666===e.status&&0!==a.avail_in)return k(a,
-5);if(0!==a.avail_in||0!==e.lookahead||0!==g&&666!==e.status){h=2===e.strategy?w(e,g):3===e.strategy?C(e,g):H[e.level].func(e,g);if(3===h||4===h)e.status=666;if(1===h||3===h)return 0===a.avail_out&&(e.last_flush=-1),0;if(2===h&&(1===g?v._tr_align(e):5!==g&&(v._tr_stored_block(e,0,0,!1),3===g&&(f(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),c(a),0===a.avail_out))return e.last_flush=-1,0}if(4!==g)return 0;if(0>=e.wrap)return 1;2===e.wrap?(b(e,a.adler&255),b(e,a.adler>>8&255),
b(e,a.adler>>16&255),b(e,a.adler>>24&255),b(e,a.total_in&255),b(e,a.total_in>>8&255),b(e,a.total_in>>16&255),b(e,a.total_in>>24&255)):(d(e,a.adler>>>16),d(e,a.adler&65535));c(a);0<e.wrap&&(e.wrap=-e.wrap);return 0!==e.pending?0:1};e.deflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return k(a,-2);a.state=null;return 113===b?k(a,-3):0};e.deflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;
var e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=A(a.adler,b,c,0));d.wrap=0;if(c>=d.w_size){0===e&&(f(d.head),d.strstart=0,d.block_start=0,d.insert=0);var g=new J.Buf8(d.w_size);J.arraySet(g,b,c-d.w_size,d.w_size,0);b=g;c=d.w_size}g=a.avail_in;var h=a.next_in;var k=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(l(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=
b,b++;while(--c);d.strstart=b;d.lookahead=2;l(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=h;a.input=k;a.avail_in=g;d.wrap=e;return 0};e.deflateInfo="pako deflate (from Nodeca project)"},function(p,e,m){function k(a){for(var b=a.length;0<=--b;)a[b]=0}function f(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=a&&a.length}function c(a,
b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function a(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function b(b,c,d){b.bi_valid>16-d?(b.bi_buf|=c<<b.bi_valid&65535,a(b,b.bi_buf),b.bi_buf=c>>16-b.bi_valid,b.bi_valid+=d-16):(b.bi_buf|=c<<b.bi_valid&65535,b.bi_valid+=d)}function d(a,c,d){b(a,d[2*c],d[2*c+1])}function n(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function l(a,b,c){var d=Array(16),e=0,g;for(g=1;15>=g;g++)d[g]=e=e+c[g-1]<<1;for(c=
0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=n(d[e]++,e))}function g(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function r(b){8<b.bi_valid?a(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function C(a,b,c,d){var e=2*b,g=2*c;return a[e]<a[g]||a[e]===a[g]&&d[b]<=d[c]}function w(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<
a.heap_len&&C(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(C(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function h(a,c,e){var g=0;if(0!==a.last_lit){do{var f=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1];var h=a.pending_buf[a.l_buf+g];g++;if(0===f)d(a,h,c);else{var l=K[h];d(a,l+256+1,c);var k=A[l];0!==k&&(h-=D[l],b(a,h,k));f--;l=256>f?L[f]:L[256+(f>>>7)];d(a,l,e);k=t[l];0!==k&&(f-=E[l],b(a,f,k))}}while(g<a.last_lit)}d(a,256,c)}function B(a,b){var c=b.dyn_tree,
d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,g=b.stat_desc.elems,f,h=-1;a.heap_len=0;a.heap_max=573;for(f=0;f<g;f++)0!==c[2*f]?(a.heap[++a.heap_len]=h=f,a.depth[f]=0):c[2*f+1]=0;for(;2>a.heap_len;){var k=a.heap[++a.heap_len]=2>h?++h:0;c[2*k]=1;a.depth[k]=0;a.opt_len--;e&&(a.static_len-=d[2*k+1])}b.max_code=h;for(f=a.heap_len>>1;1<=f;f--)w(a,c,f);k=g;do f=a.heap[1],a.heap[1]=a.heap[a.heap_len--],w(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=f,a.heap[--a.heap_max]=d,c[2*k]=c[2*f]+c[2*d],a.depth[k]=
(a.depth[f]>=a.depth[d]?a.depth[f]:a.depth[d])+1,c[2*f+1]=c[2*d+1]=k,a.heap[1]=k++,w(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];f=b.dyn_tree;k=b.max_code;d=b.stat_desc.static_tree;e=b.stat_desc.has_stree;g=b.stat_desc.extra_bits;var m=b.stat_desc.extra_base,n=b.stat_desc.max_length,t,p=0;for(t=0;15>=t;t++)a.bl_count[t]=0;f[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++){var q=a.heap[b];t=f[2*f[2*q+1]+1]+1;t>n&&(t=n,p++);f[2*q+1]=t;if(!(q>k)){a.bl_count[t]++;var r=0;q>=m&&(r=
g[q-m]);var u=f[2*q];a.opt_len+=u*(t+r);e&&(a.static_len+=u*(d[2*q+1]+r))}}if(0!==p){do{for(t=n-1;0===a.bl_count[t];)t--;a.bl_count[t]--;a.bl_count[t+1]+=2;a.bl_count[n]--;p-=2}while(0<p);for(t=n;0!==t;t--)for(q=a.bl_count[t];0!==q;)d=a.heap[--b],d>k||(f[2*d+1]!==t&&(a.opt_len+=(t-f[2*d+1])*f[2*d],f[2*d+1]=t),q--)}l(c,h,a.bl_count)}function I(a,b,c){var d,e=-1,g=b[1],f=0,h=7,l=4;0===g&&(h=138,l=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++){var k=g;g=b[2*(d+1)+1];++f<h&&k===g||(f<l?a.bl_tree[2*k]+=f:0!==
k?(k!==e&&a.bl_tree[2*k]++,a.bl_tree[32]++):10>=f?a.bl_tree[34]++:a.bl_tree[36]++,f=0,e=k,0===g?(h=138,l=3):k===g?(h=6,l=3):(h=7,l=4))}}function u(a,c,e){var g,f=-1,h=c[1],l=0,k=7,m=4;0===h&&(k=138,m=3);for(g=0;g<=e;g++){var t=h;h=c[2*(g+1)+1];if(!(++l<k&&t===h)){if(l<m){do d(a,t,a.bl_tree);while(0!==--l)}else 0!==t?(t!==f&&(d(a,t,a.bl_tree),l--),d(a,16,a.bl_tree),b(a,l-3,2)):10>=l?(d(a,17,a.bl_tree),b(a,l-3,3)):(d(a,18,a.bl_tree),b(a,l-11,7));l=0;f=t;0===h?(k=138,m=3):t===h?(k=6,m=3):(k=7,m=4)}}}
function x(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function J(c,d,e,g){b(c,0+(g?1:0),3);r(c);a(c,e);a(c,~e);v.arraySet(c.pending_buf,c.window,d,e,c.pending);c.pending+=e}var v=m(6),A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],t=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(576);k(q);var G=Array(60);k(G);var L=Array(512);k(L);var K=Array(256);k(K);var D=Array(29);k(D);var E=Array(30);k(E);var Q,N,O,F=!1;e._tr_init=function(a){if(!F){var b,d,e,h=Array(16);for(e=d=0;28>e;e++)for(D[e]=d,b=0;b<1<<A[e];b++)K[d++]=e;K[d-1]=e;for(e=d=0;16>e;e++)for(E[e]=d,b=0;b<1<<t[e];b++)L[d++]=e;for(d>>=7;30>e;e++)for(E[e]=d<<7,b=0;b<1<<t[e]-7;b++)L[256+d++]=e;for(b=0;15>=b;b++)h[b]=0;for(b=0;143>=
b;)q[2*b+1]=8,b++,h[8]++;for(;255>=b;)q[2*b+1]=9,b++,h[9]++;for(;279>=b;)q[2*b+1]=7,b++,h[7]++;for(;287>=b;)q[2*b+1]=8,b++,h[8]++;l(q,287,h);for(b=0;30>b;b++)G[2*b+1]=5,G[2*b]=n(b,5);Q=new f(q,A,257,286,15);N=new f(G,t,0,30,15);O=new f([],z,0,19,7);F=!0}a.l_desc=new c(a.dyn_ltree,Q);a.d_desc=new c(a.dyn_dtree,N);a.bl_desc=new c(a.bl_tree,O);a.bi_buf=0;a.bi_valid=0;g(a)};e._tr_stored_block=J;e._tr_flush_block=function(a,c,d,e){var f=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=x(a));B(a,
a.l_desc);B(a,a.d_desc);I(a,a.dyn_ltree,a.l_desc.max_code);I(a,a.dyn_dtree,a.d_desc.max_code);B(a,a.bl_desc);for(f=18;3<=f&&0===a.bl_tree[2*H[f]+1];f--);a.opt_len+=3*(f+1)+14;var l=a.opt_len+3+7>>>3;var k=a.static_len+3+7>>>3;k<=l&&(l=k)}else l=k=d+5;if(d+4<=l&&-1!==c)J(a,c,d,e);else if(4===a.strategy||k===l)b(a,2+(e?1:0),3),h(a,q,G);else{b(a,4+(e?1:0),3);c=a.l_desc.max_code+1;d=a.d_desc.max_code+1;f+=1;b(a,c-257,5);b(a,d-1,5);b(a,f-4,4);for(l=0;l<f;l++)b(a,a.bl_tree[2*H[l]+1],3);u(a,a.dyn_ltree,
c-1);u(a,a.dyn_dtree,d-1);h(a,a.dyn_ltree,a.dyn_dtree)}g(a);e&&r(a)};e._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(K[c]+256+1)]++,a.dyn_dtree[2*(256>b?L[b]:L[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};e._tr_align=function(c){b(c,2,3);d(c,256,q);16===c.bi_valid?(a(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):8<=c.bi_valid&&
(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)}},function(p,e,m){function k(b){if(!(this instanceof k))return new k(b);var e=this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});e.raw&&0<=e.windowBits&&16>e.windowBits&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15));!(0<=e.windowBits&&16>e.windowBits)||b&&b.windowBits||(e.windowBits+=32);15<e.windowBits&&48>e.windowBits&&0===(e.windowBits&15)&&(e.windowBits|=15);this.err=0;this.msg="";this.ended=
!1;this.chunks=[];this.strm=new l;this.strm.avail_out=0;b=c.inflateInit2(this.strm,e.windowBits);if(b!==d.Z_OK)throw Error(n[b]);this.header=new g;c.inflateGetHeader(this.strm,this.header)}function f(a,b){b=new k(b);b.push(a,!0);if(b.err)throw b.msg||n[b.err];return b.result}var c=m(108),a=m(6),b=m(48),d=m(50),n=m(28),l=m(49),g=m(111),r=Object.prototype.toString;k.prototype.push=function(e,g){var f=this.strm,l=this.options.chunkSize,k=this.options.dictionary,m=!1;if(this.ended)return!1;g=g===~~g?
g:!0===g?d.Z_FINISH:d.Z_NO_FLUSH;"string"===typeof e?f.input=b.binstring2buf(e):"[object ArrayBuffer]"===r.call(e)?f.input=new Uint8Array(e):f.input=e;f.next_in=0;f.avail_in=f.input.length;do{0===f.avail_out&&(f.output=new a.Buf8(l),f.next_out=0,f.avail_out=l);e=c.inflate(f,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&k&&(e="string"===typeof k?b.string2buf(k):"[object ArrayBuffer]"===r.call(k)?new Uint8Array(k):k,e=c.inflateSetDictionary(this.strm,e));e===d.Z_BUF_ERROR&&!0===m&&(e=d.Z_OK,m=!1);if(e!==d.Z_STREAM_END&&
e!==d.Z_OK)return this.onEnd(e),this.ended=!0,!1;if(f.next_out&&(0===f.avail_out||e===d.Z_STREAM_END||0===f.avail_in&&(g===d.Z_FINISH||g===d.Z_SYNC_FLUSH)))if("string"===this.options.to){var n=b.utf8border(f.output,f.next_out);var p=f.next_out-n;var v=b.buf2string(f.output,n);f.next_out=p;f.avail_out=l-p;p&&a.arraySet(f.output,f.output,n,p,0);this.onData(v)}else this.onData(a.shrinkBuf(f.output,f.next_out));0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&e!==d.Z_STREAM_END);
e===d.Z_STREAM_END&&(g=d.Z_FINISH);if(g===d.Z_FINISH)return e=c.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===d.Z_OK;g===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),f.avail_out=0);return!0};k.prototype.onData=function(a){this.chunks.push(a)};k.prototype.onEnd=function(b){b===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};e.Inflate=k;e.inflate=f;e.inflateRaw=function(a,b){b=b||{};b.raw=!0;return f(a,
b)};e.ungzip=f},function(p,e,m){function k(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function f(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new l.Buf16(320);this.work=
new l.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(a){if(!a||!a.state)return-2;var b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new l.Buf32(852);b.distcode=b.distdyn=new l.Buf32(592);b.sane=1;b.back=-1;return 0}function a(a){if(!a||!a.state)return-2;var b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return c(a)}function b(b,c){if(!b||!b.state)return-2;
var d=b.state;if(0>c){var e=0;c=-c}else e=(c>>4)+1,48>c&&(c&=15);if(c&&(8>c||15<c))return-2;null!==d.window&&d.wbits!==c&&(d.window=null);d.wrap=e;d.wbits=c;return a(b)}function d(a,c){if(!a)return-2;var d=new f;a.state=d;d.window=null;c=b(a,c);0!==c&&(a.state=null);return c}function n(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new l.Buf8(e.wsize));d>=e.wsize?(l.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&
(a=d),l.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(l.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}var l=m(6),g=m(46),r=m(47),C=m(109),w=m(110),h=!0,B,I;e.inflateReset=a;e.inflateReset2=b;e.inflateResetKeep=c;e.inflateInit=function(a){return d(a,15)};e.inflateInit2=d;e.inflate=function(a,b){var c,d=new l.Buf8(4),e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==
a.avail_in)return-2;var f=a.state;12===f.mode&&(f.mode=13);var m=a.next_out;var p=a.output;var q=a.avail_out;var u=a.next_in;var x=a.input;var K=a.avail_in;var D=f.hold;var E=f.bits;var Q=K;var N=q;var O=0;a:for(;;)switch(f.mode){case 1:if(0===f.wrap){f.mode=13;break}for(;16>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if(f.wrap&2&&35615===D){f.check=0;d[0]=D&255;d[1]=D>>>8&255;f.check=r(f.check,d,2,0);E=D=0;f.mode=2;break}f.flags=0;f.head&&(f.head.done=!1);if(!(f.wrap&1)||(((D&255)<<8)+(D>>8))%31){a.msg=
"incorrect header check";f.mode=30;break}if(8!==(D&15)){a.msg="unknown compression method";f.mode=30;break}D>>>=4;E-=4;var F=(D&15)+8;if(0===f.wbits)f.wbits=F;else if(F>f.wbits){a.msg="invalid window size";f.mode=30;break}f.dmax=1<<F;a.adler=f.check=1;f.mode=D&512?10:12;E=D=0;break;case 2:for(;16>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.flags=D;if(8!==(f.flags&255)){a.msg="unknown compression method";f.mode=30;break}if(f.flags&57344){a.msg="unknown header flags set";f.mode=30;break}f.head&&(f.head.text=
D>>8&1);f.flags&512&&(d[0]=D&255,d[1]=D>>>8&255,f.check=r(f.check,d,2,0));E=D=0;f.mode=3;case 3:for(;32>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.head&&(f.head.time=D);f.flags&512&&(d[0]=D&255,d[1]=D>>>8&255,d[2]=D>>>16&255,d[3]=D>>>24&255,f.check=r(f.check,d,4,0));E=D=0;f.mode=4;case 4:for(;16>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.head&&(f.head.xflags=D&255,f.head.os=D>>8);f.flags&512&&(d[0]=D&255,d[1]=D>>>8&255,f.check=r(f.check,d,2,0));E=D=0;f.mode=5;case 5:if(f.flags&1024){for(;16>E;){if(0===
K)break a;K--;D+=x[u++]<<E;E+=8}f.length=D;f.head&&(f.head.extra_len=D);f.flags&512&&(d[0]=D&255,d[1]=D>>>8&255,f.check=r(f.check,d,2,0));E=D=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(f.flags&1024){var y=f.length;y>K&&(y=K);y&&(f.head&&(F=f.head.extra_len-f.length,f.head.extra||(f.head.extra=Array(f.head.extra_len)),l.arraySet(f.head.extra,x,u,y,F)),f.flags&512&&(f.check=r(f.check,x,y,u)),K-=y,u+=y,f.length-=y);if(f.length)break a}f.length=0;f.mode=7;case 7:if(f.flags&2048){if(0===K)break a;
y=0;do F=x[u+y++],f.head&&F&&65536>f.length&&(f.head.name+=String.fromCharCode(F));while(F&&y<K);f.flags&512&&(f.check=r(f.check,x,y,u));K-=y;u+=y;if(F)break a}else f.head&&(f.head.name=null);f.length=0;f.mode=8;case 8:if(f.flags&4096){if(0===K)break a;y=0;do F=x[u+y++],f.head&&F&&65536>f.length&&(f.head.comment+=String.fromCharCode(F));while(F&&y<K);f.flags&512&&(f.check=r(f.check,x,y,u));K-=y;u+=y;if(F)break a}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(f.flags&512){for(;16>E;){if(0===
K)break a;K--;D+=x[u++]<<E;E+=8}if(D!==(f.check&65535)){a.msg="header crc mismatch";f.mode=30;break}E=D=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0);a.adler=f.check=0;f.mode=12;break;case 10:for(;32>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}a.adler=f.check=k(D);E=D=0;f.mode=11;case 11:if(0===f.havedict)return a.next_out=m,a.avail_out=q,a.next_in=u,a.avail_in=K,f.hold=D,f.bits=E,2;a.adler=f.check=1;f.mode=12;case 12:if(5===b||6===b)break a;case 13:if(f.last){D>>>=E&7;E-=E&7;f.mode=27;break}for(;3>
E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.last=D&1;D>>>=1;--E;switch(D&3){case 0:f.mode=14;break;case 1:F=f;if(h){B=new l.Buf32(512);I=new l.Buf32(32);for(y=0;144>y;)F.lens[y++]=8;for(;256>y;)F.lens[y++]=9;for(;280>y;)F.lens[y++]=7;for(;288>y;)F.lens[y++]=8;w(1,F.lens,0,288,B,0,F.work,{bits:9});for(y=0;32>y;)F.lens[y++]=5;w(2,F.lens,0,32,I,0,F.work,{bits:5});h=!1}F.lencode=B;F.lenbits=9;F.distcode=I;F.distbits=5;f.mode=20;if(6===b){D>>>=2;E-=2;break a}break;case 2:f.mode=17;break;case 3:a.msg=
"invalid block type",f.mode=30}D>>>=2;E-=2;break;case 14:D>>>=E&7;for(E-=E&7;32>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if((D&65535)!==(D>>>16^65535)){a.msg="invalid stored block lengths";f.mode=30;break}f.length=D&65535;E=D=0;f.mode=15;if(6===b)break a;case 15:f.mode=16;case 16:if(y=f.length){y>K&&(y=K);y>q&&(y=q);if(0===y)break a;l.arraySet(p,x,u,y,m);K-=y;u+=y;q-=y;m+=y;f.length-=y;break}f.mode=12;break;case 17:for(;14>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.nlen=(D&31)+257;D>>>=5;E-=5;
f.ndist=(D&31)+1;D>>>=5;E-=5;f.ncode=(D&15)+4;D>>>=4;E-=4;if(286<f.nlen||30<f.ndist){a.msg="too many length or distance symbols";f.mode=30;break}f.have=0;f.mode=18;case 18:for(;f.have<f.ncode;){for(;3>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.lens[e[f.have++]]=D&7;D>>>=3;E-=3}for(;19>f.have;)f.lens[e[f.have++]]=0;f.lencode=f.lendyn;f.lenbits=7;y={bits:f.lenbits};O=w(0,f.lens,0,19,f.lencode,0,f.work,y);f.lenbits=y.bits;if(O){a.msg="invalid code lengths set";f.mode=30;break}f.have=0;f.mode=19;case 19:for(;f.have<
f.nlen+f.ndist;){for(;;){var M=f.lencode[D&(1<<f.lenbits)-1];y=M>>>24;M&=65535;if(y<=E)break;if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if(16>M)D>>>=y,E-=y,f.lens[f.have++]=M;else{if(16===M){for(F=y+2;E<F;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}D>>>=y;E-=y;if(0===f.have){a.msg="invalid bit length repeat";f.mode=30;break}F=f.lens[f.have-1];y=3+(D&3);D>>>=2;E-=2}else if(17===M){for(F=y+3;E<F;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}D>>>=y;E-=y;F=0;y=3+(D&7);D>>>=3;E-=3}else{for(F=y+7;E<F;){if(0===K)break a;
K--;D+=x[u++]<<E;E+=8}D>>>=y;E-=y;F=0;y=11+(D&127);D>>>=7;E-=7}if(f.have+y>f.nlen+f.ndist){a.msg="invalid bit length repeat";f.mode=30;break}for(;y--;)f.lens[f.have++]=F}}if(30===f.mode)break;if(0===f.lens[256]){a.msg="invalid code -- missing end-of-block";f.mode=30;break}f.lenbits=9;y={bits:f.lenbits};O=w(1,f.lens,0,f.nlen,f.lencode,0,f.work,y);f.lenbits=y.bits;if(O){a.msg="invalid literal/lengths set";f.mode=30;break}f.distbits=6;f.distcode=f.distdyn;y={bits:f.distbits};O=w(2,f.lens,f.nlen,f.ndist,
f.distcode,0,f.work,y);f.distbits=y.bits;if(O){a.msg="invalid distances set";f.mode=30;break}f.mode=20;if(6===b)break a;case 20:f.mode=21;case 21:if(6<=K&&258<=q){a.next_out=m;a.avail_out=q;a.next_in=u;a.avail_in=K;f.hold=D;f.bits=E;C(a,N);m=a.next_out;p=a.output;q=a.avail_out;u=a.next_in;x=a.input;K=a.avail_in;D=f.hold;E=f.bits;12===f.mode&&(f.back=-1);break}for(f.back=0;;){M=f.lencode[D&(1<<f.lenbits)-1];y=M>>>24;F=M>>>16&255;M&=65535;if(y<=E)break;if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if(F&&0===
(F&240)){var R=y;var X=F;for(c=M;;){M=f.lencode[c+((D&(1<<R+X)-1)>>R)];y=M>>>24;F=M>>>16&255;M&=65535;if(R+y<=E)break;if(0===K)break a;K--;D+=x[u++]<<E;E+=8}D>>>=R;E-=R;f.back+=R}D>>>=y;E-=y;f.back+=y;f.length=M;if(0===F){f.mode=26;break}if(F&32){f.back=-1;f.mode=12;break}if(F&64){a.msg="invalid literal/length code";f.mode=30;break}f.extra=F&15;f.mode=22;case 22:if(f.extra){for(F=f.extra;E<F;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}f.length+=D&(1<<f.extra)-1;D>>>=f.extra;E-=f.extra;f.back+=f.extra}f.was=
f.length;f.mode=23;case 23:for(;;){M=f.distcode[D&(1<<f.distbits)-1];y=M>>>24;F=M>>>16&255;M&=65535;if(y<=E)break;if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if(0===(F&240)){R=y;X=F;for(c=M;;){M=f.distcode[c+((D&(1<<R+X)-1)>>R)];y=M>>>24;F=M>>>16&255;M&=65535;if(R+y<=E)break;if(0===K)break a;K--;D+=x[u++]<<E;E+=8}D>>>=R;E-=R;f.back+=R}D>>>=y;E-=y;f.back+=y;if(F&64){a.msg="invalid distance code";f.mode=30;break}f.offset=M;f.extra=F&15;f.mode=24;case 24:if(f.extra){for(F=f.extra;E<F;){if(0===K)break a;K--;
D+=x[u++]<<E;E+=8}f.offset+=D&(1<<f.extra)-1;D>>>=f.extra;E-=f.extra;f.back+=f.extra}if(f.offset>f.dmax){a.msg="invalid distance too far back";f.mode=30;break}f.mode=25;case 25:if(0===q)break a;y=N-q;if(f.offset>y){y=f.offset-y;if(y>f.whave&&f.sane){a.msg="invalid distance too far back";f.mode=30;break}y>f.wnext?(y-=f.wnext,F=f.wsize-y):F=f.wnext-y;y>f.length&&(y=f.length);R=f.window}else R=p,F=m-f.offset,y=f.length;y>q&&(y=q);q-=y;f.length-=y;do p[m++]=R[F++];while(--y);0===f.length&&(f.mode=21);
break;case 26:if(0===q)break a;p[m++]=f.length;q--;f.mode=21;break;case 27:if(f.wrap){for(;32>E;){if(0===K)break a;K--;D|=x[u++]<<E;E+=8}N-=q;a.total_out+=N;f.total+=N;N&&(a.adler=f.check=f.flags?r(f.check,p,N,m-N):g(f.check,p,N,m-N));N=q;if((f.flags?D:k(D))!==f.check){a.msg="incorrect data check";f.mode=30;break}E=D=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;32>E;){if(0===K)break a;K--;D+=x[u++]<<E;E+=8}if(D!==(f.total&4294967295)){a.msg="incorrect length check";f.mode=30;break}E=D=0}f.mode=29;
case 29:O=1;break a;case 30:O=-3;break a;case 31:return-4;default:return-2}a.next_out=m;a.avail_out=q;a.next_in=u;a.avail_in=K;f.hold=D;f.bits=E;if((f.wsize||N!==a.avail_out&&30>f.mode&&(27>f.mode||4!==b))&&n(a,a.output,a.next_out,N-a.avail_out))return f.mode=31,-4;Q-=a.avail_in;N-=a.avail_out;a.total_in+=Q;a.total_out+=N;f.total+=N;f.wrap&&N&&(a.adler=f.check=f.flags?r(f.check,p,N,a.next_out-N):g(f.check,p,N,a.next_out-N));a.data_type=f.bits+(f.last?64:0)+(12===f.mode?128:0)+(20===f.mode||15===f.mode?
256:0);(0===Q&&0===N||4===b)&&0===O&&(O=-5);return O};e.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};e.inflateGetHeader=function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};e.inflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode){var f=g(1,b,c,0);if(f!==d.check)return-3}if(n(a,b,c,c))return d.mode=
31,-4;d.havedict=1;return 0};e.inflateInfo="pako inflate (from Nodeca project)"},function(p,e,m){p.exports=function(e,f){var c=e.state;var a=e.next_in;var b=e.input;var d=a+(e.avail_in-5);var k=e.next_out;var l=e.output;f=k-(f-e.avail_out);var g=k+(e.avail_out-257);var m=c.dmax;var p=c.wsize;var w=c.whave;var h=c.wnext;var B=c.window;var I=c.hold;var u=c.bits;var x=c.lencode;var J=c.distcode;var v=(1<<c.lenbits)-1;var A=(1<<c.distbits)-1;a:do{15>u&&(I+=b[a++]<<u,u+=8,I+=b[a++]<<u,u+=8);var t=x[I&
v];b:for(;;){var z=t>>>24;I>>>=z;u-=z;z=t>>>16&255;if(0===z)l[k++]=t&65535;else if(z&16){var H=t&65535;if(z&=15)u<z&&(I+=b[a++]<<u,u+=8),H+=I&(1<<z)-1,I>>>=z,u-=z;15>u&&(I+=b[a++]<<u,u+=8,I+=b[a++]<<u,u+=8);t=J[I&A];c:for(;;){z=t>>>24;I>>>=z;u-=z;z=t>>>16&255;if(z&16){t&=65535;z&=15;u<z&&(I+=b[a++]<<u,u+=8,u<z&&(I+=b[a++]<<u,u+=8));t+=I&(1<<z)-1;if(t>m){e.msg="invalid distance too far back";c.mode=30;break a}I>>>=z;u-=z;z=k-f;if(t>z){z=t-z;if(z>w&&c.sane){e.msg="invalid distance too far back";c.mode=
30;break a}var q=0;var G=B;if(0===h){if(q+=p-z,z<H){H-=z;do l[k++]=B[q++];while(--z);q=k-t;G=l}}else if(h<z){if(q+=p+h-z,z-=h,z<H){H-=z;do l[k++]=B[q++];while(--z);q=0;if(h<H){z=h;H-=z;do l[k++]=B[q++];while(--z);q=k-t;G=l}}}else if(q+=h-z,z<H){H-=z;do l[k++]=B[q++];while(--z);q=k-t;G=l}for(;2<H;)l[k++]=G[q++],l[k++]=G[q++],l[k++]=G[q++],H-=3;H&&(l[k++]=G[q++],1<H&&(l[k++]=G[q++]))}else{q=k-t;do l[k++]=l[q++],l[k++]=l[q++],l[k++]=l[q++],H-=3;while(2<H);H&&(l[k++]=l[q++],1<H&&(l[k++]=l[q++]))}}else if(0===
(z&64)){t=J[(t&65535)+(I&(1<<z)-1)];continue c}else{e.msg="invalid distance code";c.mode=30;break a}break}}else if(0===(z&64)){t=x[(t&65535)+(I&(1<<z)-1)];continue b}else{z&32?c.mode=12:(e.msg="invalid literal/length code",c.mode=30);break a}break}}while(a<d&&k<g);H=u>>3;a-=H;u-=H<<3;e.next_in=a;e.next_out=k;e.avail_in=a<d?5+(d-a):5-(a-d);e.avail_out=k<g?257+(g-k):257-(k-g);c.hold=I&(1<<u)-1;c.bits=u}},function(p,e,m){var k=m(6),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,
131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(d,e,l,g,m,p,w,h){var n=h.bits,r,u,x,C,v,A,t=0,z=new k.Buf16(16);var H=new k.Buf16(16);var q,G=0;for(r=0;15>=r;r++)z[r]=0;for(u=0;u<g;u++)z[e[l+
u]]++;var L=n;for(x=15;1<=x&&0===z[x];x--);L>x&&(L=x);if(0===x)return m[p++]=20971520,m[p++]=20971520,h.bits=1,0;for(n=1;n<x&&0===z[n];n++);L<n&&(L=n);for(r=C=1;15>=r;r++)if(C<<=1,C-=z[r],0>C)return-1;if(0<C&&(0===d||1!==x))return-1;H[1]=0;for(r=1;15>r;r++)H[r+1]=H[r]+z[r];for(u=0;u<g;u++)0!==e[l+u]&&(w[H[e[l+u]]++]=u);if(0===d){var K=q=w;var D=19}else 1===d?(K=f,t-=257,q=c,G-=257,D=256):(K=a,q=b,D=-1);u=v=0;r=n;var E=p;g=L;H=0;var Q=-1;var N=1<<L;var O=N-1;if(1===d&&852<N||2===d&&592<N)return 1;
for(;;){var F=r-H;if(w[u]<D){var y=0;var M=w[u]}else w[u]>D?(y=q[G+w[u]],M=K[t+w[u]]):(y=96,M=0);C=1<<r-H;n=A=1<<g;do A-=C,m[E+(v>>H)+A]=F<<24|y<<16|M|0;while(0!==A);for(C=1<<r-1;v&C;)C>>=1;0!==C?(v&=C-1,v+=C):v=0;u++;if(0===--z[r]){if(r===x)break;r=e[l+w[u]]}if(r>L&&(v&O)!==Q){0===H&&(H=L);E+=n;g=r-H;for(C=1<<g;g+H<x;){C-=z[g+H];if(0>=C)break;g++;C<<=1}N+=1<<g;if(1===d&&852<N||2===d&&592<N)return 1;Q=v&O;m[Q]=L<<24|g<<16|E-p|0}}0!==v&&(m[E+v]=r-H<<24|4194304);h.bits=L;return 0}},function(p,e,m){p.exports=
function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){var c=(new DataView(b)).getUint32(0,!0);Object(d.d)(a,b,C.b.LITTLE,4,c)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"DVIDSkeletonSource",function(){return I});e.decodeFragmentChunk=a;m.d(e,"DVIDMeshSource",function(){return u});m.d(e,"DVIDVolumeChunkSource",function(){return x});p=m(2);var b=
m(113),d=m(17);e=m(43);var n=m(114),l=m(25),g=m(18),r=m(16),C=m(11),w=m(15);m=m(0);var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),B=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},I=function(a){function b(){k(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);h(b,[{key:"download",value:function(a,b){var c=this.parameters;return Object(w.e)(Object(w.c)(c.baseUrls,"/api/node/"+c.nodeKey+"/"+c.dataInstanceKey+"/key/"+(""+a.objectId)+"_swc"),"arraybuffer",b).then(function(b){var c=
new TextDecoder("utf-8");Object(n.a)(a,c.decode(b))})}}]);return b}(Object(p.WithParameters)(e.a,b.b));I=B([Object(m.g)()],I);var u=function(b){function d(){k(this,d);return f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);h(d,[{key:"download",value:function(a){a.fragmentIds=[""+a.objectId];return Promise.resolve(void 0)}},{key:"downloadFragment",value:function(b,c){var d=this.parameters;return Object(w.e)(Object(w.c)(d.baseUrls,"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+
"/key/"+b.fragmentId+".ngmesh"),"arraybuffer",c).then(function(c){return a(b,c)})}}]);return d}(Object(p.WithParameters)(d.a,b.a));u=B([Object(m.g)()],u);var x=function(a){function d(){k(this,d);return f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,a);h(d,[{key:"download",value:function(a,c){var d=this.parameters;var e=this.computeChunkBounds(a);e=this.getPath(e,a.chunkDataSize);var f=this.getDecoder(d);return Object(w.e)(Object(w.c)(d.baseUrls,e),"arraybuffer",c).then(function(c){return f(a,
d.encoding===b.c.JPEG?c.slice(16):c)})}},{key:"getPath",value:function(a,c){var d=this.parameters;return d.encoding===b.c.JPEG?"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/subvolblocks/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]):d.encoding===b.c.RAW?"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]+"/jpeg"):d.encoding===b.c.COMPRESSED_SEGMENTATIONARRAY?"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+
"_"+c[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]+"?compression=googlegzip&scale="+d.dataScale):"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]+"?compression=googlegzip")}},{key:"getDecoder",value:function(a){return a.encoding===b.c.JPEG||a.encoding===b.c.RAW?g.a:l.a}}]);return d}(Object(p.WithParameters)(r.a,b.d));x=B([Object(m.g)()],x)},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"c",function(){return a});m.d(e,
"d",function(){return b});m.d(e,"b",function(){return d});m.d(e,"a",function(){return n});var a;(function(a){a[a.JPEG=0]="JPEG";a[a.RAW=1]="RAW";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION";a[a.COMPRESSED_SEGMENTATIONARRAY=3]="COMPRESSED_SEGMENTATIONARRAY"})(a||(a={}));p=function g(){c(this,g)};var b=function(a){function b(){c(this,b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(p);b.RPC_ID="dvid/VolumeChunkSource";var d=function(a){function b(){c(this,
b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(p);d.RPC_ID="dvid/SkeletonSource";var n=function(a){function b(){c(this,b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(p);n.RPC_ID="dvid/MeshSource"},function(p,e,m){function k(c){var a=[],b=/^[ \t]*(\d+)[ \t]+(\d+)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-1|\d+)[ \t]*$/;c.split("\n").forEach(function(c){if(c=
c.match(b)){var d=a[parseInt(c[1],10)-1]=new f;d.type=parseInt(c[2],10);d.x=parseFloat(c[3]);d.y=parseFloat(c[4]);d.z=parseFloat(c[5]);d.radius=parseFloat(c[6]);d.parent=parseInt(c[7],10)-1}});return a}e.a=function(c,a){a=k(a);if(2>a.length)throw Error("ERROR parsing swc file");var b=new Float32Array(3*a.length),d=new Uint32Array(2*(a.length-1));a.forEach(function(a,c){b[3*c]=a.z;b[3*c+1]=a.y;b[3*c+2]=a.x;-1!==a.parent&&(d[2*(c-1)]=c,d[2*c-1]=a.parent)});c.indices=d;c.vertexPositions=b};var f=function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");}},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){var b=[];Object(I.a)(a,function(a){Object(I.i)(a);b.push(Object(I.l)(a.sectionId))});return b}function b(a,b,c){return Object(B.d)(Object(B.c)(b.baseUrls,"/render-ws/v1/owner/"+b.owner+"/project/"+b.project+"/"+("stack/"+b.stack+"/local-to-world-coordinates"),"PUT"),a,"json",c)}function d(a,c,d,e){var f=[];Object(I.a)(c,function(a){var b=
Object(I.l)(a.pId),c=Object(I.l)(a.qId),d=Object(I.i)(a.matches);a=d.p;d=d.q;for(var e=0;e<a[0].length;e++)f.push({tileId:b,local:[a[0][e],a[1][e]]}),f.push({tileId:c,local:[d[0][e],d[1][e]]})});return b(f,d,e).then(function(b){for(var c=new w.a,d=0;d<b.length;d++){var e=Object(I.i)(b[d]);e=Object(I.g)(e.world);c.appendArray(e)}a.vertexPositions=c.view})}function n(a,b,c,e){if(1===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[0]);
else if(2===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[1]);else throw Error("Invalid section Id vector of length: "+JSON.stringify(b.length));return Object(B.e)(Object(B.c)(c.baseUrls,b),"json",e).then(function(b){return d(a,b,c,e)})}function l(b,c,d,e){return Object(B.e)(Object(B.c)(d.baseUrls,c),"json",e).then(function(c){return n(b,a(c),d,e)})}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"TileChunkSource",function(){return v});
m.d(e,"PointMatchSource",function(){return A});p=m(2);e=m(116);var g=m(18),r=m(117),C=m(16),w=m(119),h=m(1),B=m(15),I=m(3);m=m(0);var u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),x=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):
d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},J=new Map;J.set("jpg",g.a);var v=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=J.get(a.parameters.encoding);var c=a.parameters;var d=[];void 0!==c.channel&&d.push("channels="+c.channel);void 0!==
c.minIntensity&&d.push("minIntensity="+JSON.stringify(c.minIntensity));void 0!==c.maxIntensity&&d.push("maxIntensity="+JSON.stringify(c.maxIntensity));void 0!==c.maxTileSpecsToRender&&d.push("maxTileSpecsToRender="+JSON.stringify(c.maxTileSpecsToRender));void 0!==c.filter&&d.push("filter="+JSON.stringify(c.filter));c=d.join("&");a.queryString=c;return a}c(b,a);u(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=a.chunkGridPosition,f=1/Math.pow(2,d.level);a.chunkDataSize=this.spec.chunkDataSize;
var g=a.chunkDataSize[0]*Math.pow(2,d.level),l=a.chunkDataSize[1]*Math.pow(2,d.level),k=h.m.create();k[0]=e[0]*g;k[1]=e[1]*l;k[2]=e[2];return Object(B.e)(Object(B.c)(d.baseUrls,"/render-ws/v1/owner/"+d.owner+"/project/"+d.project+"/stack/"+d.stack+"/z/"+k[2]+"/box/"+k[0]+","+k[1]+","+g+","+l+","+f+"/jpeg-image?"+this.queryString),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(p.WithParameters)(C.a,e.b));v=x([Object(m.g)()],v);var A=function(a){function b(){k(this,
b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);u(b,[{key:"download",value:function(a,b){var c=this.parameters,d=a.chunkGridPosition;return l(a,"/render-ws/v1/owner/"+c.owner+"/project/"+c.project+"/"+("stack/"+c.stack+"/sectionData?minZ="+d[2]+"&")+("maxZ="+(d[2]+c.zoffset)),c,b)}}]);return b}(Object(p.WithParameters)(r.a,e.a));A=x([Object(m.g)()],A)},function(p,e,m){function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"b",function(){return a});m.d(e,
"a",function(){return b});p=function(a){function b(){c(this,b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(function n(){c(this,n)});var a=function(a){function b(){c(this,b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(p);a.RPC_ID="render/TileChunkSource";var b=function(a){function b(){c(this,b);return k(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(p);b.RPC_ID=
"render/PointMatchSource"},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return n});p=m(19);var a=m(118),b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function g(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,
b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return g(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};m=function(a){function e(){k(this,e);var a=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));a.source=null;a.vertexPositions=null;a.vertexNormals=null;return a}c(e,a);b(e,[{key:"initializeVolumeChunk",value:function(a,b){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initializeVolumeChunk",this).call(this,a,b);a=0;this.vertexPositions&&
(a+=this.vertexPositions.buffer.byteLength);this.vertexNormals&&(a+=this.vertexNormals.buffer.byteLength);this.gpuMemoryBytes=this.systemMemoryBytes=a;this.vertexPositions=null}},{key:"serialize",value:function(a,b){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"serialize",this).call(this,a,b);var c=this.vertexPositions,f=this.vertexNormals;a.vertexPositions=c;b.push(c.buffer);f&&(a.vertexNormals=f,b.push(f.buffer));this.vertexNormals=this.vertexPositions=null}},{key:"downloadSucceeded",
value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength;d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.vertexNormals=this.vertexPositions=null}}]);return e}(p.SliceViewChunk);var n=function(b){function d(b,c){k(this,d);b=f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b,c));b.spec=a.a.fromObject(c.spec);return b}c(d,b);return d}(p.SliceViewChunkSource);n.prototype.chunkConstructor=
m},function(p,e,m){function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m.d(e,"a",function(){return d});var f=m(9),c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function l(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return l(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},b;(function(a){a[a.LINE=0]="LINE";a[a.POINT=1]="POINT"})(b||(b={}));var d=function(b){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(d,b);c(d,[{key:"toObject",value:function(){return a(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"toObject",this).call(this)}}],[{key:"make",value:function(a){return new d(Object.assign({},a,{transform:Object(f.k)(a.transform,a.vectorGraphicsSourceOptions)}))}},{key:"fromObject",
value:function(a){return new d(a)}}]);return d}(f.i)},function(p,e,m){m.d(e,"a",function(){return f});var k=function(){function c(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=
new Float32Array(a)}k(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Float32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Float32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=
b-a}},{key:"view",get:function(){var a=this.data;return new Float32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(p,e,m){Object.defineProperty(e,"__esModule",{value:!0});m(45)},function(p,e,m){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){return Object(d.c)(a,b,"fragments")}function b(a,b){var c=(new DataView(b)).getUint32(0,!0);Object(d.d)(a,b,C.b.LITTLE,4,c)}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"PrecomputedVolumeChunkSource",
function(){return u});e.decodeManifestChunk=a;e.decodeFragmentChunk=b;m.d(e,"PrecomputedMeshSource",function(){return x});p=m(2);e=m(122);var d=m(17),n=m(25),l=m(18),g=m(23),r=m(16),C=m(11),w=m(15);m=m(0);var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),B=this&&this.__decorate||function(a,b,c,d){var e=
arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},I=new Map;I.set(e.b.RAW,g.a);I.set(e.b.JPEG,l.a);I.set(e.b.COMPRESSED_SEGMENTATION,n.a);var u=function(a){function b(){k(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));
a.chunkDecoder=I.get(a.parameters.encoding);return a}c(b,a);h(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=this.computeChunkBounds(a),f=a.chunkDataSize;return Object(w.e)(Object(w.c)(d.baseUrls,d.path+"/"+e[0]+"-"+(e[0]+f[0])+"_"+(e[1]+"-"+(e[1]+f[1])+"_")+(e[2]+"-"+(e[2]+f[2]))),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(p.WithParameters)(r.a,e.c));u=B([Object(m.g)()],u);var x=function(d){function e(){k(this,e);return f(this,(e.__proto__||
Object.getPrototypeOf(e)).apply(this,arguments))}c(e,d);h(e,[{key:"download",value:function(b,c){var d=this.parameters;return Object(w.e)(Object(w.c)(d.baseUrls,d.path+"/"+b.objectId+":"+d.lod),"json",c).then(function(c){return a(b,c)})}},{key:"downloadFragment",value:function(a,c){var d=this.parameters;return Object(w.e)(Object(w.c)(d.baseUrls,d.path+"/"+a.fragmentId),"arraybuffer",c).then(function(c){return b(a,c)})}}]);return e}(Object(p.WithParameters)(d.a,e.a));x=B([Object(m.g)()],x)},function(p,
e,m){function k(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}m.d(e,"b",function(){return f});m.d(e,"c",function(){return c});m.d(e,"a",function(){return a});var f;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(f||(f={}));var c=function d(){k(this,d)};c.RPC_ID="precomputed/VolumeChunkSource";var a=function n(){k(this,n)};a.RPC_ID="precomputed/MeshSource"},function(p,e,m){function k(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a){Object(B.isCompressed)(a)&&(a=Object(B.decompress)(a));var b=new u;b.uncompressedData=a;a=Object(B.readHeader)(a);
if(null===a)throw Error("Failed to parse NIFTI header.");b.header=a;return b}function a(a,b,d,e){return n.a.getData(a,c,b,d,e)}function b(b,c,e){return a(b,c,function(){return{priorityTier:d.d.VISIBLE,priority:1E3}},e).then(function(a){return a.header})}Object.defineProperty(e,"__esModule",{value:!0});m.d(e,"NiftiFileData",function(){return u});m.d(e,"NiftiVolumeChunkSource",function(){return J});p=m(2);var d=m(7),n=m(29),l=m(125),g=m(23);e=m(16);var r=m(44),C=m(11),w=m(1),h=m(0),B=m(126);m.n(B);
var I=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();m=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=
a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var u=function A(){f(this,A)},x=new Map([[l.b.INT8,{dataType:r.a.UINT8,volumeType:r.c.IMAGE}],[l.b.UINT8,{dataType:r.a.UINT8,volumeType:r.c.IMAGE}],[l.b.INT16,{dataType:r.a.UINT16,volumeType:r.c.IMAGE}],[l.b.UINT16,{dataType:r.a.UINT16,volumeType:r.c.IMAGE}],[l.b.INT32,{dataType:r.a.UINT32,volumeType:r.c.SEGMENTATION}],[l.b.UINT32,{dataType:r.a.UINT32,volumeType:r.c.SEGMENTATION}],[l.b.INT64,{dataType:r.a.UINT64,
volumeType:r.c.SEGMENTATION}],[l.b.UINT64,{dataType:r.a.UINT64,volumeType:r.c.SEGMENTATION}],[l.b.FLOAT32,{dataType:r.a.FLOAT32,volumeType:r.c.IMAGE}]]);Object(h.e)(l.a,function(a,c){return b(this.getRef(a.chunkManager),a.url,c).then(function(a){var b=x.get(a.datatypeCode);if(void 0===b)throw Error("Unsupported data type: "+((l.b[a.datatypeCode]||a.datatypeCode)+"."));if(1!==a.dims[4])throw Error("Time series data not supported.");var c=1;switch(a.xyzt_units&B.NIFTI1.SPATIAL_UNITS_MASK){case B.NIFTI1.UNITS_METER:c=
1E9;break;case B.NIFTI1.UNITS_MM:c=1E6;break;case B.NIFTI1.UNITS_MICRON:c=1E3}var d=a.quatern_b,e=a.quatern_c,f=a.quatern_d,g=Math.sqrt(1-d*d-e*e-f*f),h=-1===a.pixDims[0]?-1:1,k=a.description;var m=a.affine;m=w.h.fromValues(m[0][0],m[1][0],m[2][0],m[3][0],m[0][1],m[1][1],m[2][1],m[3][1],m[0][2],m[1][2],m[2][2],m[3][2],m[0][3],m[1][3],m[2][3],m[3][3]);return{value:{description:k,affine:m,dataType:b.dataType,numChannels:a.dims[5],volumeType:b.volumeType,voxelSize:w.m.fromValues(c*a.pixDims[1],c*a.pixDims[2],
c*a.pixDims[3]),volumeSize:w.m.fromValues(a.dims[1],a.dims[2],a.dims[3]),qoffset:w.m.fromValues(c*a.qoffset_x,c*a.qoffset_y,c*a.qoffset_z),qform_code:a.qform_code,sform_code:a.sform_code,qfac:h,quatern:w.j.fromValues(d,e,f,g)}}})});var J=function(b){function c(){f(this,c);var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(c,b);
I(c,[{key:"download",value:function(b,c){b.chunkDataSize=this.spec.chunkDataSize;return a(this.chunkManager.addRef(),this.parameters.url,function(){return{priorityTier:b.priorityTier,priority:b.priority}},c).then(function(a){var c=Object(B.readImage)(a.header,a.uncompressedData);Object(g.a)(b,c,a.header.littleEndian?C.b.LITTLE:C.b.BIG)})}}]);return c}(Object(p.WithParameters)(e.a,l.c));J=m([Object(h.g)()],J)},function(p,e,m){e.a=function(c){if(c instanceof Object){var a=c[k];void 0===a&&(a=c[k]=f++);
return"o"+a}return""+JSON.stringify(c)};$jscomp.initSymbol();var k=Symbol("objectId"),f=0},function(p,e,m){m.d(e,"b",function(){return k});m.d(e,"c",function(){return f});e.a="nifti/getNiftiVolumeInfo";var k;(function(c){c[c.NONE=0]="NONE";c[c.BINARY=1]="BINARY";c[c.UINT8=2]="UINT8";c[c.INT16=4]="INT16";c[c.INT32=8]="INT32";c[c.FLOAT32=16]="FLOAT32";c[c.COMPLEX64=32]="COMPLEX64";c[c.FLOAT64=64]="FLOAT64";c[c.RGB24=128]="RGB24";c[c.INT8=256]="INT8";c[c.UINT16=512]="UINT16";c[c.UINT32=768]="UINT32";
c[c.INT64=1024]="INT64";c[c.UINT64=1280]="UINT64";c[c.FLOAT128=1536]="FLOAT128";c[c.COMPLEX128=1792]="COMPLEX128";c[c.COMPLEX256=2048]="COMPLEX256"})(k||(k={}));var f=function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");};f.RPC_ID="nifti/VolumeChunkSource"},function(p,e,m){var k=k||{};k.NIFTI1=k.NIFTI1||m(51);k.NIFTI2=k.NIFTI2||m(127);k.Utils=k.Utils||m(30);var f=f||m(27);k.isNIFTI1=function(c){if(c.byteLength<k.NIFTI1.STANDARD_HEADER_SIZE)return!1;var a=new DataView(c);
c=a.getUint8(k.NIFTI1.MAGIC_NUMBER_LOCATION);var b=a.getUint8(k.NIFTI1.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(k.NIFTI1.MAGIC_NUMBER_LOCATION+2);return!(c!==k.NIFTI1.MAGIC_NUMBER[0]||b!==k.NIFTI1.MAGIC_NUMBER[1]||a!==k.NIFTI1.MAGIC_NUMBER[2])};k.isNIFTI2=function(c){if(c.byteLength<k.NIFTI1.STANDARD_HEADER_SIZE)return!1;var a=new DataView(c);c=a.getUint8(k.NIFTI2.MAGIC_NUMBER_LOCATION);var b=a.getUint8(k.NIFTI2.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(k.NIFTI2.MAGIC_NUMBER_LOCATION+2);return!(c!==k.NIFTI2.MAGIC_NUMBER[0]||
b!==k.NIFTI2.MAGIC_NUMBER[1]||a!==k.NIFTI2.MAGIC_NUMBER[2])};k.isNIFTI=function(c){return k.isNIFTI1(c)||k.isNIFTI2(c)};k.isCompressed=function(c){if(c){var a=new DataView(c);c=a.getUint8(0);a=a.getUint8(1);if(c===k.Utils.GUNZIP_MAGIC_COOKIE1||a===k.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1};k.decompress=function(c){return f.inflate(c).buffer};k.readHeader=function(c){var a=null;k.isCompressed(c)&&(c=k.decompress(c));k.isNIFTI1(c)?a=new k.NIFTI1:k.isNIFTI2(c)&&(a=new k.NIFTI2);a?a.readHeader(c):
console.error("That file does not appear to be NIFTI!");return a};k.hasExtension=function(c){return 0!=c.extensionFlag[0]};k.readImage=function(c,a){var b=c.vox_offset,d=1,e=1;c.dims[4]&&(d=c.dims[4]);c.dims[5]&&(e=c.dims[5]);return a.slice(b,b+c.numBitsPerVoxel/8*c.dims[2]*c.dims[3]*d*e*c.dims[1])};k.readExtension=function(c,a){var b=c.getExtensionLocation();return a.slice(b,b+c.extensionSize)};k.readExtensionData=function(c,a){var b=c.getExtensionLocation();return a.slice(b+8,b+c.extensionSize-
8)};"undefined"!==typeof p&&p.exports&&(p.exports=k)},function(p,e,m){var k=k||{};k.Utils=k.Utils||m(30);k.NIFTI1=k.NIFTI1||m(51);k.NIFTI2=k.NIFTI2||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=
0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};k.NIFTI2.MAGIC_COOKIE=540;k.NIFTI2.MAGIC_NUMBER_LOCATION=4;k.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];k.NIFTI2.prototype.readHeader=function(e){e=new DataView(e);var c=k.Utils.getIntAt(e,0,this.littleEndian),a,b;c!==k.NIFTI2.MAGIC_COOKIE&&
(this.littleEndian=!0,c=k.Utils.getIntAt(e,0,this.littleEndian));if(c!==k.NIFTI2.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.datatypeCode=k.Utils.getShortAt(e,12,this.littleEndian);this.numBitsPerVoxel=k.Utils.getShortAt(e,14,this.littleEndian);for(a=0;8>a;a+=1)c=16+8*a,this.dims[a]=k.Utils.getLongAt(e,c,this.littleEndian);this.intent_p1=k.Utils.getDoubleAt(e,80,this.littleEndian);this.intent_p2=k.Utils.getDoubleAt(e,88,this.littleEndian);this.intent_p3=k.Utils.getDoubleAt(e,
96,this.littleEndian);for(a=0;8>a;a+=1)c=104+8*a,this.pixDims[a]=k.Utils.getDoubleAt(e,c,this.littleEndian);this.vox_offset=k.Utils.getLongAt(e,168,this.littleEndian);this.scl_slope=k.Utils.getDoubleAt(e,176,this.littleEndian);this.scl_inter=k.Utils.getDoubleAt(e,184,this.littleEndian);this.cal_max=k.Utils.getDoubleAt(e,192,this.littleEndian);this.cal_min=k.Utils.getDoubleAt(e,200,this.littleEndian);this.slice_duration=k.Utils.getDoubleAt(e,208,this.littleEndian);this.toffset=k.Utils.getDoubleAt(e,
216,this.littleEndian);this.slice_start=k.Utils.getLongAt(e,224,this.littleEndian);this.slice_end=k.Utils.getLongAt(e,232,this.littleEndian);this.description=k.Utils.getStringAt(e,240,320);this.aux_file=k.Utils.getStringAt(e,320,344);this.qform_code=k.Utils.getIntAt(e,344,this.littleEndian);this.sform_code=k.Utils.getIntAt(e,348,this.littleEndian);this.quatern_b=k.Utils.getDoubleAt(e,352,this.littleEndian);this.quatern_c=k.Utils.getDoubleAt(e,360,this.littleEndian);this.quatern_d=k.Utils.getDoubleAt(e,
368,this.littleEndian);this.qoffset_x=k.Utils.getDoubleAt(e,376,this.littleEndian);this.qoffset_y=k.Utils.getDoubleAt(e,384,this.littleEndian);this.qoffset_z=k.Utils.getDoubleAt(e,392,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=400+8*(4*a+b),this.affine[a][b]=k.Utils.getDoubleAt(e,c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=k.Utils.getIntAt(e,496,this.littleEndian);this.xyzt_units=k.Utils.getIntAt(e,500,this.littleEndian);
this.intent_code=k.Utils.getIntAt(e,504,this.littleEndian);this.intent_name=k.Utils.getStringAt(e,508,524);this.dim_info=k.Utils.getByteAt(e,524);e.byteLength>k.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=k.Utils.getByteAt(e,540),this.extensionFlag[1]=k.Utils.getByteAt(e,541),this.extensionFlag[2]=k.Utils.getByteAt(e,542),this.extensionFlag[3]=k.Utils.getByteAt(e,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=this.getExtensionCode(e)))};k.NIFTI2.prototype.toFormattedString=
function(){var e=k.Utils.formatNumber;var c=""+("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");c+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n";c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+
", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+="Slice Start = "+this.slice_start+
"\n";c+="Slice End = "+this.slice_end+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+
this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(k.NIFTI1.SPATIAL_UNITS_MASK&
this.xyzt_units)+", "+this.getUnitsCodeString(k.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Intent Code = "+this.intent_code+"\n";c+='Intent Name: "'+this.intent_name+'"\n';return c+="Dim Info = "+this.dim_info+"\n"};k.NIFTI2.prototype.getExtensionLocation=function(){return k.NIFTI2.MAGIC_COOKIE+4};k.NIFTI2.prototype.getExtensionSize=k.NIFTI1.prototype.getExtensionSize;k.NIFTI2.prototype.getExtensionCode=k.NIFTI1.prototype.getExtensionCode;k.NIFTI2.prototype.getDatatypeCodeString=k.NIFTI1.prototype.getDatatypeCodeString;
k.NIFTI2.prototype.getTransformCodeString=k.NIFTI1.prototype.getTransformCodeString;k.NIFTI2.prototype.getUnitsCodeString=k.NIFTI1.prototype.getUnitsCodeString;k.NIFTI2.prototype.getQformMat=k.NIFTI1.prototype.getQformMat;k.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=k.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;k.NIFTI2.prototype.convertNiftiSFormToNEMA=k.NIFTI1.prototype.convertNiftiSFormToNEMA;k.NIFTI2.prototype.nifti_mat33_mul=k.NIFTI1.prototype.nifti_mat33_mul;k.NIFTI2.prototype.nifti_mat33_determ=
k.NIFTI1.prototype.nifti_mat33_determ;"undefined"!==typeof p&&p.exports&&(p.exports=k.NIFTI2)},function(p,e,m){function k(a){return Object(c.a)(Object(b.a)(a))}Object.defineProperty(e,"__esModule",{value:!0});var f=m(29),c=m(129);p=m(52);var a=m(14),b=m(53);Object(p.a)("vtk",{description:"VTK",getMesh:function(b,c,e,g){return f.a.getData(b.addRef(),k,c,e,g).then(function(b){var c={info:{numTriangles:b.numTriangles,numVertices:b.numVertices,vertexAttributes:[]},indices:b.indices,vertexPositions:b.vertexPositions,
vertexAttributes:[]};b=$jscomp.makeIterator(b.vertexAttributes);for(var d=b.next();!d.done;d=b.next())d=d.value,c.info.vertexAttributes.push({name:d.name,dataType:a.b.FLOAT32,numComponents:d.numComponents}),c.vertexAttributes.push(d.data);return c})}})},function(p,e,m){e.a=function(a){var b=(new TextDecoder).decode(new Uint8Array(a.buffer,a.byteOffset,Math.min(a.byteLength,1E3))).match(k);if(null===b)throw Error("Failed to parse VTK file header.");var c=b[0].length,d=b[4],e=b[3];b={version:b[1],comment:b[2],
datasetType:d,dataFormat:e};a=new Uint8Array(a.buffer,a.byteOffset+c,a.byteLength-c);if("ASCII"===e){e=r.get(d);if(void 0===e)throw Error("VTK dataset type "+JSON.stringify(d)+" is not supported.");return e(b,a)}throw Error("VTK data format "+JSON.stringify(e)+" is not supported.");};var k=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,f=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,c=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,
a=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,b=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,d=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,n=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,l=/^[ \t]*$/,g=function w(a,b,c,d,e,f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.header=a;this.numVertices=b;this.vertexPositions=c;this.numTriangles=d;this.indices=e;this.vertexAttributes=f},r=new Map([["POLYDATA",function(e,
h){function k(a,b,c,d){d=RegExp("^[ \t]*"+"([^s]+)[ \t]+".repeat(c-1)+"([^s]+)[ \t]*$");if(v-A<b)throw Error("VTK data ended unexpectedly while parsing "+a+".");for(var e=new Float32Array(b*c),f=0,g=0;g<b;++g){var h=w[A++],k=h.match(d);if(null===k)throw Error("Failed to parse "+a+" line "+g+": "+JSON.stringify(h)+".");for(h=0;h<c;++h)e[f++]=parseFloat(k[h+1])}return e}function m(a,b){if(void 0!==q)throw Error("POINTS specified more than once.");t=a;z=k("POINTS",a,3,b)}function p(a,b){if(void 0!==
q)throw Error("VERTICES specified more than once.");if(v-A<a)throw Error("VTK data ended unexpectedly");if(b!==4*a)throw Error("Only triangular faces are supported.");H=a;q=new Uint32Array(3*a);for(var c=b=0;c<a;++c){var d=w[A++].match(n);if(null===d)throw Error("Failed to parse indices for face "+c);q[b++]=parseInt(d[1],10);q[b++]=parseInt(d[2],10);q[b++]=parseInt(d[3],10)}}function r(c){if(t!==c)throw Error("Number of vertices specified in POINT_DATA section ("+c+") "+("must match number of points ("+
t+")."));for(;A<v;)if(c=w[A],c.match(l))++A;else{var d=c.match(a);if(null!==d){var e=void 0===d[3]?1:parseInt(d[3],10);++A;c=d[1];d=d[2];if(A===v)throw Error("Expected LOOKUP_TABLE directive.");var f=w[A++],g=f.match(b);if(null===g)throw Error("Expected LOOKUP_TABLE directive in "+JSON.stringify(f)+".");f=g[1];g=k("SCALARS("+c+")",t,e,d);G.push({name:c,data:g,numComponents:e,dataType:d,tableName:f})}}}for(var w=(new TextDecoder).decode(h).split("\n"),v=w.length,A=0,t=-1,z=void 0,H=-1,q=void 0,G=[];A<
v;)if(h=w[A],h.match(l))++A;else{var L=void 0;L=h.match(c);if(null!==L)++A,m(parseInt(L[1],10),L[2]);else if(L=h.match(d),null!==L)++A,p(parseInt(L[1],10),parseInt(L[2],10));else{L=h.match(f);if(null!==L){++A;r(parseInt(L[1],10));break}throw Error("Failed to parse VTK line "+JSON.stringify(h)+".");}}if(void 0===z)throw Error("Vertex positions not specified.");if(void 0===q)throw Error("Indices not specified.");return new g(e,t,z,H,q,G)}]])},function(p,e,m){function k(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}m.d(e,"d",function(){return c});e.c="single_mesh/SingleMeshLayer";e.a="single_mesh/getSingleMeshInfo";e.b="";var c=function(a){function b(){f(this,
b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}k(b,a);return b}(function b(){f(this,b)});c.RPC_ID="single_mesh/SingleMeshSource"},function(p,e,m){function k(b){b=(new TextDecoder).decode(Object(a.a)(b)).trim().split(/\n+/);if(!b)throw Error("CSV file is empty.");var d=b[0].split(","),e=d.map(function(a){return{name:a.trim(),
dataType:c.b.FLOAT32,numComponents:1}}),f=b.length-1,g=d.length;d=d.map(function(){return new Float32Array(f)});for(var k=0;k<f;++k)for(var m=b[k+1].split(","),p=0;p<g;++p)d[p][k]=parseFloat(m[p]);return{numVertices:f,attributeInfo:e,attributes:d}}Object.defineProperty(e,"__esModule",{value:!0});var f=m(29);p=m(52);var c=m(14),a=m(53);Object(p.b)("csv",{description:"Comma separated value text file",getMeshVertexAttributes:function(a,c,e,l){return f.a.getData(a.addRef(),k,c,e,l)}})}])});
