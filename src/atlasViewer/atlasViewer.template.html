
<div *ngIf = "meetsRequirement" class = "atlas-container">

  <layout-mainside
    [showSide] = "false"
    [overlay] = "false"
    (panelAnimationFlag) = "panelAnimationFlag($event)"
    (panelShowStateChanged) = "manualPanelToggle($event)">
    <div maincontent>
      <ui-nehuba-container>
      </ui-nehuba-container>
      
      <atlas-banner>
      </atlas-banner>

    </div>
    <div [ngSwitch] = "sidePanelView$ | async" sidecontent>

      <!-- Data Browser -->
      <div *ngSwitchCase = "'dataBrowser'">
        <panel-component [bodyCollapsable] = "true">
          <div heading>
            Data Browser
          </div>
          <div body>
            <data-browser>
            </data-browser>
          </div>
        </panel-component>
      </div>


      <!-- Layer Browser -->
      <div *ngSwitchCase = "'ngLayer'">
        <panel-component [bodyCollapsable] = "true">
          <div heading>
            Layer Browser
          </div>
          <div body>
            <layer-browser [layers] = "layersLoaded$ | async | newViewerDisctinctViewToLayer"></layer-browser>
          </div>
        </panel-component>
      </div>

      <!-- Tools Browser-->
      <div *ngSwitchCase = "'toolsBrowser'">
        <panel-component [bodyCollapsable] = "true">
          <div heading>
            Tools Browser
          </div>
          <div body>
              
          </div>
        </panel-component>
      </div>

      <!-- Default (shown at the beginning + sliver of time during closing of side bar)-->
      <div *ngSwitchDefault>
        
      </div>
      
      <!-- Docked Container-->
      <ng-template #dockedContainer>
      </ng-template>
    </div>

    <div resizeSliver>

      <span [ngClass] = "{'active-tab' : (sidePanelView$ | async) === 'dataBrowser'}" (click) = "toggleSidePanel('dataBrowser')" hoverable class = "tabContainer">
        <span  [@newEvent] = "selectedRegions$ | async" class = "highlightContainer">
        </span>
        <i class = "glyphicon glyphicon-search"></i>
        <span class = "badge" *ngIf = "(selectedRegions$ | async) && (selectedRegions$ | async).length > 0">
          {{ (selectedRegions$ | async).length }}
        </span>
      </span>

      <span [ngClass] = "{'active-tab' : (sidePanelView$ | async) === 'ngLayer'}" (click) = "toggleSidePanel('ngLayer')" hoverable class = "tabContainer">
        <span  [@newEvent] = "layersLoaded$ | async | newViewerDisctinctViewToLayer" class = "highlightContainer">
        </span>
        <i class = "glyphicon glyphicon-list"></i>
        <span class = "badge" *ngIf = "(layersLoaded$ | async | newViewerDisctinctViewToLayer).length > 0">      
          {{ (layersLoaded$ | async | newViewerDisctinctViewToLayer).length }}
        </span>
      </span>

      <span [ngClass] = "{'active-tab' : (sidePanelView$ | async) === 'toolsBrowser'}" (click) = "toggleSidePanel('toolsBrowser')" hoverable class = "tabContainer">
        <i class="glyphicon glyphicon-wrench"></i>
      </span>
    </div>
  </layout-mainside>

  <layout-floating-container
    zIndex = "9"
    #floatingOverlayContainer>
    <ng-template #floatingContainer>

    </ng-template>
    <div [style.transform] = "floatingMouseContextualContainerTransform" floatingMouseContextualContainer>
      <div *ngIf = "onhoverSegment$ | async as onhoverSegment" contextualInnerContainer>
        <div *ngIf = "onhoverSegment !== ''" contextualBlock>
          {{ onhoverSegment }} 
        </div>
      </div>
    </div>
    <div toastContainer>
      <ng-template #toastContainer>
      </ng-template>
    </div>
  </layout-floating-container>

  <ng-template #temporaryContainer>
  </ng-template>

  <ng-template #pluginFactory>
  </ng-template>

</div>

<markdown-dom *ngIf = "!meetsRequirement" [markdown] = "constantsService.doesNotMeetRequirementMD" >
</markdown-dom>

<ng-template #dedicatedViewerToast>
  <div *ngIf = "dedicatedView$ | async">
    <span dedicatedviewertext>displaying : {{ dedicatedView$ | async | getFilenameFromPathname }}. </span>
    <span (click) = "clearDedicatedView()" class = "btn btn-link">clear</span>
  </div>
  <div *ngIf = "!(dedicatedView$ | async)">
    no special data is being displayed right now
  </div>
</ng-template>
