<panel-component
  [style.transform] = "transform"
  [containerClass] = "containerClass"
  widgetUnitPanel
  [bodyCollapsable] = "state === 'docked'"
  [cdkDragDisabled]="state === 'docked'"
  cdkDrag
  [ngStyle]="{'max-width': isMobile? '100%' : '300px',
              'margin-bottom': isMobile? '5px': '0'}">
  <div 
    widgetUnitHeading
    heading
    cdkDragHandle>
    <div #emptyspan emptyspan>.</div>
    <div title>
      <div *ngIf="!titleTextBoxVisible">
        <div *ngIf="!titleHTML">
          {{ title }}
        </div>
        <div [innerHTML]="titleHTML" *ngIf="titleHTML">

        </div>
      </div>
      <div *ngIf="titleTextBoxVisible" class="d-flex justify-content-between">
        <input type="text"
               [placeholder]="title"
               #widgetTitleInput
               class="w-100"
               (keyup.enter)="pinWidget(widgetTitleInput.value)"
               (keyup.escape)="titleTextBoxVisible = false">
        <div class="float-right">
          <button class="exitButtons" (click)="pinWidget(widgetTitleInput.value)">pin</button>
          <button class="exitButtons" (click)="titleTextBoxVisible = false">cancel</button>
        </div>
      </div>
    </div>
    <div icons>
    <span *ngIf="!isMobile && !titleTextBoxVisible" class="ml-2">
      <span *ngIf="!isDataBrowserWidget(this); else WidgetIncluded" class="d-flex align-items-center">
        <div class="ml-2 mr-2">
          <i (click)="showTitleTextBox()"
             class="fas fa-thumbtack"
             [hoverable] ="{translateY: -1}">
          </i>
        </div>
        <i *ngIf = "exitable"
           (click) = "exit($event)"
           class = "fas fa-times"
           [hoverable] ="{translateY: -1}">
        </i>
      </span>
      <ng-template #WidgetIncluded >
        <span class="d-flex align-items-center">
          <span class="ml-2 mr-2" (click)="this.widgetMediatorService.removeWidgetUnitInstance(this)">
            <span style="width: 15px; max-width: 15px;"
                  class="fa-stack crossed-out"
                  [hoverable] ="{translateY: -1}">
              <i class="fas fa-thumbtack">
              </i>
            </span>
          </span>
          <i (click)="widgetServices.minimise(this)"
             class="fas fa-window-minimize"
             [hoverable] ="{translateY: -1}">
          </i>
        </span>
      </ng-template>
    </span>

      <span>
        <i *ngIf = "canBeDocked && state === 'floating' && !isMobile"
          (click) = "dock($event)"
          class = "fas fa-window-minimize"
          hoverable></i>
        <i *ngIf = "state === 'docked' && !isMobile"
          (click) = "undock($event)"
          class = "fas fa-window-restore"
          hoverable></i>
      </span>
    </div>
  </div>
  <div widgetUnitBody body>
    <ng-template #container>

    </ng-template>
  </div>

</panel-component>