<mat-accordion>
    <mat-expansion-panel *ngFor="let managedAnnotation of managedAnnotations$ | async"
        hideToggle>

        <mat-expansion-panel-header [ngClass]="{'highlight': managedAnnotation.highlighted }">
            <mat-panel-title class="d-flex align-items-center">

                <!-- toggle visibility -->
                <button
                    mat-icon-button
                    iav-stop="click"
                    (click)="toggleManagedAnnotationVisibility(managedAnnotation.id)">
                    <i [ngClass]="(hiddenAnnotations$ | async | annotationVisiblePipe : managedAnnotation) ?  'fa-eye' : 'fa-eye-slash'" class="fas"></i>
                </button>
                <span class="flex-shrink-1 flex-grow-1" [ngClass]="{ 'text-muted': !managedAnnotation.name }">
                    {{ managedAnnotation | singleAnnotationNamePipe : managedAnnotation.name }}
                </span>    
                <i class="flex-shrink-0 flex-grow-0" [ngClass]="managedAnnotation | singleannotationClsIconPipe"></i>
            </mat-panel-title>
        </mat-expansion-panel-header>

        <!-- single annotation edit body -->
        <ng-template matExpansionPanelContent>
            <div class="single-annotation-grid-container">
                <!-- spacer for inset single-annotation-unit -->
                <div></div>
                <single-annotation-unit [single-annotation-unit-annotation]="managedAnnotation">
                </single-annotation-unit>
            </div>
        </ng-template>
    </mat-expansion-panel>
</mat-accordion>

<ng-template [ngIf]="((managedAnnotations$ | async) || []).length === 0">
    <span class="text-muted">
        No annotations saved. Save annotations by right click on the viewer and "bookmark".
    </span>
</ng-template>