<mat-tab-group>
  <!-- viewer preference -->
  <mat-tab *ngIf="false" label="Viewer Preference">
    
    <div class="m-2">
      <div class="mat-h2">
        Rearrange Viewports
      </div>
      <div class="mat-h4 text-muted">
        Click and drag to rearrange viewport positions
      </div>
      <current-layout class="d-flex w-20em h-15em p-2">
        <div
          matRipple
          (dragstart)="handleDragStart($event)"
          (dragover)="handleDragOver($event)"
          (dragleave)="handleDragLeave($event)"
          (dragend)="handleDragend($event)"
          (drop)="handleDrop($event)"
          class="w-100 h-100 config-transition"
          cell-i>
          <div
            [attr.panel-order]="0"
            class="config-transition w-100 h-100 d-flex align-items-center justify-content-center border"
            draggable="true">
            {{ (panelTexts$ | async)[0] }}
          </div>
        </div>
        <div
          matRipple
          (dragstart)="handleDragStart($event)"
          (dragover)="handleDragOver($event)"
          (dragleave)="handleDragLeave($event)"
          (dragend)="handleDragend($event)"
          (drop)="handleDrop($event)"
          class="w-100 h-100 config-transition"
          cell-ii>
          <div
            [attr.panel-order]="1"
            class="config-transition w-100 h-100 d-flex align-items-center justify-content-center border"
            draggable="true">
            {{ (panelTexts$ | async)[1] }}
          </div>
        </div>
        <div
          matRipple
          (dragstart)="handleDragStart($event)"
          (dragover)="handleDragOver($event)"
          (dragleave)="handleDragLeave($event)"
          (dragend)="handleDragend($event)"
          (drop)="handleDrop($event)"
          class="w-100 h-100 config-transition"
          cell-iii>
          <div
            [attr.panel-order]="2"
            class="config-transition w-100 h-100 d-flex align-items-center justify-content-center border"
            draggable="true">
            {{ (panelTexts$ | async)[2] }}
          </div>
        </div>
        <div
          matRipple
          (dragstart)="handleDragStart($event)"
          (dragover)="handleDragOver($event)"
          (dragleave)="handleDragLeave($event)"
          (dragend)="handleDragend($event)"
          (drop)="handleDrop($event)"
          class="w-100 h-100 config-transition"
          cell-iv>
          <div
            [attr.panel-order]="3"
            class="config-transition w-100 h-100 d-flex align-items-center justify-content-center border"
            draggable="true">
            {{ (panelTexts$ | async)[3] }}
          </div>
        </div>
      </current-layout>

      <div class="mat-body text-muted font-italic">
        Plane designation refers to default orientation (without oblique rotation).
      </div>
    </div>

    <!-- scroll window -->

    <div class="m-2">
      <div class="mat-h2">
        Select a viewports configuration
      </div>
    </div>

    <div class="d-flex flex-row flex-nowrap p-2">

      <!-- Four Panel Card -->
      <button
        class="m-2 p-2"
        mat-flat-button
        (click)="usePanelMode(supportedPanelModes[0])"
        [color]="(panelMode$ | async) === supportedPanelModes[0] ? 'primary' : null">
        <layout-four-panel class="d-block w-10em h-7em">
          <div class="border w-100 h-100" cell-i></div>
          <div class="border w-100 h-100" cell-ii></div>
          <div class="border w-100 h-100" cell-iii></div>
          <div class="border w-100 h-100" cell-iv></div>
        </layout-four-panel>
      </button>

      <!-- temporarily disabling 1-3 layout -->

      <!-- horizontal 1 3 card -->
      <!-- <button
        class="m-2 p-2"
        mat-flat-button
        (click)="usePanelMode(supportedPanelModes[1])"
        [color]="(panelMode$ | async) === supportedPanelModes[1] ? 'primary' : null">
        <layout-horizontal-one-three class="d-block w-10em h-7em">
          <div class="border w-100 h-100" cell-i></div>
          <div class="border w-100 h-100" cell-ii></div>
          <div class="border w-100 h-100" cell-iii></div>
          <div class="border w-100 h-100" cell-iv></div>
        </layout-horizontal-one-three>
      </button> -->
  
      <!-- vertical 1 3 card -->
      <!-- <button
        class="m-2 p-2"
        mat-flat-button
        (click)="usePanelMode(supportedPanelModes[2])"
        [color]="(panelMode$ | async) === supportedPanelModes[2] ? 'primary' : null">
        <layout-vertical-one-three class="d-block w-10em h-7em">
          <div class="border w-100 h-100" cell-i></div>
          <div class="border w-100 h-100" cell-ii></div>
          <div class="border w-100 h-100" cell-iii></div>
          <div class="border w-100 h-100" cell-iv></div>
        </layout-vertical-one-three>
      </button> -->

      <!-- single -->
      <button
        class="m-2 p-2"
        mat-flat-button
        (click)="usePanelMode(supportedPanelModes[3])"
        [color]="(panelMode$ | async) === supportedPanelModes[3] ? 'primary' : null">
        <layout-single-panel class="d-block w-10em h-7em">
          <div class="border w-100 h-100" cell-i></div>
          <div class="border w-100 h-100" cell-ii></div>
          <div class="border w-100 h-100" cell-iii></div>
          <div class="border w-100 h-100" cell-iv></div>
        </layout-single-panel>
      </button>
    </div>
  </mat-tab>

  <!-- hard ware -->
  <mat-tab label="Hardware">
    <!-- wrapper + margin control -->
    <div class="m-4">

      <!-- use mobile UI -->
      <div class="d-flex mb-2 align-items-center">
        <mat-slide-toggle
          [checked]="useMobileUI$ | async"
          (change)="toggleMobileUI($event)">
          Enable Mobile UI
        </mat-slide-toggle>
        <small iav-stop="click mousedown mouseup" [matTooltip]="MOBILE_UI_TOOLTIP" class="ml-2 fas fa-question"></small>
      </div>

      <!-- animation toggle -->
      <div class="d-flex mb-2 align-items-center">
        <mat-slide-toggle
          [checked]="animationFlag$ | async"
          (change)="toggleAnimationFlag($event)">
          Enable Animation
        </mat-slide-toggle>
        <small iav-stop="click mousedown mouseup" [matTooltip]="ANIMATION_TOOLTIP" class="ml-2 fas fa-question"></small>
      </div>

      <!-- GPU limit -->
      <div class="d-flex flex-row align-items-center justify-content start">
        <label
          class="m-0 d-inline-block flex-grow-0 flex-shrink-0"
          for="gpuLimitSlider">
          GPU Limit
          <small iav-stop="click mousedown mouseup" [matTooltip]="GPU_TOOLTIP" class="ml-2 fas fa-question"></small>
        </label>
        <mat-slider
          class="flex-grow-1 flex-shrink-1 ml-2 mr-2"
          id="gpuLimitSlider"
          name="gpuLimitSlider"
          thumbLabel="true"
          min="100"
          max="1000"
          [step]="stepSize"
          (change)="handleMatSliderChange($event)"
          [value]="gpuLimit$ | async">
        </mat-slider>
        <span class="d-inline-block flex-grow-0 flex-shrink-0 w-10em">
          {{ gpuLimit$ | async }} MB
        </span>
      </div>
    </div>
  </mat-tab>

  <!-- viewer -->
  <mat-tab label="Viewer">
    <div class="m-4">

      <!-- Show axis lines  -->
      <div class="d-flex mb-2 align-items-center">
        <mat-slide-toggle
                [checked]="axisLineVisible"
                (change)="toggleAxisLines($event.checked)">
          Axis lines
        </mat-slide-toggle>
        <small iav-stop="click mousedown mouseup" [matTooltip]="AXIS_LINE_TOOLTIP" class="ml-2 fas fa-question"></small>
      </div>

      <!-- Scale bar -->
      <div class="d-flex mb-2 align-items-center">
        <mat-slide-toggle
                [checked]="showScaleBar"
                (change)="toggleScaleBar($event.checked)">
          Scale bar
        </mat-slide-toggle>
        <small iav-stop="click mousedown mouseup" [matTooltip]="SCALE_BAR_TOOLTIP" class="ml-2 fas fa-question"></small>
      </div>

      <!-- Background colouring -->
      <div class="d-flex mb-2 align-items-center">
        <mat-slide-toggle
                [checked]="showBackground"
                (change)="toggleShowBackground($event.checked)">
          Background colouring
        </mat-slide-toggle>
        <small iav-stop="click mousedown mouseup" [matTooltip]="BACKGROUND_COLORING_TOOLTIP" class="ml-2 fas fa-question"></small>
        <div *ngIf="showBackground" class="ml-3">
          <input type="color" id="backgroundColorPicker" name="backgroundColorPicker"
                 (change)="setSliceBackground(backgroundColorPicker.value)"
                 #backgroundColorPicker
                 [value]="sliceBackgroundRgb">
        </div>
      </div>

    </div>
  </mat-tab>

  <!-- plugin csp -->
  <mat-tab label="Plugin Permission">
    <plugin-csp-controller></plugin-csp-controller>
  </mat-tab>
</mat-tab-group>

