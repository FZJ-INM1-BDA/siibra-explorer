<sxplr-wrapper-atp-selector (sxplr-wrapper-atp-selector-menu-open)="onATPMenuOpen($event)"
  class="sxplr-z-2">
</sxplr-wrapper-atp-selector>

<!-- selected region chip -->
<ng-template [ngIf]="view$ | async" let-view>

  <!-- single region -->
  <ng-template [ngIf]="view.selectedRegions.length == 1">
    <sxplr-smart-chip
      class="region-chip"
      mat-ripple
      *ngFor="let region of view.selectedRegions"
      [noMenu]="true"
      [color]="sapiViewsCoreRegion.regionRgbString"
      (click)="onRegionClick.emit()"
      sxplr-sapiviews-core-region
      [sxplr-sapiviews-core-region-atlas]="view.selectedAtlas"
      [sxplr-sapiviews-core-region-template]="view.selectedTemplate"
      [sxplr-sapiviews-core-region-parcellation]="view.selectedParcellation"
      [sxplr-sapiviews-core-region-region]="region"
      [sxplr-sapiviews-core-region-detail-flag]="true"
      #sapiViewsCoreRegion="sapiViewsCoreRegion">
      
      <ng-template sxplrSmartChipHeader>
        <span class="regionname">
          Region
        </span>
      </ng-template>

      <ng-template sxplrSmartChipAction>
        <button class="sxplr-mr-n3"
            mat-icon-button
            (click)="clearRoi()">
            <i class="fas fa-times"></i>
        </button>
      </ng-template>
      
      <ng-template sxplrSmartChipContent>
        <span class="regionname">
          {{ region.name }}
        </span>
      </ng-template>
    </sxplr-smart-chip>
  </ng-template>

  
  <!-- multiple-regions -->
  <ng-template [ngIf]="view.selectedRegions.length > 1">
    <sxplr-smart-chip
      class="region-chip"
      mat-ripple
      [noMenu]="true"
      
      (click)="onRegionClick.emit()"
      sxplr-sapiviews-core-region
      [sxplr-sapiviews-core-region-atlas]="view.selectedAtlas"
      [sxplr-sapiviews-core-region-template]="view.selectedTemplate"
      [sxplr-sapiviews-core-region-parcellation]="view.selectedParcellation">
      
      <ng-template sxplrSmartChipHeader>
        <span class="regionname">
          Region
        </span>
      </ng-template>

      <ng-template sxplrSmartChipAction>
        <button class="sxplr-mr-n3"
            mat-icon-button
            (click)="clearRoi()">
            <i class="fas fa-times"></i>
        </button>
      </ng-template>

      <ng-template sxplrSmartChipContent>
        <span class="regionname">
          {{ view.selectedRegions.length }} regions selected
        </span>
      </ng-template>
    </sxplr-smart-chip>

  </ng-template>

</ng-template>
